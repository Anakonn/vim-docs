---
description: یادگیری رجیسترهای Vim مانند یادگیری جبر است. این فصل به بررسی ۱۰ نوع
  رجیستر و نحوه استفاده مؤثر از آن‌ها می‌پردازد.
title: Ch08. Registers
---

یادگیری رجیسترهای Vim مانند یادگیری جبر برای اولین بار است. شما فکر نمی‌کردید که به آن نیاز دارید تا زمانی که به آن نیاز پیدا کردید.

شما احتمالاً از رجیسترهای Vim زمانی که متنی را کپی یا حذف کردید و سپس با `p` یا `P` آن را چسباندید، استفاده کرده‌اید. با این حال، آیا می‌دانستید که Vim دارای ۱۰ نوع مختلف رجیستر است؟ اگر به درستی استفاده شود، رجیسترهای Vim می‌توانند شما را از تایپ تکراری نجات دهند.

در این فصل، من تمام انواع رجیسترهای Vim و نحوه استفاده مؤثر از آن‌ها را بررسی خواهم کرد.

## ده نوع رجیستر

در اینجا ۱۰ نوع رجیستر Vim آورده شده است:

1. رجیستر بدون نام (`""`).
2. رجیسترهای عددی (`"0-9`).
3. رجیستر حذف کوچک (`"-`).
4. رجیسترهای نام‌دار (`"a-z`).
5. رجیسترهای فقط خواندنی (`":`, `".`, و `"%`).
6. رجیستر فایل جایگزین (`"#`).
7. رجیستر عبارت (`"=`).
8. رجیسترهای انتخاب (`"*` و `"+`).
9. رجیستر سیاه‌چاله (`"_`).
10. رجیستر الگوی جستجوی آخرین (`"/`).

## عملگرهای رجیستر

برای استفاده از رجیسترها، ابتدا باید آن‌ها را با عملگرها ذخیره کنید. در اینجا چند عملگر وجود دارد که مقادیر را به رجیسترها ذخیره می‌کنند:

```shell
y    کپی (کپی)
c    حذف متن و شروع حالت درج
d    حذف متن
```

عملگرهای بیشتری وجود دارد (مانند `s` یا `x`)، اما موارد بالا مفید هستند. قاعده کلی این است که اگر یک عملگر می‌تواند متنی را حذف کند، احتمالاً آن متن را در رجیسترها ذخیره می‌کند.

برای چسباندن متنی از رجیسترها، می‌توانید از:

```shell
p    چسباندن متن بعد از نشانگر
P    چسباندن متن قبل از نشانگر
```

هر دو `p` و `P` یک شمارش و یک نماد رجیستر را به عنوان آرگومان قبول می‌کنند. به عنوان مثال، برای چسباندن ده بار، `10p` را انجام دهید. برای چسباندن متن از رجیستر a، `"ap` را انجام دهید. برای چسباندن متن از رجیستر a ده بار، `10"ap` را انجام دهید. به هر حال، `p` در واقع به طور فنی به معنای "قرار دادن" است، نه "چسباندن"، اما من فکر می‌کنم چسباندن یک کلمه متداول‌تر است.

نحو کلی برای دریافت محتوا از یک رجیستر خاص `"a` است، جایی که `a` نماد رجیستر است.

## فراخوانی رجیسترها از حالت درج

هر چیزی که در این فصل یاد می‌گیرید، می‌تواند در حالت درج نیز اجرا شود. برای دریافت متن از رجیستر a، معمولاً `"ap` را انجام می‌دهید. اما اگر در حالت درج هستید، `Ctrl-R a` را اجرا کنید. نحو فراخوانی رجیسترها از حالت درج به صورت زیر است:

```shell
Ctrl-R a
```

جایی که `a` نماد رجیستر است. حالا که می‌دانید چگونه رجیسترها را ذخیره و بازیابی کنید، بیایید به عمق برویم!

## رجیستر بدون نام

برای دریافت متن از رجیستر بدون نام، `""p` را انجام دهید. این رجیستر آخرین متنی را که کپی، تغییر یا حذف کرده‌اید، ذخیره می‌کند. اگر یک کپی، تغییر یا حذف دیگر انجام دهید، Vim به طور خودکار متن قدیمی را جایگزین می‌کند. رجیستر بدون نام مانند عملیات کپی / چسباندن استاندارد یک کامپیوتر است.

به طور پیش‌فرض، `p` (یا `P`) به رجیستر بدون نام متصل است (از این پس به رجیستر بدون نام با `p` به جای `""p` اشاره خواهم کرد).

## رجیسترهای عددی

رجیسترهای عددی به طور خودکار در ترتیب صعودی پر می‌شوند. دو نوع مختلف رجیستر عددی وجود دارد: رجیستر کپی شده (`0`) و رجیسترهای عددی (`1-9`). بیایید ابتدا به رجیستر کپی شده بپردازیم.

### رجیستر کپی شده

اگر یک خط کامل متن را کپی کنید (`yy`)، Vim در واقع آن متن را در دو رجیستر ذخیره می‌کند:

1. رجیستر بدون نام (`p`).
2. رجیستر کپی شده (`"0p`).

زمانی که متن متفاوتی را کپی می‌کنید، Vim هر دو رجیستر کپی شده و بدون نام را به‌روزرسانی می‌کند. هیچ عملیات دیگری (مانند حذف) در رجیستر 0 ذخیره نخواهد شد. این می‌تواند به نفع شما باشد، زیرا مگر اینکه یک کپی دیگر انجام دهید، متن کپی شده همیشه آنجا خواهد بود، مهم نیست چند تغییر و حذف انجام دهید.

به عنوان مثال، اگر شما:
1. یک خط را کپی کنید (`yy`)
2. یک خط را حذف کنید (`dd`)
3. یک خط دیگر را حذف کنید (`dd`)

رجیستر کپی شده متن مرحله اول را خواهد داشت.

اگر شما:
1. یک خط را کپی کنید (`yy`)
2. یک خط را حذف کنید (`dd`)
3. یک خط دیگر را کپی کنید (`yy`)

رجیستر کپی شده متن مرحله سوم را خواهد داشت.

یک نکته آخر، در حالت درج، می‌توانید به سرعت متنی را که تازه کپی کرده‌اید با استفاده از `Ctrl-R 0` بچسبانید.

### رجیسترهای عددی غیر صفر

زمانی که متنی را تغییر یا حذف می‌کنید که حداقل یک خط طول دارد، آن متن در رجیسترهای عددی 1-9 به ترتیب بر اساس جدیدترین ذخیره می‌شود.

به عنوان مثال، اگر این خطوط را داشته باشید:

```shell
line three
line two
line one
```

با نشانگر خود بر روی "line three"، آن‌ها را یکی یکی با `dd` حذف کنید. وقتی تمام خطوط حذف شدند، رجیستر 1 باید "line one" (جدیدترین) را در خود داشته باشد، رجیستر 2 "line two" (دومین جدیدترین) و رجیستر 3 "line three" (قدیمی‌ترین). برای دریافت محتوا از رجیستر یک، `"1p` را انجام دهید.

به عنوان یک نکته جانبی، این رجیسترهای عددی به طور خودکار هنگام استفاده از دستور نقطه افزایش می‌یابند. اگر رجیستر عددی یک (`"1`) شامل "line one" باشد، رجیستر دو (`"2`) "line two" و رجیستر سه (`"3`) "line three"، می‌توانید به صورت متوالی با این ترفند آن‌ها را بچسبانید:
- `"1P` را انجام دهید تا محتوا را از رجیستر عددی یک ("1) بچسبانید.
- `.` را انجام دهید تا محتوا را از رجیستر عددی دو ("2) بچسبانید.
- `.` را انجام دهید تا محتوا را از رجیستر عددی سه ("3) بچسبانید.

این ترفند با هر رجیستر عددی کار می‌کند. اگر با `"5P` شروع کنید، `.` به `"6P` تبدیل می‌شود، و دوباره `.` به `"7P` و غیره.

حذف‌های کوچک مانند حذف یک کلمه (`dw`) یا تغییر یک کلمه (`cw`) در رجیسترهای عددی ذخیره نمی‌شوند. آن‌ها در رجیستر حذف کوچک (`"-`) ذخیره می‌شوند که در ادامه به آن می‌پردازم.

## رجیستر حذف کوچک

تغییرات یا حذف‌هایی که کمتر از یک خط هستند در رجیسترهای عددی 0-9 ذخیره نمی‌شوند، بلکه در رجیستر حذف کوچک (`"-`) ذخیره می‌شوند.

به عنوان مثال:
1. یک کلمه را حذف کنید (`diw`)
2. یک خط را حذف کنید (`dd`)
3. یک خط را حذف کنید (`dd`)

`"-p` کلمه حذف شده از مرحله اول را به شما می‌دهد.

مثال دیگر:
1. یک کلمه را حذف می‌کنم (`diw`)
2. یک خط را حذف می‌کنم (`dd`)
3. یک کلمه را حذف می‌کنم (`diw`)

`"-p` کلمه حذف شده از مرحله سوم را به شما می‌دهد. `"1p` خط حذف شده از مرحله دوم را به شما می‌دهد. متأسفانه، هیچ راهی برای بازیابی کلمه حذف شده از مرحله اول وجود ندارد زیرا رجیستر حذف کوچک تنها یک مورد را ذخیره می‌کند. با این حال، اگر می‌خواهید متن مرحله اول را حفظ کنید، می‌توانید این کار را با رجیسترهای نام‌دار انجام دهید.

## رجیستر نام‌دار

رجیسترهای نام‌دار، رجیسترهای چندمنظوره Vim هستند. آن‌ها می‌توانند متون کپی، تغییر یافته و حذف شده را در رجیسترهای a-z ذخیره کنند. بر خلاف ۳ نوع قبلی رجیستر که به طور خودکار متون را در رجیسترها ذخیره می‌کنند، شما باید به وضوح به Vim بگویید که از رجیستر نام‌دار استفاده کند و این به شما کنترل کامل می‌دهد.

برای کپی کردن یک کلمه به رجیستر a، می‌توانید از `"ayiw` استفاده کنید.
- `"a` به Vim می‌گوید که عمل بعدی (حذف / تغییر / کپی) در رجیستر a ذخیره خواهد شد.
- `yiw` کلمه را کپی می‌کند.

برای دریافت متن از رجیستر a، `"ap` را اجرا کنید. شما می‌توانید از تمام بیست و شش حرف الفبایی برای ذخیره بیست و شش متن مختلف با رجیسترهای نام‌دار استفاده کنید.

گاهی اوقات ممکن است بخواهید به رجیستر نام‌دار موجود خود اضافه کنید. در این صورت، می‌توانید متن خود را به جای شروع از ابتدا، اضافه کنید. برای این کار، می‌توانید از نسخه بزرگ آن رجیستر استفاده کنید. به عنوان مثال، فرض کنید کلمه "Hello " قبلاً در رجیستر a ذخیره شده است. اگر می‌خواهید "world" را به رجیستر a اضافه کنید، می‌توانید متن "world" را پیدا کرده و با استفاده از رجیستر بزرگ (`"Ayiw`) کپی کنید.

## رجیسترهای فقط خواندنی

Vim دارای سه رجیستر فقط خواندنی است: `.`, `:`, و `%`. استفاده از آن‌ها بسیار ساده است:

```shell
.    آخرین متن وارد شده را ذخیره می‌کند
:    آخرین دستور اجرا شده را ذخیره می‌کند
%    نام فایل جاری را ذخیره می‌کند
```

اگر آخرین متنی که نوشتید "Hello Vim" بود، اجرای `".p` متن "Hello Vim" را چاپ می‌کند. اگر می‌خواهید نام فایل جاری را بگیرید، `"%p` را اجرا کنید. اگر دستور `:s/foo/bar/g` را اجرا کنید، اجرای `":p` متن "s/foo/bar/g" را چاپ می‌کند.

## رجیستر فایل جایگزین

در Vim، `#` معمولاً نمایانگر فایل جایگزین است. یک فایل جایگزین، آخرین فایلی است که شما باز کرده‌اید. برای وارد کردن نام فایل جایگزین، می‌توانید از `"#p` استفاده کنید.

## رجیستر عبارت

Vim دارای یک رجیستر عبارت است، `"=`, برای ارزیابی عبارات.

برای ارزیابی عبارات ریاضی `1 + 1`، اجرا کنید:

```shell
"=1+1<Enter>p
```

در اینجا، شما به Vim می‌گویید که از رجیستر عبارت با `"=` استفاده می‌کنید. عبارت شما (`1 + 1`) است. شما باید `p` را تایپ کنید تا نتیجه را بگیرید. همان‌طور که قبلاً ذکر شد، می‌توانید همچنین از رجیستر از حالت درج دسترسی پیدا کنید. برای ارزیابی عبارت ریاضی از حالت درج، می‌توانید از:

```shell
Ctrl-R =1+1
```

شما همچنین می‌توانید مقادیر را از هر رجیستری از طریق رجیستر عبارت با افزودن `@` بگیرید. اگر می‌خواهید متن را از رجیستر a بگیرید:

```shell
"=@a
```

سپس `<Enter>` را فشار دهید و سپس `p` را بزنید. به همین ترتیب، برای دریافت مقادیر از رجیستر a در حالت درج:

```shell
Ctrl-r =@a
```

عبارت موضوع وسیعی در Vim است، بنابراین من فقط اصول را در اینجا پوشش می‌دهم. من در فصل‌های بعدی Vimscript به عبارات بیشتر خواهم پرداخت.

## رجیسترهای انتخاب

آیا گاهی اوقات آرزو نمی‌کنید که بتوانید متنی را از برنامه‌های خارجی کپی کرده و به صورت محلی در Vim بچسبانید و بالعکس؟ با رجیسترهای انتخاب Vim، می‌توانید. Vim دارای دو رجیستر انتخاب است: `quotestar` (`"*`) و `quoteplus` (`"+`). شما می‌توانید از آن‌ها برای دسترسی به متن کپی شده از برنامه‌های خارجی استفاده کنید.

اگر شما در یک برنامه خارجی (مانند مرورگر Chrome) باشید و یک بلوک متن را با `Ctrl-C` (یا `Cmd-C`، بسته به سیستم‌عامل شما) کپی کنید، معمولاً نمی‌توانید از `p` برای چسباندن متن در Vim استفاده کنید. با این حال، هر دو `"+` و `"*` Vim به کلیپ‌بورد شما متصل هستند، بنابراین می‌توانید واقعاً متن را با `"+p` یا `"*p` بچسبانید. به طور متقابل، اگر شما یک کلمه را از Vim با `"+yiw` یا `"*yiw` کپی کنید، می‌توانید آن متن را در برنامه خارجی با `Ctrl-V` (یا `Cmd-V`) بچسبانید. توجه داشته باشید که این فقط در صورتی کار می‌کند که برنامه Vim شما با گزینه `+clipboard` همراه باشد (برای بررسی آن، دستور `:version` را اجرا کنید).

شما ممکن است تعجب کنید که اگر `"*` و `"+` کار مشابهی انجام می‌دهند، چرا Vim دو رجیستر مختلف دارد؟ برخی از ماشین‌ها از سیستم پنجره X11 استفاده می‌کنند. این سیستم دارای ۳ نوع انتخاب است: اولیه، ثانویه و کلیپ‌بورد. اگر ماشین شما از X11 استفاده کند، Vim از انتخاب *اولیه* X11 با رجیستر `quotestar` (`"*`) و انتخاب *کلیپ‌بورد* X11 با رجیستر `quoteplus` (`"+`) استفاده می‌کند. این فقط در صورتی قابل اجرا است که گزینه `+xterm_clipboard` در ساخت Vim شما موجود باشد. اگر Vim شما گزینه `xterm_clipboard` نداشته باشد، این یک مشکل بزرگ نیست. فقط به این معنی است که هر دو `quotestar` و `quoteplus` قابل تعویض هستند (مال من هم ندارد).

من انجام `=*p` یا `=+p` (یا `"*p` یا `"+p`) را خسته‌کننده می‌دانم. برای اینکه Vim بتواند متن کپی شده از برنامه خارجی را فقط با `p` بچسباند، می‌توانید این را در vimrc خود اضافه کنید:

```shell
set clipboard=unnamed
```

حالا وقتی متنی را از یک برنامه خارجی کپی می‌کنم، می‌توانم آن را با رجیستر بدون نام، `p` بچسبانم. من همچنین می‌توانم متنی را از Vim کپی کرده و به یک برنامه خارجی بچسبانم. اگر شما گزینه `+xterm_clipboard` را داشته باشید، ممکن است بخواهید از هر دو گزینه کلیپ‌بورد `unnamed` و `unnamedplus` استفاده کنید.

## رجیستر سیاه‌چاله

هر بار که متنی را حذف یا تغییر می‌دهید، آن متن به طور خودکار در رجیستر Vim ذخیره می‌شود. گاهی اوقات ممکن است نخواهید چیزی را در رجیستر ذخیره کنید. چگونه می‌توانید این کار را انجام دهید؟

شما می‌توانید از رجیستر سیاه‌چاله (`"_`) استفاده کنید. برای حذف یک خط و عدم ذخیره آن در هیچ رجیستری، از `"_dd` استفاده کنید.

رجیستر سیاه‌چاله مانند `/dev/null` رجیسترها است.

## رجیستر الگوی جستجوی آخرین

برای چسباندن آخرین جستجوی خود (`/` یا `?`)، می‌توانید از رجیستر الگوی جستجوی آخرین (`"/`) استفاده کنید. برای چسباندن آخرین عبارت جستجو، از `"/p` استفاده کنید.

## مشاهده رجیسترها

برای مشاهده تمام رجیسترهای خود، از دستور `:register` استفاده کنید. برای مشاهده فقط رجیسترهای "a, "1 و "-", از `:register a 1 -` استفاده کنید.

یک پلاگین به نام [vim-peekaboo](https://github.com/junegunn/vim-peekaboo) وجود دارد که به شما اجازه می‌دهد تا محتوای رجیسترها را زمانی که در حالت عادی `"` یا `@` را فشار می‌دهید و در حالت درج `Ctrl-R` را فشار می‌دهید، مشاهده کنید. من این پلاگین را بسیار مفید می‌دانم زیرا بیشتر اوقات نمی‌توانم محتوای رجیسترهایم را به یاد بیاورم. آن را امتحان کنید!

## اجرای یک رجیستر

رجیسترهای نام‌دار فقط برای ذخیره متون نیستند. آن‌ها همچنین می‌توانند ماکروها را با `@` اجرا کنند. من در فصل بعدی به ماکروها می‌پردازم.

به خاطر داشته باشید که از آنجا که ماکروها در رجیسترهای Vim ذخیره می‌شوند، شما می‌توانید به طور تصادفی متن ذخیره شده را با ماکروها بازنویسی کنید. اگر متن "Hello Vim" را در رجیستر a ذخیره کنید و بعداً یک ماکرو در همان رجیستر ضبط کنید (`qa{macro
## پاک کردن یک رجیستر

از نظر فنی، نیازی به پاک کردن هیچ رجیستری نیست زیرا متنی که بعداً با همان نام رجیستر ذخیره می‌کنید، آن را بازنویسی خواهد کرد. با این حال، می‌توانید به سرعت هر رجیستر نام‌گذاری شده را با ضبط یک ماکرو خالی پاک کنید. به عنوان مثال، اگر `qaq` را اجرا کنید، Vim یک ماکرو خالی را در رجیستر a ضبط خواهد کرد.

یک گزینه دیگر این است که فرمان `:call setreg('a', 'hello register a')` را اجرا کنید که در آن a همان رجیستر a است و "hello register a" متنی است که می‌خواهید ذخیره کنید.

یک راه دیگر برای پاک کردن رجیستر این است که محتوای "رجیستر a" را با عبارت `:let @a = ''` به یک رشته خالی تنظیم کنید.

## قرار دادن محتوای یک رجیستر

شما می‌توانید از فرمان `:put` برای چسباندن محتوای هر یک از رجیسترها استفاده کنید. به عنوان مثال، اگر `:put a` را اجرا کنید، Vim محتوای رجیستر a را زیر خط فعلی چاپ خواهد کرد. این رفتار بسیار شبیه به `"ap` است، با این تفاوت که فرمان حالت عادی `p` محتوای رجیستر را بعد از مکان‌نما چاپ می‌کند و فرمان `:put` محتوای رجیستر را در خط جدید چاپ می‌کند.

از آنجایی که `:put` یک فرمان خط فرمان است، می‌توانید به آن یک آدرس بدهید. `:10put a` متن را از رجیستر a به زیر خط 10 می‌چسباند.

یک ترفند جالب برای استفاده از `:put` با رجیستر حفره سیاه (`"_`) است. از آنجایی که رجیستر حفره سیاه هیچ متنی را ذخیره نمی‌کند، `:put _` یک خط خالی را وارد می‌کند. شما می‌توانید این را با فرمان جهانی ترکیب کنید تا خطوط خالی متعددی وارد کنید. به عنوان مثال، برای وارد کردن خطوط خالی زیر تمام خطوطی که شامل متن "end" هستند، `:g/end/put _` را اجرا کنید. شما بعداً درباره فرمان جهانی بیشتر خواهید آموخت.

## یادگیری رجیسترها به روش هوشمندانه

شما به پایان رسیدید. تبریک می‌گویم! اگر از حجم اطلاعات احساس غرق شدگی می‌کنید، تنها نیستید. وقتی من برای اولین بار شروع به یادگیری درباره رجیسترهای Vim کردم، اطلاعات بسیار زیادی برای یک بار وجود داشت.

من فکر نمی‌کنم که شما باید همه رجیسترها را بلافاصله حفظ کنید. برای تبدیل شدن به یک فرد تولیدی، می‌توانید با استفاده از این 3 رجیستر شروع کنید:
1. رجیستر بدون نام (`""`).
2. رجیسترهای نام‌گذاری شده (`"a-z`).
3. رجیسترهای شماره‌گذاری شده (`"0-9`).

از آنجایی که رجیستر بدون نام به طور پیش‌فرض به `p` و `P` تنظیم شده است، شما فقط باید دو رجیستر را یاد بگیرید: رجیسترهای نام‌گذاری شده و رجیسترهای شماره‌گذاری شده. به تدریج رجیسترهای بیشتری را یاد بگیرید زمانی که به آنها نیاز دارید. زمان خود را بگیرید.

یک انسان متوسط ظرفیت حافظه کوتاه‌مدت محدودی دارد، حدود 5 - 7 مورد در یک زمان. به همین دلیل در ویرایش روزمره‌ام، فقط از حدود 5 - 7 رجیستر نام‌گذاری شده استفاده می‌کنم. هیچ راهی وجود ندارد که بتوانم همه بیست و شش را در ذهنم به خاطر بسپارم. من معمولاً با رجیستر a شروع می‌کنم، سپس b، به ترتیب الفبایی. این کار را امتحان کنید و آزمایش کنید تا ببینید کدام تکنیک برای شما بهترین است.

رجیسترهای Vim قدرتمند هستند. اگر به طور استراتژیک استفاده شوند، می‌توانند شما را از تایپ متون تکراری بی‌شمار نجات دهند. در مرحله بعد، بیایید درباره ماکروها یاد بگیریم.