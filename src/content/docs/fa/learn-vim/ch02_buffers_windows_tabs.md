---
description: این سند به توضیح نحوه کار با بافرها، پنجره‌ها و زبانه‌ها در ویم می‌پردازد
  و تنظیمات اولیه برای استفاده بهینه از ویم را معرفی می‌کند.
title: Ch02. Buffers, Windows, and Tabs
---

اگر قبلاً از یک ویرایشگر متن مدرن استفاده کرده‌اید، احتمالاً با بافرها و پنجره‌ها آشنا هستید. Vim به جای دو نمایش، از سه انتزاع نمایشی استفاده می‌کند: بافرها، پنجره‌ها و زبانه‌ها. در این فصل، توضیح می‌دهم که بافرها، پنجره‌ها و زبانه‌ها چه هستند و چگونه در Vim کار می‌کنند.

قبل از شروع، مطمئن شوید که گزینه `set hidden` در vimrc دارید. بدون آن، هر بار که بافرها را تغییر می‌دهید و بافر فعلی شما ذخیره نشده است، Vim از شما می‌خواهد که فایل را ذخیره کنید (اگر می‌خواهید سریع حرکت کنید، این را نمی‌خواهید). هنوز vimrc را پوشش نداده‌ام. اگر vimrc ندارید، یکی بسازید. معمولاً در دایرکتوری خانگی شما قرار دارد و نام آن `.vimrc` است. من آن را در `~/.vimrc` دارم. برای دیدن اینکه کجا باید vimrc خود را بسازید، به `:h vimrc` مراجعه کنید. درون آن، اضافه کنید:

```shell
set hidden
```

آن را ذخیره کنید، سپس آن را منبع‌گذاری کنید (از داخل vimrc دستور `:source %` را اجرا کنید).

## بافرها

یک *بافر* چیست؟

یک بافر فضایی در حافظه است که می‌توانید در آن متنی را بنویسید و ویرایش کنید. وقتی یک فایل را در Vim باز می‌کنید، داده‌ها به یک بافر متصل می‌شوند. وقتی ۳ فایل را در Vim باز می‌کنید، ۳ بافر دارید.

دو فایل خالی، `file1.js` و `file2.js` در دسترس داشته باشید (اگر ممکن است، آن‌ها را با Vim بسازید). این را در ترمینال اجرا کنید:

```bash
vim file1.js
```

آنچه می‌بینید *بافر* `file1.js` است. هر بار که یک فایل جدید باز می‌کنید، Vim یک بافر جدید ایجاد می‌کند.

Vim را ترک کنید. این بار، دو فایل جدید باز کنید:

```bash
vim file1.js file2.js
```

در حال حاضر، Vim بافر `file1.js` را نمایش می‌دهد، اما در واقع دو بافر ایجاد می‌کند: بافر `file1.js` و بافر `file2.js`. دستور `:buffers` را اجرا کنید تا همه بافرها را ببینید (به‌طور جایگزین، می‌توانید از `:ls` یا `:files` نیز استفاده کنید). باید *هر دو* `file1.js` و `file2.js` را در لیست ببینید. اجرای `vim file1 file2 file3 ... filen` تعداد n بافر ایجاد می‌کند. هر بار که یک فایل جدید باز می‌کنید، Vim یک بافر جدید برای آن فایل ایجاد می‌کند.

چندین روش برای پیمایش در بافرها وجود دارد:
- `:bnext` برای رفتن به بافر بعدی (`:bprevious` برای رفتن به بافر قبلی).
- `:buffer` + نام فایل. Vim می‌تواند نام فایل را با `<Tab>` کامل کند.
- `:buffer` + `n`، جایی که `n` شماره بافر است. به عنوان مثال، تایپ `:buffer 2` شما را به بافر شماره ۲ می‌برد.
- با `Ctrl-O` به موقعیت قدیمی‌تر در لیست پرش و با `Ctrl-I` به موقعیت جدیدتر بپرید. این‌ها روش‌های خاص بافر نیستند، اما می‌توانند برای پرش بین بافرهای مختلف استفاده شوند. من پرش‌ها را در جزئیات بیشتر در فصل ۵ توضیح می‌دهم.
- با `Ctrl-^` به بافر ویرایش شده قبلی بروید.

به محض اینکه Vim یک بافر ایجاد کند، در لیست بافرهای شما باقی می‌ماند. برای حذف آن، می‌توانید تایپ کنید `:bdelete`. همچنین می‌تواند شماره بافر را به عنوان پارامتر بپذیرد (`:bdelete 3` برای حذف بافر شماره ۳) یا نام فایل (`:bdelete` سپس از `<Tab>` برای کامل کردن استفاده کنید).

سخت‌ترین چیز برای من هنگام یادگیری درباره بافرها، تجسم نحوه کارکرد آن‌ها بود زیرا ذهن من به پنجره‌ها عادت کرده بود از زمانی که از یک ویرایشگر متن رایج استفاده می‌کردم. یک تشبیه خوب یک دسته کارت بازی است. اگر ۲ بافر داشته باشم، یک دسته ۲ کارتی دارم. کارتی که در بالا است تنها کارتی است که می‌بینم، اما می‌دانم که کارت‌هایی در زیر آن وجود دارد. اگر بافر `file1.js` را مشاهده کنم، پس کارت `file1.js` در بالای دسته است. نمی‌توانم کارت دیگر، `file2.js` را اینجا ببینم، اما آنجا هست. اگر بافرها را به `file2.js` تغییر دهم، آن کارت `file2.js` اکنون در بالای دسته است و کارت `file1.js` در زیر آن است.

اگر قبلاً از Vim استفاده نکرده‌اید، این یک مفهوم جدید است. زمان خود را برای درک آن بگذارید.

## خروج از Vim

راستی، اگر چندین بافر باز دارید، می‌توانید همه آن‌ها را با خروج از همه ببندید:

```shell
:qall
```

اگر می‌خواهید بدون ذخیره تغییرات خود ببندید، فقط `!` را در انتها اضافه کنید:

```shell
:qall!
```

برای ذخیره و خروج از همه، اجرا کنید:

```shell
:wqall
```

## پنجره‌ها

یک پنجره یک نمای دید بر روی یک بافر است. اگر از یک ویرایشگر رایج می‌آیید، این مفهوم ممکن است برای شما آشنا باشد. بیشتر ویرایشگرهای متن قابلیت نمایش چندین پنجره را دارند. در Vim، شما همچنین می‌توانید چندین پنجره داشته باشید.

بیایید دوباره `file1.js` را از ترمینال باز کنیم:

```bash
vim file1.js
```

قبلاً نوشتم که شما در حال مشاهده بافر `file1.js` هستید. در حالی که این درست بود، آن جمله ناقص بود. شما در حال مشاهده بافر `file1.js` هستید که از طریق **یک پنجره** نمایش داده می‌شود. یک پنجره نحوه مشاهده شما از یک بافر است.

هنوز Vim را ترک نکنید. اجرا کنید:

```shell
:split file2.js
```

اکنون شما در حال مشاهده دو بافر از طریق **دو پنجره** هستید. پنجره بالایی بافر `file2.js` را نمایش می‌دهد. پنجره پایینی بافر `file1.js` را نمایش می‌دهد.

اگر می‌خواهید بین پنجره‌ها حرکت کنید، از این میان‌برها استفاده کنید:

```shell
Ctrl-W H    نشانگر را به پنجره سمت چپ منتقل می‌کند
Ctrl-W J    نشانگر را به پنجره زیر منتقل می‌کند
Ctrl-W K    نشانگر را به پنجره بالایی منتقل می‌کند
Ctrl-W L    نشانگر را به پنجره سمت راست منتقل می‌کند
```

اکنون اجرا کنید:

```shell
:vsplit file3.js
```

شما اکنون سه پنجره را مشاهده می‌کنید که سه بافر را نمایش می‌دهند. یک پنجره بافر `file3.js` را نمایش می‌دهد، یک پنجره دیگر بافر `file2.js` را نمایش می‌دهد و یک پنجره دیگر بافر `file1.js` را نمایش می‌دهد.

شما می‌توانید چندین پنجره داشته باشید که همان بافر را نمایش می‌دهند. در حالی که در پنجره بالا سمت چپ هستید، تایپ کنید:

```shell
:buffer file2.js
```

اکنون هر دو پنجره بافر `file2.js` را نمایش می‌دهند. اگر شروع به تایپ در یک پنجره `file2.js` کنید، خواهید دید که هر دو پنجره‌ای که بافرهای `file2.js` را نمایش می‌دهند، به‌صورت آنی به‌روزرسانی می‌شوند.

برای بستن پنجره فعلی، می‌توانید `Ctrl-W C` را اجرا کنید یا تایپ کنید `:quit`. وقتی یک پنجره را می‌بندید، بافر هنوز آنجا خواهد بود (دستور `:buffers` را اجرا کنید تا این را تأیید کنید).

در اینجا برخی از دستورات مفید پنجره در حالت عادی آورده شده است:

```shell
Ctrl-W V    یک تقسیم عمودی جدید باز می‌کند
Ctrl-W S    یک تقسیم افقی جدید باز می‌کند
Ctrl-W C    یک پنجره را می‌بندد
Ctrl-W O    پنجره فعلی را تنها پنجره روی صفحه می‌کند و سایر پنجره‌ها را می‌بندد
```

و در اینجا فهرستی از دستورات مفید خط فرمان پنجره آورده شده است:

```shell
:vsplit filename    پنجره را به‌صورت عمودی تقسیم می‌کند
:split filename     پنجره را به‌صورت افقی تقسیم می‌کند
:new filename       پنجره جدیدی ایجاد می‌کند
```

زمان خود را برای درک آن‌ها بگذارید. برای اطلاعات بیشتر، به `:h window` مراجعه کنید.

## زبانه‌ها

یک زبانه مجموعه‌ای از پنجره‌ها است. به آن به عنوان یک طرح برای پنجره‌ها فکر کنید. در بیشتر ویرایشگرهای متن مدرن (و مرورگرهای اینترنت مدرن)، یک زبانه به معنای یک فایل / صفحه باز است و وقتی آن را می‌بندید، آن فایل / صفحه ناپدید می‌شود. در Vim، یک زبانه نمایانگر یک فایل باز نیست. وقتی یک زبانه را در Vim می‌بندید، در حال بستن یک فایل نیستید. شما فقط طرح را می‌بندید. فایل‌های باز شده در آن طرح هنوز بسته نشده‌اند، آن‌ها هنوز در بافرهای خود باز هستند.

بیایید زبانه‌های Vim را در عمل ببینیم. `file1.js` را باز کنید:

```bash
vim file1.js
```

برای باز کردن `file2.js` در یک زبانه جدید:

```shell
:tabnew file2.js
```

شما همچنین می‌توانید به Vim اجازه دهید نام فایلی را که می‌خواهید در یک *زبانه جدید* باز کنید با فشار دادن `<Tab>` کامل کند (بدون هیچ شوخی).

در زیر فهرستی از ناوبری‌های مفید زبانه آورده شده است:

```shell
:tabnew file.txt    فایل file.txt را در یک زبانه جدید باز می‌کند
:tabclose           زبانه فعلی را می‌بندد
:tabnext            به زبانه بعدی می‌رود
:tabprevious        به زبانه قبلی می‌رود
:tablast            به آخرین زبانه می‌رود
:tabfirst           به اولین زبانه می‌رود
```

شما همچنین می‌توانید `gt` را اجرا کنید تا به زبانه بعدی بروید (می‌توانید با `gT` به زبانه قبلی بروید). می‌توانید شمارش را به عنوان آرگومان به `gt` بدهید، جایی که شمارش شماره زبانه است. برای رفتن به زبانه سوم، `3gt` را انجام دهید.

یکی از مزایای داشتن چندین زبانه این است که می‌توانید آرایش‌های پنجره متفاوتی در زبانه‌های مختلف داشته باشید. شاید بخواهید زبانه اول شما دارای ۳ پنجره عمودی و زبانه دوم دارای آرایش مختلط پنجره‌های افقی و عمودی باشد. زبانه ابزار مناسبی برای این کار است!

برای شروع Vim با چندین زبانه، می‌توانید این کار را از ترمینال انجام دهید:

```bash
vim -p file1.js file2.js file3.js
```

## حرکت در ۳ بعدی

حرکت بین پنجره‌ها مانند سفر در دو بعدی در امتداد محور X-Y در مختصات کارتیزین است. می‌توانید با `Ctrl-W H/J/K/L` به پنجره‌های بالا، راست، پایین و چپ بروید.

حرکت بین بافرها مانند سفر در امتداد محور Z در مختصات کارتیزین است. تصور کنید که فایل‌های بافر شما در امتداد محور Z قرار دارند. می‌توانید محور Z را یک بافر در یک زمان با `:bnext` و `:bprevious` پیمایش کنید. می‌توانید به هر مختصات در محور Z با `:buffer filename/buffernumber` بپرید.

شما می‌توانید در *فضای سه‌بعدی* با ترکیب حرکات پنجره و بافر حرکت کنید. می‌توانید به پنجره‌های بالا، راست، پایین یا چپ (حرکت‌های X-Y) با حرکات پنجره بروید. از آنجا که هر پنجره شامل بافرها است، می‌توانید به جلو و عقب (حرکت‌های Z) با حرکات بافر بروید.

## استفاده هوشمندانه از بافرها، پنجره‌ها و زبانه‌ها

شما یاد گرفته‌اید که بافرها، پنجره‌ها و زبانه‌ها چه هستند و چگونه در Vim کار می‌کنند. اکنون که آن‌ها را بهتر درک می‌کنید، می‌توانید از آن‌ها در جریان کار خود استفاده کنید.

هر کسی یک جریان کار متفاوت دارد، اینجا جریان کار من به عنوان مثال است:
- اول، من از بافرها برای ذخیره همه فایل‌های مورد نیاز برای کار فعلی استفاده می‌کنم. Vim می‌تواند بسیاری از بافرهای باز را مدیریت کند قبل از اینکه شروع به کند شدن کند. علاوه بر این، داشتن بسیاری از بافرهای باز صفحه من را شلوغ نمی‌کند. من در هر زمان فقط یک بافر را می‌بینم (فرض می‌کنم فقط یک پنجره دارم) که به من اجازه می‌دهد بر روی یک صفحه تمرکز کنم. وقتی نیاز دارم به جایی بروم، می‌توانم به سرعت به هر بافر باز پرواز کنم.
- من از چندین پنجره برای مشاهده چندین بافر به طور همزمان استفاده می‌کنم، معمولاً هنگام مقایسه فایل‌ها، خواندن مستندات یا دنبال کردن جریان کد. سعی می‌کنم تعداد پنجره‌های باز را به بیشتر از سه محدود کنم زیرا صفحه من شلوغ می‌شود (من از یک لپ‌تاپ کوچک استفاده می‌کنم). وقتی کارم تمام شد، هر پنجره اضافی را می‌بندم. پنجره‌های کمتر به معنای حواس‌پرتی کمتر است.
- به جای زبانه‌ها، من از پنجره‌های [tmux](https://github.com/tmux/tmux/wiki) استفاده می‌کنم. معمولاً از چندین پنجره tmux به طور همزمان استفاده می‌کنم. به عنوان مثال، یک پنجره tmux برای کدهای سمت کلاینت و دیگری برای کدهای سمت سرور.

جریان کار من ممکن است با جریان کار شما بر اساس سبک ویرایش شما متفاوت باشد و این خوب است. آزمایش کنید تا جریان خود را کشف کنید که با سبک کد نویسی شما سازگار باشد.