---
description: این سند به معرفی حالت درج در ویم می‌پردازد و روش‌های مختلف ورود به این
  حالت را برای افزایش کارایی تایپ بررسی می‌کند.
title: Ch06. Insert Mode
---

حالت وارد کردن (Insert mode) حالت پیش‌فرض بسیاری از ویرایشگرهای متن است. در این حالت، آنچه را که تایپ می‌کنید، همان چیزی است که دریافت می‌کنید.

با این حال، این بدان معنا نیست که چیزهای زیادی برای یادگیری وجود ندارد. حالت وارد کردن Vim شامل ویژگی‌های مفیدی است. در این فصل، یاد خواهید گرفت که چگونه از این ویژگی‌های حالت وارد کردن در Vim برای بهبود کارایی تایپ خود استفاده کنید.

## روش‌های ورود به حالت وارد کردن

روش‌های زیادی برای ورود به حالت وارد کردن از حالت عادی وجود دارد. در اینجا برخی از آن‌ها آمده است:

```shell
i    متن را قبل از نشانگر وارد کنید
I    متن را قبل از اولین کاراکتر غیر خالی خط وارد کنید
a    متن را بعد از نشانگر اضافه کنید
A    متن را در انتهای خط اضافه کنید
o    یک خط جدید زیر نشانگر شروع کرده و متن را وارد کنید
O    یک خط جدید بالای نشانگر شروع کرده و متن را وارد کنید
s    کاراکتر زیر نشانگر را حذف کرده و متن را وارد کنید
S    خط فعلی را حذف کرده و متن را وارد کنید، مترادف با "cc"
gi   متن را در همان موقعیتی که آخرین حالت وارد کردن متوقف شده، وارد کنید
gI   متن را در ابتدای خط (ستون ۱) وارد کنید
```

به الگوی حروف کوچک / بزرگ توجه کنید. برای هر دستور کوچک، یک معادل بزرگ وجود دارد. اگر تازه‌کار هستید، نگران نباشید اگر کل لیست بالا را به خاطر نیاورید. با `i` و `o` شروع کنید. این‌ها باید برای شروع شما کافی باشند. به تدریج بیشتر یاد بگیرید.

## روش‌های مختلف خروج از حالت وارد کردن

چندین روش مختلف برای بازگشت به حالت عادی در حین حالت وارد کردن وجود دارد:

```shell
<Esc>     از حالت وارد کردن خارج شده و به حالت عادی بروید
Ctrl-[    از حالت وارد کردن خارج شده و به حالت عادی بروید
Ctrl-C    مانند Ctrl-[ و <Esc>، اما برای اختصارات بررسی نمی‌کند
```

من کلید `<Esc>` را خیلی دور می‌بینم، بنابراین کلید `<Caps-Lock>` کامپیوترم را به گونه‌ای تنظیم کرده‌ام که مانند `<Esc>` عمل کند. اگر به دنبال کیبورد ADM-3A بیل جوی (خالق Vi) باشید، خواهید دید که کلید `<Esc>` در گوشه بالا سمت چپ مانند کیبوردهای مدرن قرار ندارد، بلکه در سمت چپ کلید `q` است. به همین دلیل فکر می‌کنم منطقی است که `<Caps lock>` را به `<Esc>` نگاشت کنم.

یک کنوانسیون رایج دیگر که دیده‌ام کاربران Vim انجام می‌دهند، نگاشت `<Esc>` به `jj` یا `jk` در حالت وارد کردن است. اگر این گزینه را ترجیح می‌دهید، یکی از این خطوط (یا هر دو) را به فایل vimrc خود اضافه کنید.

```shell
inoremap jj <Esc>
inoremap jk <Esc>
```

## تکرار حالت وارد کردن

شما می‌توانید یک پارامتر شمارش قبل از ورود به حالت وارد کردن ارسال کنید. به عنوان مثال:

```shell
10i
```

اگر "hello world!" را تایپ کنید و از حالت وارد کردن خارج شوید، Vim متن را ۱۰ بار تکرار خواهد کرد. این با هر روش حالت وارد کردن کار خواهد کرد (مثلاً: `10I`، `11a`، `12o`).

## حذف بخش‌ها در حالت وارد کردن

زمانی که اشتباه تایپی می‌کنید، ممکن است تکرار `<Backspace>` خسته‌کننده باشد. ممکن است منطقی‌تر باشد که به حالت عادی بروید و اشتباه خود را حذف کنید. همچنین می‌توانید در حالت وارد کردن چندین کاراکتر را به طور همزمان حذف کنید.

```shell
Ctrl-h    یک کاراکتر را حذف کنید
Ctrl-w    یک کلمه را حذف کنید
Ctrl-u    کل خط را حذف کنید
```

## وارد کردن از رجیستر

رجیسترهای Vim می‌توانند متون را برای استفاده‌های آینده ذخیره کنند. برای وارد کردن متنی از هر رجیستر نام‌دار در حین حالت وارد کردن، `Ctrl-R` به علاوه نماد رجیستر را تایپ کنید. نمادهای زیادی وجود دارد که می‌توانید از آن‌ها استفاده کنید، اما برای این بخش، فقط رجیسترهای نام‌دار (a-z) را پوشش می‌دهیم.

برای دیدن آن در عمل، ابتدا باید یک کلمه را به رجیستر a کپی کنید. نشانگر خود را روی هر کلمه‌ای قرار دهید. سپس تایپ کنید:

```shell
"ayiw
```

- `"a` به Vim می‌گوید که هدف عمل بعدی شما به رجیستر a خواهد رفت.
- `yiw` کلمه داخلی را کپی می‌کند. فصل مربوط به دستور زبان Vim را برای یادآوری مرور کنید.

رجیستر a اکنون شامل کلمه‌ای است که تازه کپی کرده‌اید. در حین حالت وارد کردن، برای چسباندن متنی که در رجیستر a ذخیره شده است:

```shell
Ctrl-R a
```

انواع مختلفی از رجیسترها در Vim وجود دارد. من در فصل‌های بعدی به تفصیل بیشتری به آن‌ها می‌پردازم.

## اسکرول کردن

آیا می‌دانستید که می‌توانید در حین حالت وارد کردن اسکرول کنید؟ در حین حالت وارد کردن، اگر به زیرحالت `Ctrl-X` بروید، می‌توانید عملیات اضافی انجام دهید. اسکرول کردن یکی از آن‌هاست.

```shell
Ctrl-X Ctrl-Y    اسکرول به بالا
Ctrl-X Ctrl-E    اسکرول به پایین
```

## تکمیل خودکار

همان‌طور که در بالا ذکر شد، اگر از حالت وارد کردن `Ctrl-X` را فشار دهید، Vim به یک زیرحالت وارد می‌شود. شما می‌توانید در این زیرحالت حالت وارد کردن، تکمیل خودکار متن انجام دهید. اگرچه این به خوبی [intellisense](https://code.visualstudio.com/docs/editor/intellisense) یا هر پروتکل سرور زبانی (LSP) دیگر نیست، اما برای چیزی که به طور پیش‌فرض در دسترس است، ویژگی بسیار قابلی است.

در اینجا چند دستور مفید برای شروع تکمیل خودکار آورده شده است:

```shell
Ctrl-X Ctrl-L	   وارد کردن یک خط کامل
Ctrl-X Ctrl-N	   وارد کردن متنی از فایل جاری
Ctrl-X Ctrl-I	   وارد کردن متنی از فایل‌های شامل‌شده
Ctrl-X Ctrl-F	   وارد کردن نام فایل
```

هنگامی که تکمیل خودکار را فعال می‌کنید، Vim یک پنجره پاپ‌آپ نمایش می‌دهد. برای جابجایی به بالا و پایین پنجره پاپ‌آپ، از `Ctrl-N` و `Ctrl-P` استفاده کنید.

Vim همچنین دو میانبر تکمیل خودکار دارد که شامل زیرحالت `Ctrl-X` نمی‌شود:

```shell
Ctrl-N             پیدا کردن تطابق کلمه بعدی
Ctrl-P             پیدا کردن تطابق کلمه قبلی
```

به طور کلی، Vim به متن در تمام بافرهای موجود برای منبع تکمیل خودکار نگاه می‌کند. اگر بافری باز دارید که خطی می‌گوید "دونات‌های شکلاتی بهترین هستند":
- وقتی "Choco" را تایپ کنید و `Ctrl-X Ctrl-L` را فشار دهید، تمام خط را تطبیق و چاپ می‌کند.
- وقتی "Choco" را تایپ کنید و `Ctrl-P` را فشار دهید، کلمه "شکلات" را تطبیق و چاپ می‌کند.

تکمیل خودکار موضوع وسیعی در Vim است. این فقط نوک کوه یخ است. برای یادگیری بیشتر، به `:h ins-completion` مراجعه کنید.

## اجرای یک دستور حالت عادی

آیا می‌دانستید که Vim می‌تواند یک دستور حالت عادی را در حین حالت وارد کردن اجرا کند؟

در حین حالت وارد کردن، اگر `Ctrl-O` را فشار دهید، به زیرحالت وارد-عادی می‌روید. اگر به نشانگر حالت در پایین سمت چپ نگاه کنید، معمولاً `-- INSERT --` را خواهید دید، اما فشار دادن `Ctrl-O` آن را به `-- (insert) --` تغییر می‌دهد. در این حالت، می‌توانید *یک* دستور حالت عادی را انجام دهید. برخی از کارهایی که می‌توانید انجام دهید:

**مرکز کردن و پرش**

```shell
Ctrl-O zz       مرکز کردن پنجره
Ctrl-O H/M/L    پرش به بالای/وسط/پایین پنجره
Ctrl-O 'a       پرش به علامت a
```

**تکرار متن**

```shell
Ctrl-O 100ihello    وارد کردن "hello" ۱۰۰ بار
```

**اجرای دستورات ترمینال**

```shell
Ctrl-O !! curl https://google.com    اجرای curl
Ctrl-O !! pwd                        اجرای pwd
```

**حذف سریع‌تر**

```shell
Ctrl-O dtz    حذف از مکان فعلی تا حرف "z"
Ctrl-O D      حذف از مکان فعلی تا انتهای خط
```

## یادگیری حالت وارد کردن به روش هوشمند

اگر شما هم مانند من از یک ویرایشگر متن دیگر آمده‌اید، ممکن است وسوسه شوید که در حالت وارد کردن بمانید. با این حال، ماندن در حالت وارد کردن زمانی که متنی وارد نمی‌کنید، یک الگوی ضد است. عادت کنید که وقتی انگشتان شما متنی جدید تایپ نمی‌کنند، به حالت عادی بروید.

زمانی که نیاز به وارد کردن متنی دارید، ابتدا از خود بپرسید آیا آن متن قبلاً وجود دارد یا خیر. اگر وجود دارد، سعی کنید آن متن را به جای تایپ کردن، کپی یا جابجا کنید. اگر مجبور به استفاده از حالت وارد کردن هستید، ببینید آیا می‌توانید آن متن را هر زمان ممکن است تکمیل خودکار کنید. از تایپ یک کلمه بیش از یک بار خودداری کنید اگر می‌توانید.