---
description: इस दस्तावेज़ में, आप Vim और Git के एकीकरण के विभिन्न तरीकों को सीखेंगे,
  विशेष रूप से फ़ाइलों के बीच अंतर देखने के लिए।
title: Ch18. Git
---

Vim और git दो महान उपकरण हैं जो दो अलग-अलग चीजों के लिए हैं। Git एक संस्करण नियंत्रण उपकरण है। Vim एक पाठ संपादक है।

इस अध्याय में, आप Vim और git को एक साथ एकीकृत करने के विभिन्न तरीकों के बारे में जानेंगे।

## Diffing

पिछले अध्याय में याद करें, आप कई फ़ाइलों के बीच अंतर दिखाने के लिए `vimdiff` कमांड चला सकते हैं।

मान लीजिए आपके पास दो फ़ाइलें हैं, `file1.txt` और `file2.txt`।

`file1.txt` के अंदर:

```shell
pancakes
waffles
apples

milk
apple juice

yogurt
```

`file2.txt` के अंदर:

```shell
pancakes
waffles
oranges

milk
orange juice

yogurt
```

दोनों फ़ाइलों के बीच के अंतर देखने के लिए, चलाएँ:

```shell
vimdiff file1.txt file2.txt
```

वैकल्पिक रूप से आप चला सकते हैं:

```shell
vim -d file1.txt file2.txt
```

`vimdiff` दो बफर को साइड-बाय-साइड प्रदर्शित करता है। बाईं ओर `file1.txt` है और दाईं ओर `file2.txt` है। पहले अंतर (apples और oranges) दोनों लाइनों पर हाइलाइट किए गए हैं।

मान लीजिए आप चाहते हैं कि दूसरे बफर में apples हों, oranges नहीं। अपने वर्तमान स्थिति से सामग्री को `file2.txt` में स्थानांतरित करने के लिए (आप वर्तमान में `file1.txt` पर हैं), पहले अगले अंतर पर जाएँ `]c` के साथ (पिछले अंतर विंडो पर जाने के लिए, `[c` का उपयोग करें)। कर्सर अब apples पर होना चाहिए। चलाएँ `:diffput`। अब दोनों फ़ाइलों में apples होना चाहिए।

यदि आपको दूसरे बफर (orange juice, `file2.txt`) से पाठ को वर्तमान बफर (apple juice, `file1.txt`) पर प्रतिस्थापित करने के लिए स्थानांतरित करने की आवश्यकता है, तो अपने कर्सर को अभी भी `file1.txt` विंडो पर रखते हुए, पहले अगले अंतर पर जाएँ `]c`। आपका कर्सर अब apple juice पर होना चाहिए। `:diffget` चलाएँ ताकि orange juice को दूसरे बफर से प्राप्त किया जा सके और apple juice को हमारे बफर में प्रतिस्थापित किया जा सके।

`:diffput` *वर्तमान बफर से* दूसरे बफर में पाठ डालता है। `:diffget` *दूसरे बफर से* वर्तमान बफर में पाठ प्राप्त करता है।

यदि आपके पास कई बफर हैं, तो आप `:diffput fileN.txt` और `:diffget fileN.txt` चला सकते हैं ताकि fileN बफर को लक्षित किया जा सके।

## Vim As a Merge Tool

> "मुझे मर्ज संघर्षों को हल करना पसंद है!" - कोई नहीं

मुझे नहीं पता कि कोई ऐसा है जिसे मर्ज संघर्षों को हल करना पसंद है। हालाँकि, ये अनिवार्य हैं। इस अनुभाग में, आप सीखेंगे कि कैसे Vim का उपयोग मर्ज संघर्ष समाधान उपकरण के रूप में किया जाए।

पहले, डिफ़ॉल्ट मर्ज टूल को `vimdiff` का उपयोग करने के लिए बदलें:

```shell
git config merge.tool vimdiff
git config merge.conflictstyle diff3
git config mergetool.prompt false
```

वैकल्पिक रूप से, आप सीधे `~/.gitconfig` को संशोधित कर सकते हैं (डिफ़ॉल्ट रूप से यह रूट में होना चाहिए, लेकिन आपका अलग स्थान पर हो सकता है)। ऊपर दिए गए कमांड आपके gitconfig को नीचे दिए गए सेटिंग की तरह दिखने के लिए संशोधित करना चाहिए, यदि आपने उन्हें पहले नहीं चलाया है, तो आप अपने gitconfig को मैन्युअल रूप से भी संपादित कर सकते हैं।

```shell
[core]
  editor = vim
[merge]
  tool = vimdiff
  conflictstyle = diff3
[difftool]
  prompt = false
```

आइए इसे परीक्षण करने के लिए एक नकली मर्ज संघर्ष बनाते हैं। एक निर्देशिका `/food` बनाएं और इसे एक git रिपॉजिटरी बनाएं:

```shell
git init
```

एक फ़ाइल जोड़ें, `breakfast.txt`। इसके अंदर:

```shell
pancakes
waffles
oranges
```

फ़ाइल जोड़ें और इसे कमिट करें:

```shell
git add .
git commit -m "Initial breakfast commit"
```

इसके बाद, एक नई शाखा बनाएं और इसे apples शाखा कहें:

```shell
git checkout -b apples
```

`breakfast.txt` को बदलें:

```shell
pancakes
waffles
apples
```

फ़ाइल को सहेजें, फिर परिवर्तन जोड़ें और कमिट करें:

```shell
git add .
git commit -m "Apples not oranges"
```

बहुत अच्छा। अब आपके पास मास्टर शाखा में oranges हैं और apples शाखा में apples हैं। आइए मास्टर शाखा पर लौटें:

```shell
git checkout master
```

`breakfast.txt` के अंदर, आपको आधार पाठ, oranges दिखाई देना चाहिए। आइए इसे grapes में बदलते हैं क्योंकि वे अभी मौसम में हैं:

```shell
pancakes
waffles
grapes
```

सहेजें, जोड़ें, और कमिट करें:

```shell
git add .
git commit -m "Grapes not oranges"
```

अब आप apples शाखा को मास्टर शाखा में मर्ज करने के लिए तैयार हैं:

```shell
git merge apples
```

आपको एक त्रुटि दिखाई देनी चाहिए:

```shell
Auto-merging breakfast.txt
CONFLICT (content): Merge conflict in breakfast.txt
Automatic merge failed; fix conflicts and then commit the result.
```

एक संघर्ष, बहुत अच्छा! आइए हमारे नए कॉन्फ़िगर किए गए `mergetool` का उपयोग करके संघर्ष को हल करें। चलाएँ:

```shell
git mergetool
```

Vim चार विंडो प्रदर्शित करता है। शीर्ष तीन पर ध्यान दें:

- `LOCAL` में `grapes` है। यह "स्थानीय" में परिवर्तन है, जिसे आप मर्ज कर रहे हैं।
- `BASE` में `oranges` है। यह `LOCAL` और `REMOTE` के बीच का सामान्य पूर्वज है ताकि यह तुलना की जा सके कि वे कैसे भिन्न होते हैं।
- `REMOTE` में `apples` है। यह वह है जो मर्ज किया जा रहा है।

नीचे (चौथी विंडो) आप देखते हैं:

```shell
pancakes
waffles
<<<<<<< HEAD
grapes
||||||| db63958
oranges
=======
apples
>>>>>>> apples
```

चौथी विंडो में मर्ज संघर्ष पाठ है। इस सेटअप के साथ, यह देखना आसान है कि प्रत्येक वातावरण में क्या परिवर्तन है। आप एक साथ `LOCAL`, `BASE`, और `REMOTE` से सामग्री देख सकते हैं।

आपका कर्सर चौथी विंडो में, हाइलाइटेड क्षेत्र पर होना चाहिए। `LOCAL` (grapes) से परिवर्तन प्राप्त करने के लिए चलाएँ `:diffget LOCAL`। `BASE` (oranges) से परिवर्तन प्राप्त करने के लिए चलाएँ `:diffget BASE` और `REMOTE` (apples) से परिवर्तन प्राप्त करने के लिए चलाएँ `:diffget REMOTE`।

इस मामले में, चलिए `LOCAL` से परिवर्तन प्राप्त करते हैं। चलाएँ `:diffget LOCAL`। चौथी विंडो में अब grapes होगा। जब आप समाप्त कर लें, तो सभी फ़ाइलों को सहेजें और बाहर निकलें (`:wqall`)। यह बुरा नहीं था, है ना?

यदि आप ध्यान दें, तो आपके पास अब एक फ़ाइल `breakfast.txt.orig` भी है। Git एक बैकअप फ़ाइल बनाता है यदि चीजें ठीक नहीं होती हैं। यदि आप नहीं चाहते कि git मर्ज के दौरान बैकअप बनाए, तो चलाएँ:

```shell
git config --global mergetool.keepBackup false
```

## Git Inside Vim

Vim में कोई मूल git सुविधा नहीं है। Vim से git कमांड चलाने का एक तरीका है कमांड-लाइन मोड में बैंग ऑपरेटर, `!`, का उपयोग करना।

किसी भी git कमांड को `!` के साथ चलाया जा सकता है:

```shell
:!git status
:!git commit
:!git diff
:!git push origin master
```

आप Vim के `%` (वर्तमान बफर) या `#` (अन्य बफर) संकेतन का भी उपयोग कर सकते हैं:

```shell
:!git add %         " git add current file
:!git checkout #    " git checkout the other file
```

एक Vim ट्रिक जिसका आप विभिन्न Vim विंडो में कई फ़ाइलें जोड़ने के लिए उपयोग कर सकते हैं वह है:

```shell
:windo !git add %
```

फिर एक कमिट करें:

```shell
:!git commit "Just git-added everything in my Vim window, cool"
```

`windo` कमांड Vim के "करें" कमांड में से एक है, जो `argdo` के समान है जिसे आपने पहले देखा था। `windo` प्रत्येक विंडो पर कमांड को निष्पादित करता है।

वैकल्पिक रूप से, आप सभी बफरों को git add करने के लिए `bufdo !git add %` या सभी फ़ाइल तर्कों को git add करने के लिए `argdo !git add %` का भी उपयोग कर सकते हैं, जो आपकी कार्यप्रवाह पर निर्भर करता है।

## Plugins

Git समर्थन के लिए कई Vim प्लगइन्स हैं। नीचे कुछ लोकप्रिय git-संबंधित प्लगइन्स की सूची है (जब आप इसे पढ़ते हैं तो शायद और भी हैं):

- [vim-gitgutter](https://github.com/airblade/vim-gitgutter)
- [vim-signify](https://github.com/mhinz/vim-signify)
- [vim-fugitive](https://github.com/tpope/vim-fugitive)
- [gv.vim](https://github.com/junegunn/gv.vim)
- [vimagit](https://github.com/jreybert/vimagit)
- [vim-twiggy](https://github.com/sodapopcan/vim-twiggy)
- [rhubarb](https://github.com/tpope/vim-rhubarb)

सबसे लोकप्रिय में से एक है vim-fugitive। अध्याय के शेष भाग में, मैं इस प्लगइन का उपयोग करके कई git कार्यप्रवाहों के बारे में बताऊंगा।

## Vim-fugitive

vim-fugitive प्लगइन आपको Vim संपादक को छोड़े बिना git CLI चलाने की अनुमति देता है। आप पाएंगे कि कुछ कमांड Vim के अंदर निष्पादित करने पर बेहतर होते हैं।

शुरू करने के लिए, vim-fugitive को एक Vim प्लगइन प्रबंधक ([vim-plug](https://github.com/junegunn/vim-plug), [vundle](https://github.com/VundleVim/Vundle.vim), [dein.vim](https://github.com/Shougo/dein.vim), आदि) के साथ स्थापित करें।

## Git Status

जब आप बिना किसी पैरामीटर के `:Git` कमांड चलाते हैं, तो vim-fugitive एक git सारांश विंडो प्रदर्शित करता है। यह अनट्रैक्ड, अनस्टेज्ड, और स्टेज्ड फ़ाइल(फाइलों) को दिखाता है। इस "`git status`" मोड में, आप कई चीजें कर सकते हैं:
- फ़ाइल सूची में ऊपर या नीचे जाने के लिए `Ctrl-N` / `Ctrl-P`।
- कर्सर के तहत फ़ाइल नाम को स्टेज या अनस्टेज करने के लिए `-`।
- कर्सर के तहत फ़ाइल नाम को स्टेज करने के लिए `s`।
- कर्सर के तहत फ़ाइल नाम को अनस्टेज करने के लिए `u`।
- कर्सर के तहत फ़ाइल नाम का इनलाइन डिफ़ प्रदर्शित या छिपाने के लिए `>` / `<`।

अधिक जानकारी के लिए, `:h fugitive-staging-maps` देखें।

## Git Blame

जब आप वर्तमान फ़ाइल से `:Git blame` कमांड चलाते हैं, तो vim-fugitive एक विभाजित ब्लेम विंडो प्रदर्शित करता है। यह उस बग वाले कोड की पंक्ति के लिए जिम्मेदार व्यक्ति को खोजने के लिए उपयोगी हो सकता है ताकि आप उस पर चिल्ला सकें (बस मजाक कर रहा हूँ)।

जब आप इस `"git blame"` मोड में होते हैं, तो आप कुछ चीजें कर सकते हैं:
- ब्लेम विंडो बंद करने के लिए `q`।
- लेखक कॉलम का आकार बदलने के लिए `A`।
- कमिट कॉलम का आकार बदलने के लिए `C`।
- दिनांक / समय कॉलम का आकार बदलने के लिए `D`।

अधिक जानकारी के लिए, `:h :Git_blame` देखें।

## Gdiffsplit

जब आप `:Gdiffsplit` कमांड चलाते हैं, तो vim-fugitive वर्तमान फ़ाइल के नवीनतम परिवर्तनों के खिलाफ इंडेक्स या कार्य वृक्ष का `vimdiff` चलाता है। यदि आप `:Gdiffsplit <commit>` चलाते हैं, तो vim-fugitive उस फ़ाइल का `vimdiff` चलाता है जो `<commit>` के अंदर है।

चूंकि आप `vimdiff` मोड में हैं, आप `:diffput` और `:diffget` के साथ डिफ़ प्राप्त या डाल सकते हैं।

## Gwrite and Gread

जब आप फ़ाइल में परिवर्तन करने के बाद `:Gwrite` कमांड चलाते हैं, तो vim-fugitive परिवर्तनों को स्टेज करता है। यह `git add <current-file>` चलाने के समान है।

जब आप फ़ाइल में परिवर्तन करने के बाद `:Gread` कमांड चलाते हैं, तो vim-fugitive फ़ाइल को परिवर्तनों से पहले की स्थिति में पुनर्स्थापित करता है। यह `git checkout <current-file>` चलाने के समान है। `:Gread` चलाने का एक लाभ यह है कि यह क्रिया पूर्ववत की जा सकती है। यदि, जब आप `:Gread` चलाते हैं, तो आप अपना मन बदलते हैं और पुराने परिवर्तन को रखना चाहते हैं, तो आप बस पूर्ववत (`u`) चला सकते हैं और Vim `:Gread` क्रिया को पूर्ववत कर देगा। यदि आपने CLI से `git checkout <current-file>` चलाया होता, तो यह संभव नहीं होता।

## Gclog

जब आप `:Gclog` कमांड चलाते हैं, तो vim-fugitive कमिट इतिहास प्रदर्शित करता है। यह `git log` कमांड चलाने के समान है। Vim-fugitive इसे प्राप्त करने के लिए Vim के क्विकफिक्स का उपयोग करता है, इसलिए आप अगले या पिछले लॉग जानकारी पर जाने के लिए `:cnext` और `:cprevious` का उपयोग कर सकते हैं। आप लॉग सूची को `:copen` और `:cclose` के साथ खोल और बंद कर सकते हैं।

जब आप इस `"git log"` मोड में होते हैं, तो आप दो चीजें कर सकते हैं:
- पेड़ देखें।
- माता-पिता (पिछले कमिट) पर जाएँ।

आप `:Gclog` को तर्क पास कर सकते हैं जैसे कि `git log` कमांड। यदि आपके प्रोजेक्ट का लंबा कमिट इतिहास है और आपको केवल अंतिम तीन कमिट देखने की आवश्यकता है, तो आप `:Gclog -3` चला सकते हैं। यदि आपको इसे कमिट करने वाले की तारीख के आधार पर फ़िल्टर करने की आवश्यकता है, तो आप कुछ इस तरह चला सकते हैं `:Gclog --after="January 1" --before="March 14"`।

## More Vim-fugitive

ये केवल कुछ उदाहरण हैं कि vim-fugitive क्या कर सकता है। vim-fugitive के बारे में अधिक जानने के लिए, `:h fugitive.txt` देखें। अधिकांश लोकप्रिय git कमांड शायद vim-fugitive के साथ अनुकूलित हैं। आपको बस उन्हें दस्तावेज़ीकरण में देखना है।

यदि आप vim-fugitive के "विशेष मोड" में हैं (उदाहरण के लिए, `:Git` या `:Git blame` मोड के अंदर) और आप जानना चाहते हैं कि कौन से शॉर्टकट उपलब्ध हैं, तो `g?` दबाएँ। Vim-fugitive आपके द्वारा जिस मोड में हैं, उसके लिए उपयुक्त `:help` विंडो प्रदर्शित करेगा। शानदार!
## स्मार्ट तरीके से Vim और Git सीखें

आपको vim-fugitive आपके कार्यप्रवाह के लिए एक अच्छा पूरक लग सकता है (या नहीं)। फिर भी, मैं आपको ऊपर सूचीबद्ध सभी प्लगइन्स को देखने के लिए दृढ़ता से प्रोत्साहित करूंगा। शायद और भी हैं जिन्हें मैंने सूचीबद्ध नहीं किया। उन्हें आजमाएं।

Vim-git एकीकरण में बेहतर होने का एक स्पष्ट तरीका git के बारे में अधिक पढ़ना है। Git, अपने आप में, एक विशाल विषय है और मैं केवल इसका एक अंश दिखा रहा हूँ। इसके साथ, चलिए *git going* (शब्दों का खेल माफ करें) करते हैं और बात करते हैं कि अपने कोड को संकलित करने के लिए Vim का उपयोग कैसे करें!