---
description: इस अध्याय में, आप View, Session और Viminfo का उपयोग करके अपने प्रोजेक्ट्स
  की "स्नैपशॉट" को संरक्षित करना सीखेंगे।
title: Ch20. Views, Sessions, and Viminfo
---

आपने किसी प्रोजेक्ट पर कुछ समय काम करने के बाद, आप देख सकते हैं कि प्रोजेक्ट धीरे-धीरे अपने सेटिंग्स, फोल्ड्स, बफर्स, लेआउट आदि के साथ आकार ले रहा है। यह आपके अपार्टमेंट को सजाने के समान है जब आप उसमें कुछ समय रहते हैं। समस्या यह है कि जब आप Vim बंद करते हैं, तो आप उन परिवर्तनों को खो देते हैं। क्या यह अच्छा नहीं होगा अगर आप उन परिवर्तनों को बनाए रख सकें ताकि अगली बार जब आप Vim खोलें, तो यह बिल्कुल वैसा ही दिखे जैसे आपने कभी छोड़ा ही नहीं?

इस अध्याय में, आप सीखेंगे कि अपने प्रोजेक्ट्स का "स्नैपशॉट" बनाए रखने के लिए View, Session और Viminfo का उपयोग कैसे करें।

## View

View तीनों का सबसे छोटा उपसमुच्चय है (View, Session, Viminfo)। यह एक विंडो के लिए सेटिंग्स का संग्रह है। यदि आप एक विंडो पर लंबे समय तक काम करते हैं और आप मैप्स और फोल्ड्स को बनाए रखना चाहते हैं, तो आप View का उपयोग कर सकते हैं।

आइए एक फ़ाइल बनाते हैं जिसका नाम `foo.txt` है:

```shell
foo1
foo2
foo3
foo4
foo5
foo6
foo7
foo8
foo9
foo10
```

इस फ़ाइल में, तीन परिवर्तन करें:
1. पंक्ति 1 पर, एक मैनुअल फोल्ड बनाएं `zf4j` (अगली 4 पंक्तियों को फोल्ड करें)।
2. `number` सेटिंग को बदलें: `setlocal nonumber norelativenumber`। यह विंडो के बाईं ओर संख्या संकेतकों को हटा देगा।
3. एक स्थानीय मैपिंग बनाएं ताकि आप हर बार `j` दबाने पर एक की बजाय दो पंक्तियों के नीचे जा सकें: `:nnoremap <buffer> j jj`।

आपकी फ़ाइल इस तरह दिखनी चाहिए:

```shell
+-- 5 lines: foo1 -----
foo6
foo7
foo8
foo9
foo10
```

### View गुणों को कॉन्फ़िगर करना

चलाएँ:

```shell
:set viewoptions?
```

डिफ़ॉल्ट रूप से यह कहना चाहिए (आपका अलग दिख सकता है आपके vimrc के आधार पर):

```shell
viewoptions=folds,cursor,curdir
```

आइए `viewoptions` को कॉन्फ़िगर करें। तीन गुण जो आप बनाए रखना चाहते हैं वे हैं फोल्ड्स, मैप्स, और स्थानीय सेट विकल्प। यदि आपकी सेटिंग मेरी तरह दिखती है, तो आपके पास पहले से ही `folds` विकल्प है। आपको View को `localoptions` याद रखने के लिए बताना होगा। चलाएँ:

```shell
:set viewoptions+=localoptions
```

यह देखने के लिए कि `viewoptions` के लिए और कौन से विकल्प उपलब्ध हैं, `:h viewoptions` देखें। अब यदि आप `:set viewoptions?` चलाते हैं, तो आपको यह देखना चाहिए:

```shell
viewoptions=folds,cursor,curdir,localoptions
```

### View को सहेजना

`foo.txt` विंडो को ठीक से फोल्ड करने और `nonumber norelativenumber` विकल्प होने के साथ, चलिए View को सहेजते हैं। चलाएँ:

```shell
:mkview
```

Vim एक View फ़ाइल बनाता है।

### View फ़ाइलें

आप सोच सकते हैं, "Vim ने यह View फ़ाइल कहाँ सहेजी?" यह देखने के लिए कि Vim इसे कहाँ सहेजता है, चलाएँ:

```shell
:set viewdir?
```

Unix आधारित OS में डिफ़ॉल्ट रूप से यह `~/.vim/view` कहना चाहिए (यदि आपके पास अलग OS है, तो यह अलग पथ दिखा सकता है। अधिक जानकारी के लिए `:h viewdir` देखें)। यदि आप Unix आधारित OS चला रहे हैं और इसे किसी अन्य पथ पर बदलना चाहते हैं, तो इसे अपने vimrc में जोड़ें:

```shell
set viewdir=$HOME/else/where
```

### View फ़ाइल लोड करना

यदि आपने `foo.txt` बंद नहीं किया है, तो इसे फिर से खोलें। **आपको मूल पाठ बिना परिवर्तनों के दिखाई देना चाहिए।** यह अपेक्षित है।

राज्य को पुनर्स्थापित करने के लिए, आपको View फ़ाइल को लोड करना होगा। चलाएँ:

```shell
:loadview
```

अब आपको यह देखना चाहिए:

```shell
+-- 5 lines: foo1 -----
foo6
foo7
foo8
foo9
foo10
```

फोल्ड्स, स्थानीय सेटिंग्स, और स्थानीय मैपिंग्स पुनर्स्थापित हो गए हैं। यदि आप देखेंगे, तो आपका कर्सर भी उसी पंक्ति पर होना चाहिए जहाँ आपने `:mkview` चलाया था। जब तक आपके पास `cursor` विकल्प है, View आपकी कर्सर स्थिति को भी याद रखता है।

### कई Views

Vim आपको 9 नंबर वाले Views (1-9) सहेजने की अनुमति देता है।

मान लीजिए आप एक अतिरिक्त फोल्ड बनाना चाहते हैं (मान लीजिए आप अंतिम दो पंक्तियों को फोल्ड करना चाहते हैं) `:9,10 fold` के साथ। आइए इसे View 1 के रूप में सहेजते हैं। चलाएँ:

```shell
:mkview 1
```

यदि आप `:6,7 fold` के साथ एक और फोल्ड बनाना चाहते हैं और इसे एक अलग View के रूप में सहेजना चाहते हैं, तो चलाएँ:

```shell
:mkview 2
```

फ़ाइल बंद करें। जब आप `foo.txt` खोलते हैं और आप View 1 लोड करना चाहते हैं, तो चलाएँ:

```shell
:loadview 1
```

View 2 लोड करने के लिए, चलाएँ:

```shell
:loadview 2
```

मूल View लोड करने के लिए, चलाएँ:

```shell
:loadview
```

### View निर्माण को स्वचालित करना

सबसे खराब चीजों में से एक यह है कि, एक बड़े फ़ाइल को फोल्ड्स के साथ व्यवस्थित करने में अनगिनत घंटे बिताने के बाद, आप गलती से विंडो बंद कर देते हैं और सभी फोल्ड जानकारी खो देते हैं। इसे रोकने के लिए, आप चाह सकते हैं कि हर बार जब आप एक बफर बंद करें तो स्वचालित रूप से एक View बनाया जाए। इसे अपने vimrc में जोड़ें:

```shell
autocmd BufWinLeave *.txt mkview
```

इसके अतिरिक्त, जब आप एक बफर खोलते हैं तो View लोड करना अच्छा हो सकता है:

```shell
autocmd BufWinEnter *.txt silent loadview
```

अब आपको `txt` फ़ाइलों के साथ काम करते समय View बनाने और लोड करने की चिंता करने की आवश्यकता नहीं है। ध्यान रखें कि समय के साथ, आपका `~/.vim/view` View फ़ाइलों को जमा करना शुरू कर सकता है। इसे हर कुछ महीनों में साफ करना अच्छा है।

## Sessions

यदि एक View एक विंडो की सेटिंग्स को सहेजता है, तो एक Session सभी विंडो की जानकारी (लेआउट सहित) को सहेजता है।

### एक नया Session बनाना

मान लीजिए आप `foobarbaz` प्रोजेक्ट में इन 3 फ़ाइलों के साथ काम कर रहे हैं:

`foo.txt` के अंदर:

```shell
foo1
foo2
foo3
foo4
foo5
foo6
foo7
foo8
foo9
foo10
```

`bar.txt` के अंदर:

```shell
bar1
bar2
bar3
bar4
bar5
bar6
bar7
bar8
bar9
bar10
```

`baz.txt` के अंदर:

```shell
baz1
baz2
baz3
baz4
baz5
baz6
baz7
baz8
baz9
baz10
```

अब मान लीजिए कि आपने `:split` और `:vsplit` के साथ अपनी विंडोज़ को विभाजित किया है। इस रूप को बनाए रखने के लिए, आपको Session को सहेजना होगा। चलाएँ:

```shell
:mksession
```

`mkview` के विपरीत, जो डिफ़ॉल्ट रूप से `~/.vim/view` में सहेजता है, `mksession` वर्तमान निर्देशिका में एक Session फ़ाइल (`Session.vim`) सहेजता है। यदि आप जानने के लिए उत्सुक हैं कि इसके अंदर क्या है, तो फ़ाइल की जांच करें।

यदि आप Session फ़ाइल को कहीं और सहेजना चाहते हैं, तो आप `mksession` को एक तर्क दे सकते हैं:

```shell
:mksession ~/some/where/else.vim
```

यदि आप मौजूदा Session फ़ाइल को ओवरराइट करना चाहते हैं, तो `!` के साथ कमांड को कॉल करें (`:mksession! ~/some/where/else.vim`)।

### एक Session लोड करना

Session लोड करने के लिए, चलाएँ:

```shell
:source Session.vim
```

अब Vim बिल्कुल उसी तरह दिखता है जैसे आपने इसे छोड़ा था, जिसमें विभाजित विंडोज़ भी शामिल हैं! वैकल्पिक रूप से, आप टर्मिनल से भी एक Session फ़ाइल लोड कर सकते हैं:

```shell
vim -S Session.vim
```

### Session गुणों को कॉन्फ़िगर करना

आप उन गुणों को कॉन्फ़िगर कर सकते हैं जो Session सहेजता है। यह देखने के लिए कि वर्तमान में क्या सहेजा जा रहा है, चलाएँ:

```shell
:set sessionoptions?
```

मेरे पास यह कहता है:

```shell
blank,buffers,curdir,folds,help,tabpages,winsize,terminal
```

यदि आप नहीं चाहते कि जब आप Session सहेजते हैं तो `terminal` सहेजा जाए, तो इसे सत्र विकल्पों से हटा दें। चलाएँ:

```shell
:set sessionoptions-=terminal
```

यदि आप Session सहेजते समय एक `options` जोड़ना चाहते हैं, तो चलाएँ:

```shell
:set sessionoptions+=options
```

यहाँ कुछ गुण हैं जो `sessionoptions` सहेज सकता है:
- `blank` खाली विंडो को सहेजता है
- `buffers` बफर्स को सहेजता है
- `folds` फोल्ड्स को सहेजता है
- `globals` वैश्विक चर को सहेजता है (उसे एक बड़े अक्षर से शुरू करना चाहिए और कम से कम एक छोटे अक्षर को शामिल करना चाहिए)
- `options` विकल्पों और मैपिंग्स को सहेजता है
- `resize` विंडो की पंक्तियों और कॉलम को सहेजता है
- `winpos` विंडो की स्थिति को सहेजता है
- `winsize` विंडो के आकार को सहेजता है
- `tabpages` टैब को सहेजता है
- `unix` फ़ाइलों को Unix प्रारूप में सहेजता है

पूर्ण सूची के लिए `:h 'sessionoptions'` देखें।

Session आपके प्रोजेक्ट के बाहरी गुणों को बनाए रखने के लिए एक उपयोगी उपकरण है। हालाँकि, कुछ आंतरिक गुण जैसे स्थानीय मार्क्स, रजिस्टर, इतिहास आदि Session द्वारा नहीं सहेजे जाते हैं। उन्हें सहेजने के लिए, आपको Viminfo का उपयोग करना होगा!

## Viminfo

यदि आप देखेंगे, तो रजिस्टर a में एक शब्द को यांक करने के बाद और Vim को बंद करने के बाद, अगली बार जब आप Vim खोलते हैं तो आपके पास वह पाठ रजिस्टर a में संग्रहीत होता है। यह वास्तव में Viminfo का काम है। इसके बिना, Vim आपके बंद होने के बाद रजिस्टर को याद नहीं रखेगा।

यदि आप Vim 8 या उच्चतर का उपयोग करते हैं, तो Vim डिफ़ॉल्ट रूप से Viminfo सक्षम करता है, इसलिए आप इस पूरे समय Viminfo का उपयोग कर रहे होंगे बिना यह जाने!

आप पूछ सकते हैं: "Viminfo क्या सहेजता है? यह Session से कैसे भिन्न है?"

Viminfo का उपयोग करने के लिए, सबसे पहले आपको `+viminfo` फ़ीचर उपलब्ध होना चाहिए (`:version`)। Viminfo सहेजता है:
- कमांड-लाइन इतिहास।
- खोज स्ट्रिंग इतिहास।
- इनपुट-लाइन इतिहास।
- गैर-खाली रजिस्टर की सामग्री।
- कई फ़ाइलों के लिए मार्क्स।
- फ़ाइल मार्क्स, जो फ़ाइलों में स्थानों की ओर इशारा करते हैं।
- अंतिम खोज / प्रतिस्थापन पैटर्न (के लिए 'n' और '&')।
- बफर सूची।
- वैश्विक चर।

सामान्यतः, Session "बाहरी" गुणों को सहेजता है और Viminfo "आंतरिक" गुणों को।

Session के विपरीत जहाँ आपके पास प्रति प्रोजेक्ट एक Session फ़ाइल हो सकती है, आप सामान्यतः प्रति कंप्यूटर एक Viminfo फ़ाइल का उपयोग करेंगे। Viminfo प्रोजेक्ट-निषेधात्मक है।

Unix के लिए डिफ़ॉल्ट Viminfo स्थान `$HOME/.viminfo` (`~/.viminfo`) है। यदि आप एक अलग OS का उपयोग करते हैं, तो आपका Viminfo स्थान अलग हो सकता है। `:h viminfo-file-name` देखें। प्रत्येक बार जब आप "आंतरिक" परिवर्तन करते हैं, जैसे कि रजिस्टर में पाठ को यांक करना, Vim स्वचालित रूप से Viminfo फ़ाइल को अपडेट करता है।

*सुनिश्चित करें कि आपके पास `nocompatible` विकल्प सेट है (`set nocompatible`), अन्यथा आपका Viminfo काम नहीं करेगा।*

### Viminfo लिखना और पढ़ना

हालाँकि आप केवल एक Viminfo फ़ाइल का उपयोग करेंगे, आप कई Viminfo फ़ाइलें बना सकते हैं। एक Viminfo फ़ाइल लिखने के लिए, `:wviminfo` कमांड का उपयोग करें (`:wv` संक्षिप्त रूप में)।

```shell
:wv ~/.viminfo_extra
```

एक मौजूदा Viminfo फ़ाइल को ओवरराइट करने के लिए, `wv` कमांड में एक बैंग जोड़ें:

```shell
:wv! ~/.viminfo_extra
```

डिफ़ॉल्ट रूप से Vim `~/.viminfo` फ़ाइल से पढ़ेगा। किसी अन्य Viminfo फ़ाइल से पढ़ने के लिए, `:rviminfo` चलाएँ, या संक्षेप में `:rv`:

```shell
:rv ~/.viminfo_extra
```

टर्मिनल से एक अलग Viminfo फ़ाइल के साथ Vim शुरू करने के लिए, `i` ध्वज का उपयोग करें:

```shell
vim -i viminfo_extra
```

यदि आप विभिन्न कार्यों के लिए Vim का उपयोग करते हैं, जैसे कि कोडिंग और लेखन, तो आप लेखन के लिए अनुकूलित एक Viminfo और कोडिंग के लिए एक अन्य बना सकते हैं।

```shell
vim -i viminfo_writing

vim -i viminfo_coding
```

### Viminfo के बिना Vim शुरू करना

Vim को Viminfo के बिना शुरू करने के लिए, आप टर्मिनल से चला सकते हैं:

```shell
vim -i NONE
```

इसे स्थायी बनाने के लिए, आप इसे अपने vimrc फ़ाइल में जोड़ सकते हैं:

```shell
set viminfo="NONE"
```

### Viminfo गुणों को कॉन्फ़िगर करना

`viewoptions` और `sessionoptions` की तरह, आप `viminfo` विकल्प के साथ कौन से गुण सहेजने के लिए निर्देशित कर सकते हैं। चलाएँ:

```shell
:set viminfo?
```

आपको मिलेगा:

```shell
!,'100,<50,s10,h
```

यह अजीब लग सकता है। आइए इसे तोड़ते हैं:
- `!` वैश्विक चर को सहेजता है जो एक बड़े अक्षर से शुरू होता है और छोटे अक्षरों को शामिल नहीं करता। याद रखें कि `g:` एक वैश्विक चर को इंगित करता है। उदाहरण के लिए, यदि किसी समय आपने असाइनमेंट `let g:FOO = "foo"` लिखा, तो Viminfo वैश्विक चर `FOO` को सहेजता है। हालाँकि, यदि आपने `let g:Foo = "foo"` किया, तो Viminfo इस वैश्विक चर को नहीं सहेजेगा क्योंकि इसमें छोटे अक्षर हैं। बिना `!` के, Vim उन वैश्विक चर को नहीं सहेजेगा।
- `'100` मार्क्स का प्रतिनिधित्व करता है। इस मामले में, Viminfo अंतिम 100 फ़ाइलों के स्थानीय मार्क्स (a-z) को सहेजेगा। ध्यान रखें कि यदि आप Viminfo को बहुत अधिक फ़ाइलें सहेजने के लिए कहते हैं, तो Vim धीमा होना शुरू कर सकता है। 1000 एक अच्छा संख्या है।
- `<50` Viminfo को बताता है कि प्रत्येक रजिस्टर के लिए अधिकतम कितनी पंक्तियाँ सहेजी जाती हैं (इस मामले में 50)। यदि मैं रजिस्टर a में 100 पंक्तियों का पाठ यांक करता हूँ (`"ay99j`) और Vim बंद करता हूँ, तो अगली बार जब मैं Vim खोलता हूँ और रजिस्टर a से पेस्ट करता हूँ (`"ap`), तो Vim अधिकतम 50 पंक्तियाँ ही पेस्ट करेगा। यदि आप अधिकतम पंक्ति संख्या नहीं देते हैं, तो *सभी* पंक्तियाँ सहेजी जाएँगी। यदि आप इसे 0 देते हैं, तो कुछ भी नहीं सहेजा जाएगा।
- `s10` एक रजिस्टर के लिए आकार सीमा (kb में) सेट करता है। इस मामले में, 10kb आकार से बड़ा कोई भी रजिस्टर बाहर रखा जाएगा।
- `h` Vim शुरू होने पर हाइलाइटिंग (से `hlsearch`) को निष्क्रिय करता है।

आप अन्य विकल्प भी पास कर सकते हैं। अधिक जानने के लिए, `:h 'viminfo'` देखें।
## व्यूज़, सत्र, और विमिनफो का स्मार्ट तरीके से उपयोग करना

विम में आपके विम वातावरण के स्नैपशॉट लेने के लिए व्यू, सत्र, और विमिनफो हैं। माइक्रो प्रोजेक्ट्स के लिए, व्यूज़ का उपयोग करें। बड़े प्रोजेक्ट्स के लिए, सत्रों का उपयोग करें। आपको व्यू, सत्र, और विमिनफो द्वारा प्रदान किए गए सभी विकल्पों की जांच करने के लिए समय निकालना चाहिए।

अपने संपादन शैली के लिए अपना खुद का व्यू, सत्र, और विमिनफो बनाएं। यदि आपको कभी अपने कंप्यूटर के बाहर विम का उपयोग करने की आवश्यकता हो, तो आप बस अपनी सेटिंग्स लोड कर सकते हैं और आप तुरंत घर पर महसूस करेंगे!