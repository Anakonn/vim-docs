---
description: इस दस्तावेज़ में, आप Vim में फ़ाइल को फोल्ड करने के विभिन्न तरीकों के
  बारे में सीखेंगे, जिससे अनावश्यक पाठ को छिपाया जा सके।
title: Ch17. Fold
---

जब आप एक फ़ाइल पढ़ते हैं, तो अक्सर कई अप्रासंगिक पाठ होते हैं जो आपको यह समझने से रोकते हैं कि वह फ़ाइल क्या करती है। अनावश्यक शोर को छिपाने के लिए, Vim फ़ोल्ड का उपयोग करें।

इस अध्याय में, आप फ़ाइल को फ़ोल्ड करने के विभिन्न तरीकों के बारे में सीखेंगे।

## मैनुअल फ़ोल्ड

कल्पना करें कि आप कुछ पाठ को कवर करने के लिए कागज की एक शीट को मोड़ रहे हैं। वास्तविक पाठ नहीं जाता, यह अभी भी वहाँ है। Vim फ़ोल्ड उसी तरह काम करता है। यह पाठ की एक श्रृंखला को मोड़ता है, इसे प्रदर्शन से छिपाते हुए बिना वास्तव में इसे हटाए।

फ़ोल्ड ऑपरेटर `z` है (जब कागज मोड़ा जाता है, तो यह अक्षर z के आकार का होता है)।

मान लीजिए कि आपके पास यह पाठ है:

```shell
Fold me
Hold me
```

पहली पंक्ति में कर्सर के साथ, `zfj` टाइप करें। Vim दोनों पंक्तियों को एक में मोड़ता है। आपको कुछ ऐसा दिखाई देना चाहिए:

```shell
+-- 2 lines: Fold me -----
```

यहाँ का विवरण:
- `zf` फ़ोल्ड ऑपरेटर है।
- `j` फ़ोल्ड ऑपरेटर के लिए गति है।

आप `zo` के साथ एक मोड़ी हुई पाठ को खोल सकते हैं। फ़ोल्ड को बंद करने के लिए, `zc` का उपयोग करें।

फ़ोल्ड एक ऑपरेटर है, इसलिए यह व्याकरण नियम (`क्रिया + संज्ञा`) का पालन करता है। आप गति या पाठ वस्तु के साथ फ़ोल्ड ऑपरेटर पास कर सकते हैं। एक आंतरिक पैराग्राफ को मोड़ने के लिए, `zfip` चलाएं। फ़ाइल के अंत तक मोड़ने के लिए, `zfG` चलाएं। `{` और `}` के बीच के पाठ को मोड़ने के लिए, `zfa{` चलाएं।

आप दृश्य मोड से फ़ोल्ड कर सकते हैं। उस क्षेत्र को हाइलाइट करें जिसे आप मोड़ना चाहते हैं (`v`, `V`, या `Ctrl-v`), फिर `zf` चलाएं।

आप कमांड-लाइन मोड से `:fold` कमांड के साथ एक फ़ोल्ड निष्पादित कर सकते हैं। वर्तमान पंक्ति और उसके बाद की पंक्ति को मोड़ने के लिए, चलाएं:

```shell
:,+1fold
```

`,+1` सीमा है। यदि आप सीमा के लिए पैरामीटर पास नहीं करते हैं, तो यह वर्तमान पंक्ति पर डिफ़ॉल्ट होता है। `+1` अगली पंक्ति के लिए सीमा संकेतक है। पंक्तियों 5 से 10 को मोड़ने के लिए, `:5,10fold` चलाएं। वर्तमान स्थिति से लेकर पंक्ति के अंत तक मोड़ने के लिए, `:,$fold` चलाएं।

अन्य कई फ़ोल्ड और अनफोल्ड कमांड हैं। मुझे लगता है कि शुरुआत में उन्हें याद रखना बहुत मुश्किल है। सबसे उपयोगी हैं:
- `zR` सभी फ़ोल्ड खोलने के लिए।
- `zM` सभी फ़ोल्ड बंद करने के लिए।
- `za` एक फ़ोल्ड टॉगल करने के लिए।

आप किसी भी पंक्ति पर `zR` और `zM` चला सकते हैं, लेकिन `za` केवल तब काम करता है जब आप एक मोड़ी हुई / अनफोल्ड पंक्ति पर हों। अधिक फ़ोल्डिंग कमांड सीखने के लिए, `:h fold-commands` देखें।

## विभिन्न फ़ोल्ड विधियाँ

उपरोक्त अनुभाग Vim के मैनुअल फ़ोल्ड को कवर करता है। Vim में छह विभिन्न फ़ोल्डिंग विधियाँ हैं:
1. मैनुअल
2. इंडेंट
3. एक्सप्रेशन
4. सिंटैक्स
5. डिफ
6. मार्कर

आप वर्तमान में कौन सी फ़ोल्डिंग विधि का उपयोग कर रहे हैं, यह देखने के लिए, `:set foldmethod?` चलाएं। डिफ़ॉल्ट रूप से, Vim `मैनुअल` विधि का उपयोग करता है।

अध्याय के बाकी हिस्से में, आप अन्य पांच फ़ोल्डिंग विधियों के बारे में सीखेंगे। चलिए इंडेंट फ़ोल्ड के साथ शुरू करते हैं।

## इंडेंट फ़ोल्ड

इंडेंट फ़ोल्ड का उपयोग करने के लिए, `'foldmethod'` को इंडेंट में बदलें:

```shell
:set foldmethod=indent
```

मान लीजिए कि आपके पास पाठ है:

```shell
One
  Two
  Two again
```

यदि आप `:set foldmethod=indent` चलाते हैं, तो आप देखेंगे:

```shell
One
+-- 2 lines: Two -----
```

इंडेंट फ़ोल्ड के साथ, Vim देखता है कि प्रत्येक पंक्ति के शुरू में कितने स्पेस हैं और इसे `'shiftwidth'` विकल्प के साथ तुलना करता है ताकि इसकी फ़ोल्डेबिलिटी निर्धारित की जा सके। `'shiftwidth'` प्रत्येक इंडेंट के चरण के लिए आवश्यक स्पेस की संख्या लौटाता है। यदि आप चलाते हैं:

```shell
:set shiftwidth?
```

Vim का डिफ़ॉल्ट `'shiftwidth'` मान 2 है। ऊपर दिए गए पाठ में, "Two" और "Two again" के बीच पंक्ति की शुरुआत और पाठ के बीच दो स्पेस हैं। जब Vim स्पेस की संख्या और `'shiftwidth'` मान 2 देखता है, तो Vim उस पंक्ति को एक इंडेंट फ़ोल्ड स्तर मानता है।

मान लीजिए इस बार आपके पास पंक्ति की शुरुआत और पाठ के बीच केवल एक स्पेस है:

```shell
One
 Two
 Two again
```

इस समय यदि आप `:set foldmethod=indent` चलाते हैं, तो Vim इंडेंटेड पंक्ति को मोड़ता नहीं है क्योंकि प्रत्येक पंक्ति पर पर्याप्त स्पेस नहीं है। एक स्पेस को इंडेंटेशन नहीं माना जाता है। हालाँकि, यदि आप `'shiftwidth'` को 1 में बदलते हैं:

```shell
:set shiftwidth=1
```

तो पाठ अब मोड़ने योग्य है। इसे अब इंडेंटेशन माना जाता है।

`shiftwidth` को फिर से 2 पर और पाठ के बीच के स्पेस को फिर से दो पर वापस लाएँ। इसके अलावा, दो अतिरिक्त पाठ जोड़ें:

```shell
One
  Two
  Two again
    Three
    Three again
```

फ़ोल्ड चलाएं (`zM`), आप देखेंगे:

```shell
One
+-- 4 lines: Two -----
```

मोड़ी हुई पंक्तियों को अनफोल्ड करें (`zR`), फिर "Three" पर कर्सर रखें और पाठ के फ़ोल्डिंग स्थिति को टॉगल करें (`za`):

```shell
One
  Two
  Two again
+-- 2 lines: Three -----
```

यह क्या है? एक फ़ोल्ड के भीतर एक फ़ोल्ड?

नेस्टेड फ़ोल्ड मान्य हैं। "Two" और "Two again" के पास फ़ोल्ड स्तर एक है। "Three" और "Three again" के पास फ़ोल्ड स्तर दो है। यदि आपके पास एक फ़ोल्डेबल पाठ है जिसमें एक फ़ोल्डेबल पाठ के भीतर एक उच्च फ़ोल्ड स्तर है, तो आपके पास कई फ़ोल्ड परतें होंगी।

## एक्सप्रेशन फ़ोल्ड

एक्सप्रेशन फ़ोल्ड आपको एक फ़ोल्ड के लिए मेल खाने के लिए एक एक्सप्रेशन परिभाषित करने की अनुमति देता है। जब आप फ़ोल्ड एक्सप्रेशंस को परिभाषित करते हैं, तो Vim प्रत्येक पंक्ति के लिए `'foldexpr'` के मान को स्कैन करता है। यह वह वेरिएबल है जिसे आपको उपयुक्त मान लौटाने के लिए कॉन्फ़िगर करना है। यदि `'foldexpr'` 0 लौटाता है, तो वह पंक्ति मोड़ी नहीं जाती। यदि यह 1 लौटाता है, तो उस पंक्ति का फ़ोल्ड स्तर 1 है। यदि यह 2 लौटाता है, तो उस पंक्ति का फ़ोल्ड स्तर 2 है। अन्य मान भी हैं, लेकिन मैं उनके बारे में नहीं जाऊँगा। यदि आप जिज्ञासु हैं, तो `:h fold-expr` देखें।

पहले, चलिए फ़ोल्डमethode बदलते हैं:

```shell
:set foldmethod=expr
```

मान लीजिए आपके पास नाश्ते के खाद्य पदार्थों की एक सूची है और आप "p" से शुरू होने वाले सभी नाश्ते के आइटम को मोड़ना चाहते हैं:

```shell
donut
pancake
pop-tarts
protein bar
salmon
scrambled eggs
```

इसके बाद, `foldexpr` को "p" से शुरू होने वाले एक्सप्रेशंस को कैप्चर करने के लिए बदलें:

```shell
:set foldexpr=getline(v:lnum)[0]==\\"p\\"
```

ऊपर दिया गया एक्सप्रेशन जटिल लग रहा है। चलिए इसे तोड़ते हैं:
- `:set foldexpr` `'foldexpr'` विकल्प को एक कस्टम एक्सप्रेशन स्वीकार करने के लिए सेट करता है।
- `getline()` एक Vimscript फ़ंक्शन है जो किसी भी दिए गए पंक्ति की सामग्री लौटाता है। यदि आप `:echo getline(5)` चलाते हैं, तो यह पंक्ति 5 की सामग्री लौटाएगा।
- `v:lnum` Vim का विशेष वेरिएबल है जो `'foldexpr'` एक्सप्रेशन के लिए है। Vim प्रत्येक पंक्ति को स्कैन करता है और उस क्षण में प्रत्येक पंक्ति के नंबर को `v:lnum` वेरिएबल में स्टोर करता है। पंक्ति 5 पर, `v:lnum` का मान 5 है। पंक्ति 10 पर, `v:lnum` का मान 10 है।
- `[0]` `getline(v:lnum)[0]` के संदर्भ में प्रत्येक पंक्ति का पहला अक्षर है। जब Vim एक पंक्ति को स्कैन करता है, `getline(v:lnum)` प्रत्येक पंक्ति की सामग्री लौटाता है। `getline(v:lnum)[0]` प्रत्येक पंक्ति का पहला अक्षर लौटाता है। हमारी सूची की पहली पंक्ति "donut" पर, `getline(v:lnum)[0]` "d" लौटाता है। हमारी सूची की दूसरी पंक्ति "pancake" पर, `getline(v:lnum)[0]` "p" लौटाता है।
- `==\\"p\\"` समानता एक्सप्रेशन का दूसरा भाग है। यह जांचता है कि क्या आपने जो एक्सप्रेशन मूल्यांकन किया है वह "p" के बराबर है। यदि यह सत्य है, तो यह 1 लौटाता है। यदि यह गलत है, तो यह 0 लौटाता है। Vim में, 1 सत्य है और 0 असत्य है। इसलिए उन पंक्तियों पर जो "p" से शुरू होती हैं, यह 1 लौटाता है। याद रखें यदि `'foldexpr'` का मान 1 है, तो इसका फ़ोल्ड स्तर 1 है।

इस एक्सप्रेशन को चलाने के बाद, आपको यह देखना चाहिए:

```shell
donut
+-- 3 lines: pancake -----
salmon
scrambled eggs
```

## सिंटैक्स फ़ोल्ड

सिंटैक्स फ़ोल्ड को सिंटैक्स भाषा हाइलाइटिंग द्वारा निर्धारित किया जाता है। यदि आप [vim-polyglot](https://github.com/sheerun/vim-polyglot) जैसे भाषा सिंटैक्स प्लगइन का उपयोग करते हैं, तो सिंटैक्स फ़ोल्ड बिना किसी समस्या के काम करेगा। बस फ़ोल्ड विधि को सिंटैक्स में बदलें:

```shell
:set foldmethod=syntax
```

मान लीजिए कि आप एक JavaScript फ़ाइल संपादित कर रहे हैं और आपके पास निम्नलिखित जैसा एक एरे है:

```shell
const nums = [
  one,
  two,
  three,
  four
]
```

यह एक सिंटैक्स फ़ोल्ड के साथ मोड़ा जाएगा। जब आप किसी विशेष भाषा के लिए सिंटैक्स हाइलाइटिंग परिभाषित करते हैं (आमतौर पर `syntax/` निर्देशिका के भीतर), तो आप इसे मोड़ने योग्य बनाने के लिए `fold` विशेषता जोड़ सकते हैं। नीचे vim-polyglot JavaScript सिंटैक्स फ़ाइल से एक स्निपेट है। अंत में `fold` कीवर्ड पर ध्यान दें।

```shell
syntax region  jsBracket                      matchgroup=jsBrackets            start=/\[/ end=/\]/ contains=@jsExpression,jsSpreadExpression extend fold
```

यह गाइड `syntax` सुविधा को कवर नहीं करेगा। यदि आप जिज्ञासु हैं, तो `:h syntax.txt` देखें।

## डिफ फ़ोल्ड

Vim दो या अधिक फ़ाइलों की तुलना करने के लिए एक डिफ़ प्रक्रिया कर सकता है।

यदि आपके पास `file1.txt` है:

```shell
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
```

और `file2.txt` है:

```shell
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
emacs is ok
```

`vimdiff file1.txt file2.txt` चलाएं:

```shell
+-- 3 lines: vim is awesome -----
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
vim is awesome
[vim is awesome] / [emacs is ok]
```

Vim स्वचालित रूप से कुछ समान पंक्तियों को मोड़ता है। जब आप `vimdiff` कमांड चला रहे होते हैं, तो Vim स्वचालित रूप से `foldmethod=diff` का उपयोग करता है। यदि आप `:set foldmethod?` चलाते हैं, तो यह `diff` लौटाएगा।

## मार्कर फ़ोल्ड

मार्कर फ़ोल्ड का उपयोग करने के लिए, चलाएं:

```shell
:set foldmethod=marker
```

मान लीजिए आपके पास पाठ है:

```shell
Hello

{{{
world
vim
}}}
```

`zM` चलाएं, आप देखेंगे:

```shell
hello

+-- 4 lines: -----
```

Vim `{{{` और `}}}` को फ़ोल्ड संकेतक के रूप में देखता है और उनके बीच के पाठ को मोड़ता है। मार्कर फ़ोल्ड के साथ, Vim फ़ोल्डिंग क्षेत्रों को चिह्नित करने के लिए `'foldmarker'` विकल्प द्वारा परिभाषित विशेष मार्करों की तलाश करता है। यह देखने के लिए कि Vim कौन से मार्कर का उपयोग करता है, चलाएं:

```shell
:set foldmarker?
```

डिफ़ॉल्ट रूप से, Vim संकेतकों के रूप में `{{{` और `}}}` का उपयोग करता है। यदि आप संकेतक को अन्य पाठों में बदलना चाहते हैं, जैसे "coffee1" और "coffee2":

```shell
:set foldmarker=coffee1,coffee2
```

यदि आपके पास पाठ है:

```shell
hello

coffee1
world
vim
coffee2
```

अब Vim नए फ़ोल्डिंग मार्करों के रूप में `coffee1` और `coffee2` का उपयोग करता है। एक तरफ, एक संकेतक एक शाब्दिक स्ट्रिंग होनी चाहिए और यह एक regex नहीं हो सकता है।

## फ़ोल्ड को बनाए रखना

आप Vim सत्र को बंद करने पर सभी फ़ोल्ड जानकारी खो देते हैं। यदि आपके पास यह फ़ाइल है, `count.txt`:

```shell
one
two
three
four
five
```

फिर "three" से नीचे मैनुअल फ़ोल्ड करें (`:3,$fold`):

```shell
one
two
+-- 3 lines: three ---
```

जब आप Vim से बाहर निकलते हैं और `count.txt` को फिर से खोलते हैं, तो फ़ोल्ड अब वहाँ नहीं होते!

फ़ोल्ड को बनाए रखने के लिए, फ़ोल्डिंग के बाद, चलाएं:

```shell
:mkview
```

फिर जब आप `count.txt` खोलते हैं, तो चलाएं:

```shell
:loadview
```

आपके फ़ोल्ड बहाल हो जाते हैं। हालाँकि, आपको मैन्युअल रूप से `mkview` और `loadview` चलाना होगा। मुझे पता है कि एक दिन, मैं फ़ाइल बंद करने से पहले `mkview` चलाना भूल जाऊँगा और मैं सभी फ़ोल्ड खो दूँगा। हम इस प्रक्रिया को स्वचालित कैसे कर सकते हैं?

जब आप एक `.txt` फ़ाइल बंद करते हैं, तो `mkview` को स्वचालित रूप से चलाने और जब आप एक `.txt` फ़ाइल खोलते हैं, तो `loadview` चलाने के लिए, अपने vimrc में यह जोड़ें:

```shell
autocmd BufWinLeave *.txt mkview
autocmd BufWinEnter *.txt silent loadview
```

याद रखें कि `autocmd` का उपयोग किसी घटना ट्रिगर पर एक कमांड निष्पादित करने के लिए किया जाता है। यहाँ दो घटनाएँ हैं:
- `BufWinLeave` जब आप एक विंडो से एक बफ़र को हटा देते हैं।
- `BufWinEnter` जब आप एक विंडो में एक बफ़र लोड करते हैं।

अब जब आप एक `.txt` फ़ाइल के अंदर फ़ोल्ड करते हैं और Vim से बाहर निकलते हैं, तो अगली बार जब आप उस फ़ाइल को खोलते हैं, तो आपकी फ़ोल्ड जानकारी बहाल हो जाएगी।

डिफ़ॉल्ट रूप से, Vim `mkview` चलाते समय फ़ोल्ड जानकारी को `~/.vim/view` में Unix प्रणाली के लिए सहेजता है। अधिक जानकारी के लिए, `:h 'viewdir'` देखें।
## स्मार्ट तरीके से फोल्ड सीखें

जब मैंने पहली बार Vim शुरू किया, तो मैंने फोल्ड सीखने की अनदेखी की क्योंकि मुझे नहीं लगा कि यह उपयोगी है। हालाँकि, जितना अधिक मैं कोड करता हूँ, उतना ही मुझे फोल्डिंग उपयोगी लगने लगी है। रणनीतिक रूप से रखे गए फोल्ड्स आपको टेक्स्ट संरचना का बेहतर अवलोकन दे सकते हैं, जैसे कि किसी पुस्तक की सामग्री की तालिका।

जब आप फोल्ड सीखें, तो मैनुअल फोल्ड से शुरू करें क्योंकि इसका उपयोग चलते-फिरते किया जा सकता है। फिर धीरे-धीरे इंडेंट और मार्कर फोल्ड करने के विभिन्न ट्रिक्स सीखें। अंततः, सिंटैक्स और एक्सप्रेशन फोल्ड कैसे करना है, यह सीखें। आप अंतिम दो का उपयोग अपने स्वयं के Vim प्लगइन्स लिखने के लिए भी कर सकते हैं।