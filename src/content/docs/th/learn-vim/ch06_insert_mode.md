---
description: เอกสารนี้สอนวิธีใช้โหมดการแทรกใน Vim เพื่อเพิ่มประสิทธิภาพการพิมพ์ พร้อมแนะนำวิธีเข้าสู่โหมดการแทรกต่างๆ
  ใน Vim
title: Ch06. Insert Mode
---

โหมดการแทรกเป็นโหมดเริ่มต้นของโปรแกรมแก้ไขข้อความหลายตัว ในโหมดนี้ สิ่งที่คุณพิมพ์คือสิ่งที่คุณได้รับ

อย่างไรก็ตาม นั่นไม่ได้หมายความว่าจะไม่มีอะไรให้เรียนรู้ โหมดการแทรกของ Vim มีฟีเจอร์ที่มีประโยชน์มากมาย ในบทนี้ คุณจะได้เรียนรู้วิธีการใช้ฟีเจอร์โหมดการแทรกเหล่านี้ใน Vim เพื่อปรับปรุงประสิทธิภาพการพิมพ์ของคุณ

## วิธีเข้าสู่โหมดการแทรก

มีหลายวิธีในการเข้าสู่โหมดการแทรกจากโหมดปกติ นี่คือบางส่วน:

```shell
i    แทรกข้อความก่อนเคอร์เซอร์
I    แทรกข้อความก่อนตัวอักษรที่ไม่ว่างตัวแรกของบรรทัด
a    เพิ่มข้อความหลังเคอร์เซอร์
A    เพิ่มข้อความที่ท้ายบรรทัด
o    เริ่มบรรทัดใหม่ด้านล่างเคอร์เซอร์และแทรกข้อความ
O    เริ่มบรรทัดใหม่ด้านบนเคอร์เซอร์และแทรกข้อความ
s    ลบตัวอักษรใต้เคอร์เซอร์และแทรกข้อความ
S    ลบบรรทัดปัจจุบันและแทรกข้อความ, คำพ้องความหมายสำหรับ "cc"
gi   แทรกข้อความในตำแหน่งเดียวกันที่โหมดการแทรกล่าสุดหยุด
gI   แทรกข้อความที่จุดเริ่มต้นของบรรทัด (คอลัมน์ 1)
```

สังเกตแพทเทิร์นตัวพิมพ์เล็ก / ตัวพิมพ์ใหญ่ สำหรับคำสั่งตัวพิมพ์เล็กแต่ละคำจะมีคำสั่งตัวพิมพ์ใหญ่ที่ตรงกัน หากคุณเป็นมือใหม่ ไม่ต้องกังวลหากคุณไม่จำทั้งรายการด้านบน เริ่มจาก `i` และ `o` ก็เพียงพอที่จะทำให้คุณเริ่มต้นได้ เรียนรู้เพิ่มเติมอย่างค่อยเป็นค่อยไป

## วิธีการออกจากโหมดการแทรก

มีวิธีต่าง ๆ ในการกลับไปยังโหมดปกติขณะอยู่ในโหมดการแทรก:

```shell
<Esc>     ออกจากโหมดการแทรกและไปยังโหมดปกติ
Ctrl-[    ออกจากโหมดการแทรกและไปยังโหมดปกติ
Ctrl-C    คล้ายกับ Ctrl-[ และ <Esc> แต่ไม่ตรวจสอบการย่อ
```

ฉันพบว่าปุ่ม `<Esc>` อยู่ไกลเกินไปที่จะเข้าถึง ดังนั้นฉันจึงแมพปุ่ม `<Caps-Lock>` ของคอมพิวเตอร์ให้ทำงานเหมือน `<Esc>` หากคุณค้นหาคีย์บอร์ด ADM-3A ของ Bill Joy (ผู้สร้าง Vi) คุณจะเห็นว่าปุ่ม `<Esc>` ไม่ได้อยู่ที่มุมซ้ายบนเหมือนคีย์บอร์ดสมัยใหม่ แต่จะอยู่ทางซ้ายของปุ่ม `q` นี่คือเหตุผลที่ฉันคิดว่าการแมพ `<Caps lock>` ไปยัง `<Esc>` เป็นความคิดที่ดี

อีกหนึ่งแนวทางที่พบบ่อยที่ฉันเห็นผู้ใช้ Vim ทำคือการแมพ `<Esc>` ไปยัง `jj` หรือ `jk` ในโหมดการแทรก หากคุณชอบตัวเลือกนี้ ให้เพิ่มบรรทัดใดบรรทัดหนึ่ง (หรือทั้งสองบรรทัด) ในไฟล์ vimrc ของคุณ

```shell
inoremap jj <Esc>
inoremap jk <Esc>
```

## การทำซ้ำโหมดการแทรก

คุณสามารถส่งพารามิเตอร์นับก่อนเข้าสู่โหมดการแทรก ตัวอย่างเช่น:

```shell
10i
```

หากคุณพิมพ์ "hello world!" และออกจากโหมดการแทรก Vim จะทำซ้ำข้อความ 10 ครั้ง นี่จะทำงานกับวิธีการโหมดการแทรกใด ๆ (เช่น: `10I`, `11a`, `12o`)

## การลบส่วนในโหมดการแทรก

เมื่อคุณทำผิดพลาดในการพิมพ์ อาจจะยุ่งยากในการพิมพ์ `<Backspace>` ซ้ำ ๆ อาจจะมีเหตุผลมากกว่าที่จะไปยังโหมดปกติและลบข้อผิดพลาดของคุณ คุณยังสามารถลบหลายตัวอักษรในครั้งเดียวขณะอยู่ในโหมดการแทรก

```shell
Ctrl-h    ลบหนึ่งตัวอักษร
Ctrl-w    ลบหนึ่งคำ
Ctrl-u    ลบทั้งบรรทัด
```

## แทรกจากรีจิสเตอร์

รีจิสเตอร์ของ Vim สามารถเก็บข้อความสำหรับการใช้งานในอนาคต เพื่อแทรกข้อความจากรีจิสเตอร์ที่ตั้งชื่อใด ๆ ขณะอยู่ในโหมดการแทรก ให้พิมพ์ `Ctrl-R` ตามด้วยสัญลักษณ์รีจิสเตอร์ มีสัญลักษณ์มากมายที่คุณสามารถใช้ แต่สำหรับส่วนนี้ เราจะพูดถึงเฉพาะรีจิสเตอร์ที่ตั้งชื่อ (a-z)

เพื่อดูการทำงาน ก่อนอื่นคุณต้องยกคำไปยังรีจิสเตอร์ a ย้ายเคอร์เซอร์ของคุณไปยังคำใด ๆ จากนั้นพิมพ์:

```shell
"ayiw
```

- `"a` บอก Vim ว่าการกระทำถัดไปของคุณจะไปยังรีจิสเตอร์ a
- `yiw` ยกคำภายใน ดูบทเกี่ยวกับไวยากรณ์ Vim เพื่อทบทวน

รีจิสเตอร์ a ตอนนี้มีคำที่คุณเพิ่งยกไป ขณะอยู่ในโหมดการแทรก เพื่อวางข้อความที่เก็บไว้ในรีจิสเตอร์ a:

```shell
Ctrl-R a
```

มีหลายประเภทของรีจิสเตอร์ใน Vim ฉันจะพูดถึงพวกเขาในรายละเอียดมากขึ้นในบทถัดไป

## การเลื่อน

คุณรู้หรือไม่ว่าคุณสามารถเลื่อนขณะอยู่ในโหมดการแทรก? ขณะอยู่ในโหมดการแทรก หากคุณไปที่ซับโหมด `Ctrl-X` คุณสามารถทำการดำเนินการเพิ่มเติม การเลื่อนเป็นหนึ่งในนั้น

```shell
Ctrl-X Ctrl-Y    เลื่อนขึ้น
Ctrl-X Ctrl-E    เลื่อนลง
```

## การเติมอัตโนมัติ

ตามที่กล่าวไว้ข้างต้น หากคุณกด `Ctrl-X` จากโหมดการแทรก Vim จะเข้าสู่ซับโหมด คุณสามารถทำการเติมอัตโนมัติของข้อความขณะอยู่ในซับโหมดการแทรกนี้ แม้ว่าจะไม่ดีเท่ากับ [intellisense](https://code.visualstudio.com/docs/editor/intellisense) หรือโปรโตคอลเซิร์ฟภาษาอื่น ๆ (LSP) แต่สำหรับสิ่งที่มีให้ใช้งานทันที มันเป็นฟีเจอร์ที่มีความสามารถมาก

นี่คือคำสั่งเติมอัตโนมัติที่มีประโยชน์เพื่อเริ่มต้น:

```shell
Ctrl-X Ctrl-L	   แทรกทั้งบรรทัด
Ctrl-X Ctrl-N	   แทรกข้อความจากไฟล์ปัจจุบัน
Ctrl-X Ctrl-I	   แทรกข้อความจากไฟล์ที่รวมอยู่
Ctrl-X Ctrl-F	   แทรกชื่อไฟล์
```

เมื่อคุณเรียกใช้การเติมอัตโนมัติ Vim จะแสดงหน้าต่างป๊อปอัพ เพื่อเลื่อนขึ้นและลงในหน้าต่างป๊อปอัพ ให้ใช้ `Ctrl-N` และ `Ctrl-P`

Vim ยังมีทางลัดการเติมอัตโนมัติสองตัวที่ไม่เกี่ยวข้องกับซับโหมด `Ctrl-X`:

```shell
Ctrl-N             ค้นหาคำถัดไปที่ตรงกัน
Ctrl-P             ค้นหาคำก่อนหน้าที่ตรงกัน
```

โดยทั่วไป Vim จะมองที่ข้อความในบัฟเฟอร์ทั้งหมดที่มีอยู่สำหรับแหล่งการเติมอัตโนมัติ หากคุณมีบัฟเฟอร์ที่เปิดอยู่ที่มีบรรทัดที่เขียนว่า "Chocolate donuts are the best":
- เมื่อคุณพิมพ์ "Choco" และทำ `Ctrl-X Ctrl-L` มันจะตรงกันและพิมพ์ทั้งบรรทัด
- เมื่อคุณพิมพ์ "Choco" และทำ `Ctrl-P` มันจะตรงกันและพิมพ์คำว่า "Chocolate"

การเติมอัตโนมัติเป็นหัวข้อที่กว้างใน Vim นี่เป็นเพียงส่วนเล็ก ๆ ของภูเขาน้ำแข็ง หากต้องการเรียนรู้เพิ่มเติม ให้ตรวจสอบ `:h ins-completion`

## การดำเนินการคำสั่งโหมดปกติ

คุณรู้หรือไม่ว่า Vim สามารถดำเนินการคำสั่งโหมดปกติขณะอยู่ในโหมดการแทรก?

ขณะอยู่ในโหมดการแทรก หากคุณกด `Ctrl-O` คุณจะอยู่ในซับโหมดการแทรก-ปกติ หากคุณดูที่ตัวบ่งชี้โหมดที่มุมล่างซ้าย โดยปกติคุณจะเห็น `-- INSERT --` แต่การกด `Ctrl-O` จะเปลี่ยนเป็น `-- (insert) --` ในโหมดนี้ คุณสามารถทำ *หนึ่ง* คำสั่งโหมดปกติ สิ่งที่คุณสามารถทำได้:

**การจัดกลางและการกระโดด**

```shell
Ctrl-O zz       จัดกลางหน้าต่าง
Ctrl-O H/M/L    กระโดดไปยังด้านบน/กลาง/ล่างของหน้าต่าง
Ctrl-O 'a       กระโดดไปยังมาร์ค a
```

**การทำซ้ำข้อความ**

```shell
Ctrl-O 100ihello    แทรก "hello" 100 ครั้ง
```

**การดำเนินการคำสั่งเทอร์มินัล**

```shell
Ctrl-O !! curl https://google.com    รัน curl
Ctrl-O !! pwd                        รัน pwd
```

**การลบอย่างรวดเร็ว**

```shell
Ctrl-O dtz    ลบจากตำแหน่งปัจจุบันไปยังตัวอักษร "z"
Ctrl-O D      ลบจากตำแหน่งปัจจุบันไปยังจุดสิ้นสุดของบรรทัด
```

## เรียนรู้โหมดการแทรกอย่างชาญฉลาด

หากคุณเหมือนกับฉันและมาจากโปรแกรมแก้ไขข้อความอื่น อาจจะมีความล่อลวงที่จะอยู่ในโหมดการแทรก อย่างไรก็ตาม การอยู่ในโหมดการแทรกเมื่อคุณไม่ได้พิมพ์ข้อความเป็นรูปแบบที่ไม่ดี พัฒนานิสัยในการกลับไปยังโหมดปกติเมื่อมือของคุณไม่ได้พิมพ์ข้อความใหม่

เมื่อคุณต้องการแทรกข้อความ ให้ถามตัวเองก่อนว่าข้อความนั้นมีอยู่แล้วหรือไม่ หากมี ให้ลองยกหรือย้ายข้อความนั้นแทนการพิมพ์ หากคุณต้องใช้โหมดการแทรก ให้ดูว่าคุณสามารถเติมอัตโนมัติข้อความนั้นได้เมื่อใดก็ตามที่เป็นไปได้ หลีกเลี่ยงการพิมพ์คำเดียวกันมากกว่าหนึ่งครั้งหากคุณสามารถทำได้