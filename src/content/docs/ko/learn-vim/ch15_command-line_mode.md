---
description: 이 문서는 Vim의 명령 모드에서 검색, 대체, 전역 및 외부 명령 사용법과 다양한 팁을 설명합니다.
title: Ch15. Command-line Mode
---

마지막 세 챕터에서, 당신은 검색 명령어(`/`, `?`), 치환 명령어(`:s`), 전역 명령어(`:g`), 그리고 외부 명령어(`!`)를 사용하는 방법을 배웠습니다. 이들은 명령어 모드 명령어의 예입니다.

이번 챕터에서는 명령어 모드에 대한 다양한 팁과 요령을 배울 것입니다.

## 명령어 모드 진입 및 종료

명령어 모드는 일반 모드, 삽입 모드, 시각 모드와 마찬가지로 하나의 모드입니다. 이 모드에 있을 때, 커서는 화면의 하단으로 이동하여 다양한 명령어를 입력할 수 있습니다.

명령어 모드에 진입하기 위해 사용할 수 있는 4가지 명령어가 있습니다:
- 검색 패턴(`/`, `?`)
- 명령어 명령어(`:`)
- 외부 명령어(`!`)

일반 모드 또는 시각 모드에서 명령어 모드로 진입할 수 있습니다.

명령어 모드를 종료하려면 `<Esc>`, `Ctrl-C`, 또는 `Ctrl-[`를 사용할 수 있습니다.

*다른 문헌에서는 "명령어 명령어"를 "Ex 명령어"로, "외부 명령어"를 "필터 명령어" 또는 "뱅 연산자"로 언급할 수 있습니다.*

## 이전 명령 반복하기

이전의 명령어 명령어 또는 외부 명령어를 `@:`로 반복할 수 있습니다.

예를 들어, `:s/foo/bar/g`를 실행한 후, `@:`를 실행하면 그 치환을 반복합니다. `:.!tr '[a-z]' '[A-Z]'`를 실행한 후, `@:`를 실행하면 마지막 외부 명령어 번역 필터를 반복합니다.

## 명령어 모드 단축키

명령어 모드에 있을 때, `Left` 또는 `Right` 화살표를 사용하여 한 번에 한 문자씩 왼쪽 또는 오른쪽으로 이동할 수 있습니다.

단어 단위로 이동해야 하는 경우, `Shift-Left` 또는 `Shift-Right`를 사용하세요 (일부 운영 체제에서는 `Shift` 대신 `Ctrl`을 사용해야 할 수 있습니다).

줄의 시작으로 가려면 `Ctrl-B`를 사용하고, 줄의 끝으로 가려면 `Ctrl-E`를 사용하세요.

삽입 모드와 유사하게, 명령어 모드 내에서 문자를 삭제하는 세 가지 방법이 있습니다:

```shell
Ctrl-H    한 문자 삭제
Ctrl-W    한 단어 삭제
Ctrl-U    전체 줄 삭제
```
마지막으로, 명령어를 일반 텍스트 파일처럼 편집하고 싶다면 `Ctrl-F`를 사용하세요.

이것은 또한 이전 명령어를 검색하고 편집한 후 `<Enter>`를 눌러 다시 실행할 수 있게 해줍니다.

## 레지스터 및 자동 완성

명령어 모드에 있을 때, 삽입 모드와 동일하게 `Ctrl-R`을 사용하여 Vim 레지스터에서 텍스트를 삽입할 수 있습니다. 레지스터 a에 "foo"라는 문자열이 저장되어 있다면, `Ctrl-R a`를 실행하여 삽입할 수 있습니다. 삽입 모드에서 레지스터에서 가져올 수 있는 모든 것을 명령어 모드에서도 동일하게 할 수 있습니다.

또한, 커서 아래의 단어를 `Ctrl-R Ctrl-W`로 가져올 수 있습니다 (`Ctrl-R Ctrl-A`는 커서 아래의 WORD에 해당). 커서 아래의 줄을 가져오려면 `Ctrl-R Ctrl-L`을 사용하고, 커서 아래의 파일 이름을 가져오려면 `Ctrl-R Ctrl-F`를 사용하세요.

기존 명령어를 자동 완성할 수도 있습니다. 명령어 모드에서 `echo` 명령어를 자동 완성하려면 "ec"를 입력한 후 `<Tab>`을 누르세요. 그러면 왼쪽 하단에 "ec"로 시작하는 Vim 명령어가 표시됩니다 (예: `echo echoerr echohl echomsg econ`). 다음 옵션으로 가려면 `<Tab>` 또는 `Ctrl-N`을 누르세요. 이전 옵션으로 가려면 `<Shift-Tab>` 또는 `Ctrl-P`를 누르세요.

일부 명령어는 인수로 파일 이름을 허용합니다. 예를 들어 `edit`가 있습니다. 여기에서도 자동 완성이 가능합니다. 명령어를 입력한 후 `:e ` (공백을 잊지 마세요)라고 입력하고 `<Tab>`을 누르세요. Vim은 선택할 수 있는 모든 관련 파일 이름을 나열하여 처음부터 입력할 필요가 없습니다.

## 히스토리 창 및 명령어 창

명령어 명령어와 검색어의 히스토리를 볼 수 있습니다 (이 기능은 `+cmdline_hist`가 필요합니다).

명령어 히스토리를 열려면 `:his :`를 실행하세요. 다음과 같은 내용을 볼 수 있습니다:

```shell
## Cmd history
2  e file1.txt
3  g/foo/d
4  s/foo/bar/g
```

Vim은 실행한 모든 `:` 명령어의 히스토리를 나열합니다. 기본적으로 Vim은 마지막 50개의 명령어를 저장합니다. Vim이 기억하는 항목 수를 100으로 변경하려면 `set history=100`을 실행하세요.

명령어 히스토리의 더 유용한 사용법은 명령어 창인 `q:`를 통해서입니다. 이것은 검색 가능하고 편집 가능한 히스토리 창을 엽니다. `q:`를 누를 때 히스토리에 다음과 같은 표현이 있다고 가정해 보세요:

```shell
51  s/verylongsubstitutionpattern/pancake/g
52  his :
53  wq
```

현재 작업이 `s/verylongsubstitutionpattern/donut/g`인 경우, 명령어를 처음부터 입력하는 대신 `s/verylongsubstitutionpattern/pancake/g`를 재사용하는 것이 어떨까요? 결국, 유일하게 다른 것은 단어 치환인 "donut"와 "pancake"입니다. 나머지는 모두 동일합니다.

`q:`를 실행한 후, 히스토리에서 `s/verylongsubstitutionpattern/pancake/g`를 찾아 직접 편집하세요! 히스토리 창에서 "pancake"를 "donut"로 변경한 후 `<Enter>`를 누르세요. 짜잔! Vim이 `s/verylongsubstitutionpattern/donut/g`를 실행합니다. 정말 편리하죠!

유사하게, 검색 히스토리를 보려면 `:his /` 또는 `:his ?`를 실행하세요. 과거 히스토리를 검색하고 편집할 수 있는 검색 히스토리 창을 열려면 `q/` 또는 `q?`를 실행하세요.

이 창을 종료하려면 `Ctrl-C`, `Ctrl-W C`, 또는 `:quit`을 입력하세요.

## 더 많은 명령어

Vim에는 수백 개의 내장 명령어가 있습니다. Vim이 가진 모든 명령어를 보려면 `:h ex-cmd-index` 또는 `:h :index`를 확인하세요.

## 스마트한 방법으로 명령어 모드 배우기

다른 세 가지 모드와 비교할 때, 명령어 모드는 텍스트 편집의 스위스 군용 칼과 같습니다. 텍스트를 편집하고, 파일을 수정하며, 명령어를 실행할 수 있습니다. 이번 챕터는 명령어 모드의 다양한 요소를 모은 것입니다. 이제 일반, 삽입, 시각 및 명령어 모드를 사용하는 방법을 알게 되었으니, Vim으로 텍스트를 그 어느 때보다 빠르게 편집할 수 있습니다.

이제 Vim 모드를 벗어나 Vim 태그로 더 빠른 탐색을 배우는 시간입니다.