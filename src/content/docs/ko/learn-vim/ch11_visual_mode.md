---
description: 이 문서는 Vim의 비주얼 모드를 사용하여 텍스트를 효율적으로 조작하는 방법과 세 가지 비주얼 모드에 대해 설명합니다.
title: Ch11. Visual Mode
---

텍스트의 일부를 강조하고 변경하는 것은 많은 텍스트 편집기와 워드 프로세서에서 일반적인 기능입니다. Vim은 시각 모드를 사용하여 이를 수행할 수 있습니다. 이 장에서는 시각 모드를 사용하여 텍스트를 효율적으로 조작하는 방법을 배웁니다.

## 세 가지 유형의 시각 모드

Vim에는 세 가지 다른 시각 모드가 있습니다. 그들은:

```shell
v         문자 단위 시각 모드
V         줄 단위 시각 모드
Ctrl-V    블록 단위 시각 모드
```

텍스트가 다음과 같다고 가정해 보겠습니다:

```shell
one
two
three
```

문자 단위 시각 모드는 개별 문자와 함께 작동합니다. 첫 번째 문자에서 `v`를 누릅니다. 그런 다음 `j`를 눌러 다음 줄로 이동합니다. 그러면 "one"부터 커서 위치까지의 모든 텍스트가 강조 표시됩니다. `gU`를 누르면 Vim은 강조된 문자를 대문자로 변환합니다.

줄 단위 시각 모드는 줄과 함께 작동합니다. `V`를 누르면 Vim이 커서가 있는 전체 줄을 선택합니다. 문자 단위 시각 모드와 마찬가지로 `gU`를 실행하면 Vim은 강조된 문자를 대문자로 변환합니다.

블록 단위 시각 모드는 행과 열과 함께 작동합니다. 다른 두 모드보다 더 많은 이동 자유를 제공합니다. `Ctrl-V`를 누르면 Vim이 문자 단위 시각 모드처럼 커서 아래의 문자를 강조 표시하지만, 다음 줄로 내려가기 전에 각 문자를 강조 표시하는 대신 최소한의 강조로 다음 줄로 이동합니다. `h/j/k/l`로 이동해 보세요. 커서가 이동하는 것을 확인할 수 있습니다.

Vim 창의 왼쪽 하단에는 현재 어떤 시각 모드에 있는지를 나타내기 위해 `-- VISUAL --`, `-- VISUAL LINE --`, 또는 `-- VISUAL BLOCK --`이 표시됩니다.

시각 모드에 있는 동안 `v`, `V`, 또는 `Ctrl-V`를 눌러 다른 시각 모드로 전환할 수 있습니다. 예를 들어, 줄 단위 시각 모드에 있고 블록 단위 시각 모드로 전환하고 싶다면 `Ctrl-V`를 실행하세요. 시도해 보세요!

시각 모드를 종료하는 방법은 세 가지가 있습니다: `<Esc>`, `Ctrl-C`, 그리고 현재 시각 모드와 동일한 키. 후자의 의미는 현재 줄 단위 시각 모드(`V`)에 있는 경우 `V`를 다시 눌러 종료할 수 있다는 것입니다. 문자 단위 시각 모드에 있는 경우 `v`를 눌러 종료할 수 있습니다.

사실 시각 모드에 들어가는 또 다른 방법이 있습니다:

```shell
gv    이전 시각 모드로 이동
```

이전과 동일한 강조 텍스트 블록에서 같은 시각 모드를 시작합니다.

## 시각 모드 탐색

시각 모드에 있는 동안 Vim 동작을 사용하여 강조된 텍스트 블록을 확장할 수 있습니다.

이전에 사용한 텍스트를 사용해 보겠습니다:

```shell
one
two
three
```

이번에는 "two" 줄에서 시작해 보겠습니다. `v`를 눌러 문자 단위 시각 모드로 이동합니다(여기서 대괄호 `[]`는 문자 강조를 나타냅니다):

```shell
one
[t]wo
three
```

`j`를 누르면 Vim이 "two" 줄에서 "three" 줄의 첫 번째 문자까지 모든 텍스트를 강조합니다.

```shell
one
[two
t]hree
```

이 위치에서 "one" 줄도 추가하고 싶다고 가정해 보겠습니다. `k`를 누르면 강조가 "three" 줄에서 멀어지는 것을 보게 될 것입니다.

```shell
one
[t]wo
three
```

원하는 방향으로 자유롭게 시각 선택을 확장할 수 있는 방법이 있을까요? 확실히 있습니다. "two"와 "three" 줄이 강조된 상태로 조금 뒤로 돌아가 보겠습니다.

```shell
one
[two
t]hree    <-- 커서
```

시각 강조는 커서 이동을 따릅니다. "one" 줄로 위로 확장하고 싶다면 커서를 "two" 줄로 올려야 합니다. 현재 커서는 "three" 줄에 있습니다. `o` 또는 `O`를 사용하여 커서 위치를 전환할 수 있습니다.

```shell
one
[two     <-- 커서
t]hree
```

이제 `k`를 누르면 선택이 줄어들지 않고 위로 확장됩니다.

```shell
[one
two
t]hree
```

시각 모드에서 `o` 또는 `O`를 사용하면 커서가 강조 블록의 시작에서 끝으로 점프하여 강조 영역을 확장할 수 있습니다.

## 시각 모드 문법

시각 모드는 일반 모드와 많은 작업을 공유합니다.

예를 들어, 다음 텍스트가 있고 시각 모드에서 처음 두 줄을 삭제하고 싶다면:

```shell
one
two
three
```

줄 단위 시각 모드(`V`)로 "one"과 "two" 줄을 강조합니다:

```shell
[one
two]
three
```

`d`를 누르면 선택한 부분이 삭제됩니다. 일반 모드의 문법 규칙인 동사 + 명사는 적용되지 않습니다. 동일한 동사(`d`)는 여전히 존재하지만, 시각 모드에는 명사가 없습니다. 시각 모드의 문법 규칙은 명사 + 동사이며, 여기서 명사는 강조된 텍스트입니다. 텍스트 블록을 먼저 선택한 다음 명령이 뒤따릅니다.

일반 모드에서는 커서 아래의 단일 문자를 삭제하는 `x`와 커서 아래의 문자를 교체하는 `r`과 같이 동작이 필요 없는 몇 가지 명령이 있습니다(`rx`는 커서 아래의 문자를 "x"로 교체합니다). 시각 모드에서는 이러한 명령이 이제 단일 문자가 아닌 강조된 전체 텍스트에 적용됩니다. 강조된 텍스트로 돌아가서:

```shell
[one
two]
three
```

`x`를 실행하면 모든 강조된 텍스트가 삭제됩니다.

이 동작을 사용하여 마크다운 텍스트에서 빠르게 헤더를 생성할 수 있습니다. 다음 텍스트를 1급 마크다운 헤더("===")로 빠르게 변환해야 한다고 가정해 보겠습니다:

```shell
Chapter One
```

먼저 `yy`로 텍스트를 복사한 다음 `p`로 붙여넣습니다:

```shell
Chapter One
Chapter One
```

이제 두 번째 줄로 이동하여 줄 단위 시각 모드로 선택합니다:

```shell
Chapter One
[Chapter One]
```

1급 헤더는 텍스트 아래에 "="가 연속으로 있는 것입니다. `r=`를 실행하면, 짜잔! 수동으로 "="를 입력할 필요가 없습니다.

```shell
Chapter One
===========
```

시각 모드에서 연산자에 대해 더 알고 싶다면 `:h visual-operators`를 확인하세요.

## 시각 모드와 명령줄 명령

강조된 텍스트 블록에 선택적으로 명령줄 명령을 적용할 수 있습니다. 다음 문장이 있고 첫 두 줄에서 "const"를 "let"으로 대체하고 싶다면:

```shell
const one = "one";
const two = "two";
const three = "three";
```

*어떤* 시각 모드로 첫 두 줄을 강조하고 `:s/const/let/g` 명령을 실행합니다:

```shell
let one = "one";
let two = "two";
const three = "three";
```

*어떤* 시각 모드로 이 작업을 수행할 수 있다고 언급했습니다. 해당 줄에서 명령을 실행하기 위해 전체 줄을 강조할 필요는 없습니다. 각 줄에서 최소한 하나의 문자를 선택하기만 하면 명령이 적용됩니다.

## 여러 줄에 텍스트 추가

블록 단위 시각 모드를 사용하여 Vim에서 여러 줄에 텍스트를 추가할 수 있습니다. 각 줄 끝에 세미콜론을 추가해야 하는 경우:

```shell
const one = "one"
const two = "two"
const three = "three"
```

커서가 첫 번째 줄에 있을 때:
- 블록 단위 시각 모드를 실행하고 두 줄 아래로 이동합니다(`Ctrl-V jj`).
- 줄 끝까지 강조합니다(`$`).
- 추가(`A`)한 다음 ";"를 입력합니다.
- 시각 모드를 종료합니다(`<Esc>`).

이제 각 줄에 ";"가 추가된 것을 볼 수 있습니다. 꽤 멋지죠! 블록 단위 시각 모드에서 삽입 모드로 들어가는 방법은 두 가지가 있습니다: 커서 뒤에 텍스트를 입력하기 위해 `A`를 사용하거나 커서 앞에 텍스트를 입력하기 위해 `I`를 사용합니다. 일반 모드의 `A`(줄 끝에 텍스트 추가) 및 `I`(첫 번째 비어 있지 않은 줄 앞에 텍스트 삽입)와 혼동하지 마세요.

또한 `:normal` 명령을 사용하여 여러 줄에 텍스트를 추가할 수도 있습니다:
- 모든 3줄을 강조합니다(`vjj`).
- `:normal! A;`를 입력합니다.

`:normal` 명령은 일반 모드 명령을 실행합니다. `A;`를 실행하여 줄 끝에 ";"를 추가하도록 지시할 수 있습니다.

## 숫자 증가

Vim에는 숫자를 감소 및 증가시키는 `Ctrl-X` 및 `Ctrl-A` 명령이 있습니다. 시각 모드와 함께 사용하면 여러 줄에 걸쳐 숫자를 증가시킬 수 있습니다.

다음 HTML 요소가 있다고 가정해 보겠습니다:

```shell
<div id="app-1"></div>
<div id="app-1"></div>
<div id="app-1"></div>
<div id="app-1"></div>
<div id="app-1"></div>
```

여러 개의 id가 동일한 이름을 가지는 것은 좋지 않은 관행이므로, 이를 고유하게 만들기 위해 증가시켜 보겠습니다:
- 두 번째 줄의 "1"로 커서를 이동합니다.
- 블록 단위 시각 모드를 시작하고 3줄 아래로 이동합니다(`Ctrl-V 3j`). 이제 나머지 "1"이 강조됩니다. 이제 모든 "1"이 강조되어야 합니다(첫 번째 줄 제외).
- `g Ctrl-A`를 실행합니다.

다음과 같은 결과를 보게 될 것입니다:

```shell
<div id="app-1"></div>
<div id="app-2"></div>
<div id="app-3"></div>
<div id="app-4"></div>
<div id="app-5"></div>
```

`g Ctrl-A`는 여러 줄의 숫자를 증가시킵니다. `Ctrl-X/Ctrl-A`는 숫자 형식 옵션과 함께 문자도 증가시킬 수 있습니다:

```shell
set nrformats+=alpha
```

`nrformats` 옵션은 Vim에 `Ctrl-A` 및 `Ctrl-X`로 증가 및 감소할 "숫자"로 간주되는 기준을 지시합니다. `alpha`를 추가하면 알파벳 문자가 이제 숫자로 간주됩니다. 다음 HTML 요소가 있다고 가정해 보겠습니다:

```shell
<div id="app-a"></div>
<div id="app-a"></div>
<div id="app-a"></div>
<div id="app-a"></div>
<div id="app-a"></div>
```

두 번째 "app-a"에 커서를 놓고 위와 같은 기술(`Ctrl-V 3j` 후 `g Ctrl-A`)을 사용하여 id를 증가시킵니다.

```shell
<div id="app-a"></div>
<div id="app-b"></div>
<div id="app-c"></div>
<div id="app-d"></div>
<div id="app-e"></div>
```

## 마지막 시각 모드 영역 선택

이 장의 앞부분에서 `gv`가 마지막 시각 모드 강조를 빠르게 강조할 수 있다고 언급했습니다. 또한 마지막 시각 모드의 시작과 끝 위치로 이동할 수 있는 두 개의 특별한 마크가 있습니다:

```shell
`<    이전 시각 모드 강조의 첫 번째 위치로 이동
`>    이전 시각 모드 강조의 마지막 위치로 이동
```

이전에 강조된 텍스트에서 명령줄 명령을 선택적으로 실행할 수 있다고 언급했습니다. `:s/const/let/g`와 같은 명령을 실행할 때 다음과 같은 내용을 보게 될 것입니다:

```shell
:`<,`>s/const/let/g
```

실제로는 *범위* `s/const/let/g` 명령을 실행하고 있었습니다(두 개의 마크가 주소로 사용됨). 흥미롭죠!

이 마크는 언제든지 수정할 수 있습니다. 강조된 텍스트의 시작부터 파일의 끝까지 대체해야 하는 경우, 명령을 다음과 같이 변경하면 됩니다:

```shell
:`<,$s/const/let/g
```

## 삽입 모드에서 시각 모드로 들어가기

삽입 모드에서 시각 모드로 들어갈 수도 있습니다. 삽입 모드에 있을 때 문자 단위 시각 모드로 가려면:

```shell
Ctrl-O v
```

삽입 모드에서 `Ctrl-O`를 실행하면 일반 모드 명령을 실행할 수 있습니다. 이 일반 모드 명령 대기 모드에서 `v`를 실행하여 문자 단위 시각 모드로 들어갑니다. 화면 왼쪽 하단에 `--(insert) VISUAL--`라고 표시되는 것을 확인하세요. 이 트릭은 모든 시각 모드 연산자(`v`, `V`, `Ctrl-V`)에 적용됩니다.

## 선택 모드

Vim에는 시각 모드와 유사한 선택 모드가 있습니다. 시각 모드와 마찬가지로 세 가지 다른 모드가 있습니다:

```shell
gh         문자 단위 선택 모드
gH         줄 단위 선택 모드
gCtrl-h    블록 단위 선택 모드
```

선택 모드는 일반 편집기의 텍스트 강조 동작을 Vim의 시각 모드보다 더 가깝게 에뮬레이트합니다.

일반 편집기에서 텍스트 블록을 강조하고 문자를 입력하면, 예를 들어 "y"라는 문자를 입력하면 강조된 텍스트가 삭제되고 "y"가 삽입됩니다. 줄 단위 선택 모드(`gH`)로 줄을 강조하고 "y"를 입력하면 강조된 텍스트가 삭제되고 "y"가 삽입됩니다.

이 선택 모드를 시각 모드와 대조해 보세요: 줄 단위 시각 모드(`V`)로 텍스트 줄을 강조하고 "y"를 입력하면 강조된 텍스트가 삭제되어 문자 "y"로 대체되지 않고, 복사됩니다. 선택 모드에서 강조된 텍스트에 대해 일반 모드 명령을 실행할 수 없습니다.

저는 개인적으로 선택 모드를 사용하지 않았지만, 존재한다는 것을 아는 것은 좋습니다.

## 시각 모드를 스마트하게 배우기

시각 모드는 Vim의 텍스트 강조 절차를 나타냅니다.

시각 모드 작업을 일반 모드 작업보다 훨씬 더 자주 사용하게 된다면, 주의해야 합니다. 이는 안티 패턴입니다. 시각 모드 작업을 실행하는 데 더 많은 키 입력이 필요합니다. 예를 들어, 내부 단어를 삭제해야 할 경우, 왜 네 번의 키 입력(`viwd` - 내부 단어를 시각적으로 강조한 다음 삭제)으로 수행해야 합니까? 세 번의 키 입력(`diw`)으로도 수행할 수 있습니다. 후자는 더 직접적이고 간결합니다. 물론 시각 모드가 적절한 경우도 있지만, 일반적으로는 더 직접적인 접근 방식을 선호해야 합니다.