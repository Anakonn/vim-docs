---
description: 이 문서는 Vim 명령어의 구조를 이해하고, 문법 규칙을 배우며, 실습을 통해 Vim 언어를 구사하는 방법을 설명합니다.
title: Ch04. Vim Grammar
---

Vim 명령어의 복잡성에 어려움을 느낄수 있습니다. 누군가 `gUfV` 또는 `1GdG`를 사용하는 Vim 사용자를 보면, 이러한 명령어가 무엇을 하는지 즉시 알지 못할 수 있습니다. 이 장에서는 Vim 명령어의 일반적인 구조를 간단한 문법 규칙으로 나누겠습니다.

이 장은 전체 가이드에서 가장 중요한 장입니다. 기본적인 문법 구조를 이해하면 Vim과 "대화"할 수 있게 됩니다. 참고로, 이 장에서 *Vim 언어*라고 할 때, Vimscript 언어(즉, Vim의 내장 프로그래밍 언어)에 대해 이야기하는 것은 아닙니다. 이는 후속 장에서 배우게 될 것입니다.

## 언어 배우는 방법

저는 원어민 영어 사용자가 아닙니다. 13세에 미국으로 이주하면서 영어를 배웠습니다. 새로운 언어를 배우기 위해 해야 할 세 가지가 있습니다:

1. 문법 규칙 배우기.
2. 어휘 늘리기.
3. 연습, 연습, 연습.

마찬가지로, Vim 언어를 구사하려면 문법 규칙을 배우고, 어휘를 늘리고, 명령어를 생각하지 않고 실행할 수 있을 때까지 연습해야 합니다.

## 문법 규칙

Vim 언어에는 단 하나의 문법 규칙이 있습니다:

```shell
동사 + 명사
```

그게 전부입니다!

이는 다음과 같은 영어 구문을 말하는 것과 같습니다:

- *"도넛을 (동사) 먹다 (명사)"*
- *"공을 (동사) 차다 (명사)"*
- *"Vim 편집기를 (동사) 배우다 (명사)"*

이제 기본 Vim 동사와 명사로 어휘를 쌓아야 합니다.

## 명사 (동작)

명사는 Vim 동작입니다. 동작은 Vim에서 이동하는 데 사용됩니다. 아래는 일부 Vim 동작의 목록입니다:

```shell
h    왼쪽
j    아래
k    위
l    오른쪽
w    다음 단어의 시작으로 앞으로 이동
}    다음 문단으로 점프
$    줄의 끝으로 이동
```

다음 장에서 동작에 대해 더 배우게 될 것이므로, 이해하지 못하는 부분이 있어도 너무 걱정하지 마세요.

## 동사 (연산자)

`:h operator`에 따르면, Vim에는 16개의 연산자가 있습니다. 그러나 제 경험상, 이 3개의 연산자를 배우는 것으로 제 편집 필요의 80%를 충족할 수 있습니다:

```shell
y    텍스트 복사 (yank)
d    텍스트 삭제 및 레지스터에 저장
c    텍스트 삭제, 레지스터에 저장 및 삽입 모드 시작
```

참고로, 텍스트를 yank한 후에는 `p` (커서 뒤에) 또는 `P` (커서 앞에)로 붙여넣을 수 있습니다.

## 동사와 명사

이제 기본 명사와 동사를 알았으니, 문법 규칙인 동사 + 명사를 적용해 보겠습니다! 다음 표현이 있다고 가정해 보겠습니다:

```javascript
const learn = "vim";
```

- 현재 위치에서 줄의 끝까지 모든 것을 yank하려면: `y$`.
- 현재 위치에서 다음 단어의 시작까지 삭제하려면: `dw`.
- 현재 위치에서 현재 문단의 끝까지 변경하려면: `c}`.

동작은 카운트 숫자를 인수로 받아들입니다 (다음 장에서 이 부분을 논의할 것입니다). 3줄 위로 가야 할 경우, `k`를 3번 누르는 대신 `3k`를 사용할 수 있습니다. 카운트는 Vim 문법과 함께 작동합니다.
- 왼쪽으로 두 문자를 yank하려면: `y2h`.
- 다음 두 단어를 삭제하려면: `d2w`.
- 다음 두 줄을 변경하려면: `c2j`.

지금은 간단한 명령어를 실행하기 위해 오랜 시간 생각해야 할 수도 있습니다. 당신만 그런 것이 아닙니다. 제가 처음 시작했을 때 비슷한 어려움을 겪었지만 시간이 지나면서 더 빨라졌습니다. 당신도 그럴 것입니다. 반복, 반복, 반복.

부가적으로, 줄 단위 작업(전체 줄에 영향을 미치는 작업)은 텍스트 편집에서 일반적인 작업입니다. 일반적으로 연산자 명령어를 두 번 입력하면 Vim은 해당 작업에 대해 줄 단위 작업을 수행합니다. 예를 들어, `dd`, `yy`, `cc`는 전체 줄에 대해 **삭제**, **yank**, **변경**을 수행합니다. 다른 연산자와 함께 시도해 보세요!

정말 멋집니다. 여기에서 패턴을 보고 있습니다. 하지만 아직 끝나지 않았습니다. Vim에는 또 다른 유형의 명사인 텍스트 객체가 있습니다.

## 더 많은 명사 (텍스트 객체)

예를 들어, `(hello Vim)`이라는 괄호 쌍 안에 있을 때 괄호 안의 전체 구문을 삭제해야 한다고 가정해 보겠습니다. 어떻게 빠르게 할 수 있을까요? 내부에 있는 "그룹"을 삭제하는 방법이 있을까요?

답은 예입니다. 텍스트는 종종 구조화되어 있습니다. 괄호, 따옴표, 대괄호, 중괄호 등을 포함하는 경우가 많습니다. Vim은 텍스트 객체를 사용하여 이 구조를 캡처하는 방법을 제공합니다.

텍스트 객체는 연산자와 함께 사용됩니다. 텍스트 객체에는 두 가지 유형이 있습니다: 내부 및 외부 텍스트 객체.

```shell
i + object    내부 텍스트 객체
a + object    외부 텍스트 객체
```

내부 텍스트 객체는 공백이나 주변 객체 없이 객체를 선택합니다. 외부 텍스트 객체는 공백이나 주변 객체를 포함하여 객체를 선택합니다. 일반적으로 외부 텍스트 객체는 항상 내부 텍스트 객체보다 더 많은 텍스트를 선택합니다. 커서가 `(hello Vim)` 표현의 괄호 안에 있을 때:
- 괄호를 삭제하지 않고 괄호 안의 텍스트를 삭제하려면: `di(`.
- 괄호와 그 안의 텍스트를 삭제하려면: `da(`.

다른 예를 살펴보겠습니다. 다음과 같은 Javascript 함수가 있고 커서가 "H"에 있을 때:

```javascript
const hello = function() {
  console.log("Hello Vim");
  return true;
}
```

- "Hello Vim" 전체를 삭제하려면: `di(`.
- 함수의 내용( `{}`로 둘러싸인)을 삭제하려면: `di{`.
- "Hello" 문자열을 삭제하려면: `diw`.

텍스트 객체는 한 위치에서 다양한 객체를 타겟팅할 수 있기 때문에 강력합니다. 괄호 안의 객체, 함수 블록 또는 현재 단어를 삭제할 수 있습니다. 기억하기 쉽게, `di(`, `di{`, `diw`를 보면 각각 어떤 텍스트 객체를 나타내는지 잘 알 수 있습니다: 괄호 쌍, 중괄호 쌍, 그리고 단어입니다.

마지막 예를 살펴보겠습니다. 다음과 같은 HTML 태그가 있다고 가정해 보겠습니다:

```html
<div>
  <h1>Header1</h1>
  <p>Paragraph1</p>
  <p>Paragraph2</p>
</div>
```

커서가 "Header1" 텍스트에 있을 때:
- "Header1"을 삭제하려면: `dit`.
- `<h1>Header1</h1>`을 삭제하려면: `dat`.

커서가 "div"에 있을 때:
- `h1`과 두 개의 `p` 줄을 삭제하려면: `dit`.
- 모든 것을 삭제하려면: `dat`.
- "div"를 삭제하려면: `di<`.

아래는 일반적인 텍스트 객체의 목록입니다:

```shell
w         단어
p         문단
s         문장
( 또는 )  괄호 쌍
{ 또는 }  중괄호 쌍
[ 또는 ]  대괄호 쌍
< 또는 >  꺽쇠 쌍
t         XML 태그
"         따옴표 쌍
'         작은따옴표 쌍
`         백틱 쌍
```

자세한 내용은 `:h text-objects`를 확인하세요.

## 조합성과 문법

Vim 문법은 Vim의 조합 가능성 기능의 하위 집합입니다. Vim에서 조합 가능성에 대해 논의하고, 이것이 텍스트 편집기에서 왜 훌륭한 기능인지 알아보겠습니다.

조합 가능성은 더 복잡한 명령을 수행하기 위해 결합(조합)할 수 있는 일반 명령 세트를 갖는 것을 의미합니다. 프로그래밍에서 더 간단한 추상화로부터 더 복잡한 추상화를 생성할 수 있는 것처럼, Vim에서도 더 간단한 명령으로부터 복잡한 명령을 실행할 수 있습니다. Vim 문법은 Vim의 조합 가능한 특성의 표현입니다.

Vim의 조합 가능성의 진정한 힘은 외부 프로그램과 통합될 때 빛을 발합니다. Vim에는 텍스트에 대한 필터로 외부 프로그램을 사용할 수 있는 필터 연산자(`!`)가 있습니다. 다음과 같은 지저분한 텍스트가 있다고 가정하고, 이를 표 형식으로 정리하고 싶습니다:

```shell
Id|Name|Cuteness
01|Puppy|Very
02|Kitten|Ok
03|Bunny|Ok
```

이는 Vim 명령어로 쉽게 할 수 없지만, `column` 터미널 명령어를 사용하여 빠르게 처리할 수 있습니다(터미널에 `column` 명령어가 있다고 가정). 커서가 "Id"에 있을 때, `!}column -t -s "|"`를 실행하세요. Voilà! 이제 단 한 번의 빠른 명령어로 예쁜 표 형식의 데이터를 얻었습니다.

```shell
Id  Name    Cuteness
01  Puppy   Very
02  Kitten  Ok
03  Bunny   Ok
```

명령어를 분해해 보겠습니다. 동사는 `!` (필터 연산자)였고 명사는 `}` (다음 문단으로 이동)였습니다. 필터 연산자 `!`는 또 다른 인수, 즉 터미널 명령어를 받아들였으므로 `column -t -s "|"`를 제공했습니다. `column`이 어떻게 작동하는지는 설명하지 않겠지만, 실제로는 텍스트를 표 형식으로 정리했습니다.

이제 텍스트를 표 형식으로 정리할 뿐만 아니라 "Ok"가 있는 행만 표시하고 싶다고 가정해 보겠습니다. `awk`가 이 작업을 쉽게 수행할 수 있다는 것을 알고 있습니다. 대신 이렇게 할 수 있습니다:

```shell
!}column -t -s "|" | awk 'NR > 1 && /Ok/ {print $0}'
```

결과:

```shell
02  Kitten  Ok
03  Bunny   Ok
```

좋습니다! 외부 명령어 연산자는 파이프(`|`)도 사용할 수 있습니다.

이것이 Vim의 조합 가능성의 힘입니다. 연산자, 동작 및 터미널 명령어를 많이 알수록 복잡한 작업을 조합할 수 있는 능력이 *배가* 됩니다.

예를 들어, `w, $, }, G`의 네 가지 동작만 알고 있고 하나의 연산자 `d`만 알고 있다고 가정해 보겠습니다. 8개의 작업을 수행할 수 있습니다: *이동* 4가지 방법(`w, $, }, G`)과 *삭제* 4가지 대상(`dw, d$, d}, dG`). 그러던 중 대문자(`gU`) 연산자에 대해 배우게 되면, Vim 도구 벨트에 단 하나의 새로운 능력이 추가된 것이 아니라 *네 가지*가 추가됩니다: `gUw, gU$, gU}, gUG`. 이렇게 하면 Vim 도구 벨트에 12개의 도구가 생깁니다. 새로운 지식은 현재 능력에 대한 배수입니다. 10개의 동작과 5개의 연산자를 알고 있다면, 60개의 작업(50개의 작업 + 10개의 동작)을 보유하게 됩니다. Vim에는 줄 번호 동작(`nG`)이 있어 `n`개의 동작을 제공하며, 여기서 `n`은 파일에 있는 줄 수입니다(5번 줄로 가려면 `5G`를 실행). 검색 동작(`/`)은 사실상 무한한 수의 동작을 제공합니다. 외부 명령어 연산자(`!`)는 알고 있는 터미널 명령어 수만큼 필터링 도구를 제공합니다. Vim과 같은 조합 가능한 도구를 사용하면, 아는 모든 것을 연결하여 점점 더 복잡한 작업을 수행할 수 있습니다. 아는 것이 많을수록 더 강력해집니다.

이러한 조합 가능성은 Unix 철학을 반영합니다: *한 가지를 잘 하라*. 연산자는 한 가지 작업을 수행합니다: Y를 수행합니다. 동작은 한 가지 작업을 수행합니다: X로 이동합니다. 연산자와 동작을 결합하면 예측 가능하게 YX를 얻습니다: X에서 Y를 수행합니다.

동작과 연산자는 확장 가능합니다. 사용자 정의 동작과 연산자를 만들어 Vim 도구 벨트에 추가할 수 있습니다. [`vim-textobj-user`](https://github.com/kana/vim-textobj-user) 플러그인은 자신만의 텍스트 객체를 만들 수 있게 해줍니다. 또한 사용자 제작의 사용자 정의 텍스트 객체 목록도 포함되어 있습니다 [여기](https://github.com/kana/vim-textobj-user/wiki).

## 스마트하게 Vim 문법 배우기

이제 Vim 문법 규칙인 `동사 + 명사`에 대해 배웠습니다. 제가 가장 큰 Vim "AHA!" 순간 중 하나는 대문자(`gU`) 연산자에 대해 배우고 현재 단어를 대문자로 만들고자 할 때, *본능적으로* `gUiw`를 실행했을 때였습니다. 단어가 대문자로 변환되었습니다. 그 순간, 저는 드디어 Vim을 이해하기 시작했습니다. 여러분도 곧 자신의 "AHA!" 순간을 경험하시길 바랍니다, 이미 경험하셨다면 더욱 좋습니다.

이 장의 목표는 Vim에서 `동사 + 명사` 패턴을 보여주는 것입니다. 그렇게 하면 Vim을 새로운 언어를 배우는 것처럼 접근할 수 있으며, 모든 명령어 조합을 암기하는 것이 아닙니다.

패턴을 배우고 그 의미를 이해하세요. 그것이 스마트하게 배우는 방법입니다.