---
description: 'هذا الفصل يشرح كيفية استخدام Vim مع المفاهيم الثلاثة: المخازن، النوافذ،
  والصفحات، بالإضافة إلى إعداد vimrc لتسهيل التنقل بين المخازن.'
title: Ch02. Buffers, Windows, and Tabs
---

إذا كنت قد استخدمت محرر نصوص حديث من قبل، فمن المحتمل أنك على دراية بالنوافذ والألسنة. يستخدم Vim ثلاث تجريدات عرض بدلاً من اثنتين: المخازن، النوافذ، والألسنة. في هذا الفصل، سأشرح ما هي المخازن، النوافذ، والألسنة وكيف تعمل في Vim.

قبل أن تبدأ، تأكد من أنك قد قمت بتفعيل خيار `set hidden` في vimrc. بدون ذلك، كلما قمت بالتبديل بين المخازن وكان المخزن الحالي غير محفوظ، سيطلب منك Vim حفظ الملف (لا تريد ذلك إذا كنت ترغب في الانتقال بسرعة). لم أتناول vimrc بعد. إذا لم يكن لديك vimrc، قم بإنشاء واحد. عادة ما يتم وضعه في دليل المنزل الخاص بك ويسمى `.vimrc`. لدي ملفي في `~/.vimrc`. لرؤية المكان الذي يجب عليك إنشاء vimrc فيه، تحقق من `:h vimrc`. داخلها، أضف:

```shell
set hidden
```

احفظه، ثم قم بتفعيله (قم بتشغيل `:source %` من داخل vimrc).

## المخازن

ما هي *المخزن*؟

المخزن هو مساحة في الذاكرة حيث يمكنك كتابة وتحرير بعض النصوص. عندما تفتح ملفًا في Vim، يتم ربط البيانات بمخزن. عندما تفتح 3 ملفات في Vim، لديك 3 مخازن.

لديك ملفان فارغان، `file1.js` و `file2.js` متاحان (إذا أمكن، قم بإنشائهما باستخدام Vim). قم بتشغيل هذا في الطرفية:

```bash
vim file1.js
```

ما تراه هو *مخزن* `file1.js`. كلما فتحت ملفًا جديدًا، يقوم Vim بإنشاء مخزن جديد.

اخرج من Vim. هذه المرة، افتح ملفين جديدين:

```bash
vim file1.js file2.js
```

يعرض Vim حاليًا مخزن `file1.js`، لكنه في الواقع ينشئ مخزنين: مخزن `file1.js` ومخزن `file2.js`. قم بتشغيل `:buffers` لرؤية جميع المخازن (بدلاً من ذلك، يمكنك استخدام `:ls` أو `:files` أيضًا). يجب أن ترى *كلا* من `file1.js` و `file2.js` مدرجين. تشغيل `vim file1 file2 file3 ... filen` ينشئ عدد n من المخازن. في كل مرة تفتح فيها ملفًا جديدًا، يقوم Vim بإنشاء مخزن جديد لذلك الملف.

هناك عدة طرق يمكنك من خلالها التنقل بين المخازن:
- `:bnext` للانتقال إلى المخزن التالي (`:bprevious` للانتقال إلى المخزن السابق).
- `:buffer` + اسم الملف. يمكن لـ Vim إكمال اسم الملف تلقائيًا باستخدام `<Tab>`.
- `:buffer` + `n`، حيث `n` هو رقم المخزن. على سبيل المثال، كتابة `:buffer 2` ستأخذك إلى المخزن رقم 2.
- القفز إلى الموضع الأقدم في قائمة القفز باستخدام `Ctrl-O` وإلى الموضع الأحدث باستخدام `Ctrl-I`. هذه ليست طرقًا محددة للمخازن، ولكن يمكن استخدامها للقفز بين مخازن مختلفة. سأشرح القفزات بمزيد من التفاصيل في الفصل 5.
- الانتقال إلى المخزن الذي تم تحريره سابقًا باستخدام `Ctrl-^`.

بمجرد أن ينشئ Vim مخزنًا، سيبقى في قائمة المخازن الخاصة بك. لإزالته، يمكنك كتابة `:bdelete`. يمكن أن يقبل أيضًا رقم المخزن كمعامل (`:bdelete 3` لحذف المخزن رقم 3) أو اسم ملف (`:bdelete` ثم استخدم `<Tab>` لإكمال الاسم تلقائيًا).

أصعب شيء بالنسبة لي عند تعلم المخازن كان تصور كيف تعمل لأنها كانت جديدة بالنسبة لي. تشبيه جيد هو مجموعة من بطاقات اللعب. إذا كان لدي 2 مخازن، لدي مجموعة من بطاقتين. البطاقة في الأعلى هي البطاقة الوحيدة التي أراها، لكنني أعلم أن هناك بطاقات أسفلها. إذا رأيت مخزن `file1.js` معروضًا، فإن بطاقة `file1.js` هي في أعلى المجموعة. لا أستطيع رؤية البطاقة الأخرى، `file2.js` هنا، لكنها موجودة. إذا قمت بالتبديل إلى مخزن `file2.js`، فإن بطاقة `file2.js` الآن في أعلى المجموعة وبطاقة `file1.js` أسفلها.

إذا لم تستخدم Vim من قبل، فهذه فكرة جديدة. خذ وقتك لفهمها.

## الخروج من Vim

بالمناسبة، إذا كان لديك عدة مخازن مفتوحة، يمكنك إغلاق جميعها باستخدام quit-all:

```shell
:qall
```

إذا كنت ترغب في الإغلاق دون حفظ التغييرات، فقط أضف `!` في النهاية:

```shell
:qall!
```

لحفظ وإغلاق جميعها، قم بتشغيل:

```shell
:wqall
```

## النوافذ

النافذة هي عرض على مخزن. إذا كنت قادمًا من محرر رئيسي، قد تكون هذه الفكرة مألوفة لك. معظم محررات النصوص لديها القدرة على عرض نوافذ متعددة. في Vim، يمكنك أيضًا الحصول على نوافذ متعددة.

لنفتح `file1.js` من الطرفية مرة أخرى:

```bash
vim file1.js
```

في وقت سابق كتبت أنك تنظر إلى مخزن `file1.js`. بينما كان ذلك صحيحًا، كانت تلك العبارة غير مكتملة. أنت تنظر إلى مخزن `file1.js`، المعروض من خلال **نافذة**. النافذة هي الطريقة التي ترى بها مخزنًا.

لا تغلق Vim بعد. قم بتشغيل:

```shell
:split file2.js
```

الآن أنت تنظر إلى مخزنين من خلال **نافذتين**. النافذة العلوية تعرض مخزن `file2.js`. النافذة السفلية تعرض مخزن `file1.js`.

إذا كنت ترغب في التنقل بين النوافذ، استخدم هذه الاختصارات:

```shell
Ctrl-W H    ينقل المؤشر إلى النافذة اليسرى
Ctrl-W J    ينقل المؤشر إلى النافذة السفلية
Ctrl-W K    ينقل المؤشر إلى النافذة العلوية
Ctrl-W L    ينقل المؤشر إلى النافذة اليمنى
```

الآن قم بتشغيل:

```shell
:vsplit file3.js
```

أنت الآن ترى ثلاث نوافذ تعرض ثلاث مخازن. نافذة واحدة تعرض مخزن `file3.js`، ونافذة أخرى تعرض مخزن `file2.js`، ونافذة أخرى تعرض مخزن `file1.js`.

يمكن أن يكون لديك نوافذ متعددة تعرض نفس المخزن. بينما أنت في النافذة العلوية اليسرى، اكتب:

```shell
:buffer file2.js
```

الآن كلا النافذتين تعرضان مخزن `file2.js`. إذا بدأت الكتابة في نافذة `file2.js`، سترى أن كلا النافذتين اللتين تعرضان مخازن `file2.js` يتم تحديثهما في الوقت الحقيقي.

لإغلاق النافذة الحالية، يمكنك تشغيل `Ctrl-W C` أو كتابة `:quit`. عندما تغلق نافذة، سيظل المخزن موجودًا (قم بتشغيل `:buffers` لتأكيد ذلك).

إليك بعض أوامر النوافذ المفيدة في وضع النمط العادي:

```shell
Ctrl-W V    يفتح تقسيمًا عموديًا جديدًا
Ctrl-W S    يفتح تقسيمًا أفقيًا جديدًا
Ctrl-W C    يغلق نافذة
Ctrl-W O    يجعل النافذة الحالية الوحيدة على الشاشة ويغلق النوافذ الأخرى
```

وهنا قائمة بأوامر سطر الأوامر المفيدة للنوافذ:

```shell
:vsplit filename    تقسيم النافذة عموديًا
:split filename     تقسيم النافذة أفقيًا
:new filename       إنشاء نافذة جديدة
```

خذ وقتك لفهمها. لمزيد من المعلومات، تحقق من `:h window`.

## الألسنة

اللسان هو مجموعة من النوافذ. فكر في الأمر كتنسيق للنوافذ. في معظم محررات النصوص الحديثة (ومتصفحات الإنترنت الحديثة)، يعني اللسان ملفًا / صفحة مفتوحة وعندما تغلقه، يختفي ذلك الملف / الصفحة. في Vim، لا يمثل اللسان ملفًا مفتوحًا. عندما تغلق لسانًا في Vim، لا تغلق ملفًا. أنت فقط تغلق التنسيق. الملفات المفتوحة في ذلك التنسيق لا تزال مفتوحة، لا تزال مفتوحة في مخازنها.

لنرى ألسنة Vim في العمل. افتح `file1.js`:

```bash
vim file1.js
```

لفتح `file2.js` في لسان جديد:

```shell
:tabnew file2.js
```

يمكنك أيضًا السماح لـ Vim بإكمال اسم الملف الذي تريد فتحه في *لسان جديد* بالضغط على `<Tab>` (لا يوجد أي تورية هنا).

إليك قائمة بالتنقلات المفيدة للألسنة:

```shell
:tabnew file.txt    فتح file.txt في لسان جديد
:tabclose           إغلاق اللسان الحالي
:tabnext            الانتقال إلى اللسان التالي
:tabprevious        الانتقال إلى اللسان السابق
:tablast            الانتقال إلى آخر لسان
:tabfirst           الانتقال إلى أول لسان
```

يمكنك أيضًا تشغيل `gt` للانتقال إلى صفحة اللسان التالية (يمكنك الانتقال إلى اللسان السابق باستخدام `gT`). يمكنك تمرير عدد كمعامل إلى `gt`، حيث العدد هو رقم اللسان. للانتقال إلى اللسان الثالث، قم بكتابة `3gt`.

تتمثل إحدى مزايا وجود ألسنة متعددة في أنه يمكنك الحصول على ترتيبات نوافذ مختلفة في ألسنة مختلفة. ربما تريد أن يحتوي لسانك الأول على 3 نوافذ عمودية واللسان الثاني على ترتيب مختلط من النوافذ الأفقية والعمودية. اللسان هو الأداة المثالية لهذه المهمة!

للبدء في Vim مع ألسنة متعددة، يمكنك القيام بذلك من الطرفية:

```bash
vim -p file1.js file2.js file3.js
```

## التنقل في 3D

التنقل بين النوافذ يشبه السفر ثنائي الأبعاد على المحور X-Y في الإحداثيات الكارتيزية. يمكنك الانتقال إلى النافذة العلوية، اليمنى، السفلية، واليسرى باستخدام `Ctrl-W H/J/K/L`.

التنقل بين المخازن يشبه السفر عبر المحور Z في الإحداثيات الكارتيزية. تخيل أن ملفات المخازن الخاصة بك تتراصف عبر المحور Z. يمكنك التنقل عبر المحور Z مخزنًا واحدًا في كل مرة باستخدام `:bnext` و `:bprevious`. يمكنك القفز إلى أي إحداثية في المحور Z باستخدام `:buffer filename/buffernumber`.

يمكنك التحرك في *الفضاء ثلاثي الأبعاد* من خلال دمج حركات النوافذ والمخازن. يمكنك الانتقال إلى النافذة العلوية، اليمنى، السفلية، أو اليسرى (تنقلات X-Y) باستخدام حركات النوافذ. نظرًا لأن كل نافذة تحتوي على مخازن، يمكنك التحرك للأمام والخلف (تنقلات Z) باستخدام حركات المخازن.

## استخدام المخازن، النوافذ، والألسنة بطريقة ذكية

لقد تعلمت ما هي المخازن، النوافذ، والألسنة وكيف تعمل في Vim. الآن بعد أن فهمتها بشكل أفضل، يمكنك استخدامها في سير عملك الخاص.

لكل شخص سير عمل مختلف، إليك سير عملي كمثال:
- أولاً، أستخدم المخازن لتخزين جميع الملفات المطلوبة للمهمة الحالية. يمكن لـ Vim التعامل مع العديد من المخازن المفتوحة قبل أن يبدأ في التباطؤ. بالإضافة إلى أن وجود العديد من المخازن المفتوحة لن يزدحم شاشتي. أرى فقط مخزنًا واحدًا (افترض أن لدي نافذة واحدة) في أي وقت، مما يسمح لي بالتركيز على شاشة واحدة. عندما أحتاج إلى الذهاب إلى مكان ما، يمكنني بسرعة الانتقال إلى أي مخزن مفتوح في أي وقت.
- أستخدم نوافذ متعددة لعرض مخازن متعددة في وقت واحد، عادةً عند مقارنة الملفات، قراءة الوثائق، أو متابعة تدفق الشيفرة. أحاول الحفاظ على عدد النوافذ المفتوحة إلى ثلاثة كحد أقصى لأن شاشتي ستصبح مزدحمة (أستخدم لابتوب صغير). عندما أنتهي، أغلق أي نوافذ إضافية. عدد أقل من النوافذ يعني أقل من المشتتات.
- بدلاً من الألسنة، أستخدم نوافذ [tmux](https://github.com/tmux/tmux/wiki). عادةً ما أستخدم عدة نوافذ tmux في وقت واحد. على سبيل المثال، نافذة tmux واحدة لرموز جانب العميل وأخرى لرموز الخلفية.

قد يبدو سير عملي مختلفًا عن سيرك بناءً على أسلوب تحريرك وهذا جيد. جرب لتكتشف سيرك الخاص، بما يتناسب مع أسلوبك في البرمجة.