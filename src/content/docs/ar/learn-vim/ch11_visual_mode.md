---
description: هذا المستند يشرح كيفية استخدام وضع العرض في فيم لتعديل النصوص بكفاءة،
  مع توضيح الأنماط الثلاثة لوضع العرض.
title: Ch11. Visual Mode
---

تسليط الضوء وتطبيق التغييرات على نص هو ميزة شائعة في العديد من محررات النصوص ومعالجات الكلمات. يمكن لـ Vim القيام بذلك باستخدام الوضع المرئي. في هذا الفصل، ستتعلم كيفية استخدام الوضع المرئي للتلاعب بالنصوص بكفاءة.

## الأنواع الثلاثة من الأوضاع المرئية

يمتلك Vim ثلاثة أوضاع مرئية مختلفة. وهي:

```shell
v         وضع مرئي حسب الأحرف
V         وضع مرئي حسب الأسطر
Ctrl-V    وضع مرئي حسب الكتل
```

إذا كان لديك النص:

```shell
one
two
three
```

يعمل وضع المرئي حسب الأحرف مع الأحرف الفردية. اضغط على `v` على أول حرف. ثم انتقل إلى السطر التالي باستخدام `j`. سيقوم بتسليط الضوء على جميع النصوص من "one" حتى موقع المؤشر الخاص بك. إذا ضغطت على `gU`، يقوم Vim بتحويل الأحرف المميزة إلى أحرف كبيرة.

يعمل وضع المرئي حسب الأسطر مع الأسطر. اضغط على `V` وشاهد كيف يقوم Vim بتحديد السطر بالكامل الذي يوجد عليه المؤشر. تمامًا مثل وضع المرئي حسب الأحرف، إذا قمت بتشغيل `gU`، يقوم Vim بتحويل الأحرف المميزة إلى أحرف كبيرة.

يعمل وضع المرئي حسب الكتل مع الصفوف والأعمدة. يمنحك حرية حركة أكبر من الأوضاع الأخرى. إذا ضغطت على `Ctrl-V`، يقوم Vim بتسليط الضوء على الحرف الموجود تحت المؤشر تمامًا مثل وضع المرئي حسب الأحرف، باستثناء أنه بدلاً من تسليط الضوء على كل حرف حتى نهاية السطر قبل الانتقال إلى السطر التالي، ينتقل إلى السطر التالي مع الحد الأدنى من التسليط. جرب التحرك باستخدام `h/j/k/l` وشاهد حركة المؤشر.

في أسفل يسار نافذة Vim الخاصة بك، سترى إما `-- VISUAL --`، `-- VISUAL LINE --`، أو `-- VISUAL BLOCK --` معروضة للإشارة إلى الوضع المرئي الذي أنت فيه.

بينما أنت داخل وضع مرئي، يمكنك التبديل إلى وضع مرئي آخر عن طريق الضغط على `v`، `V`، أو `Ctrl-V`. على سبيل المثال، إذا كنت في وضع مرئي حسب الأسطر وترغب في التبديل إلى وضع مرئي حسب الكتل، قم بتشغيل `Ctrl-V`. جرب ذلك!

هناك ثلاث طرق للخروج من الوضع المرئي: `<Esc>`، `Ctrl-C`، ونفس المفتاح مثل وضعك المرئي الحالي. ما يعنيه الأخير هو أنه إذا كنت حاليًا في وضع مرئي حسب الأسطر (`V`)، يمكنك الخروج منه بالضغط على `V` مرة أخرى. إذا كنت في وضع مرئي حسب الأحرف، يمكنك الخروج منه بالضغط على `v`.

هناك في الواقع طريقة أخرى للدخول إلى الوضع المرئي:

```shell
gv    انتقل إلى الوضع المرئي السابق
```

سيبدأ نفس الوضع المرئي على نفس كتلة النص المميزة كما فعلت في المرة الأخيرة.

## تنقل الوضع المرئي

بينما أنت في وضع مرئي، يمكنك توسيع كتلة النص المميزة باستخدام حركات Vim.

دعنا نستخدم نفس النص الذي استخدمته سابقًا:

```shell
one
two
three
```

هذه المرة دعنا نبدأ من السطر "two". اضغط على `v` للانتقال إلى وضع المرئي حسب الأحرف (هنا تمثل الأقواس المربعة `[]` تسليط الضوء على الأحرف):

```shell
one
[t]wo
three
```

اضغط على `j` وسيقوم Vim بتسليط الضوء على جميع النص من السطر "two" إلى أول حرف من السطر "three".

```shell
one
[two
t]hree
```

افترض من هذا الموضع أنك ترغب في إضافة السطر "one" أيضًا. إذا ضغطت على `k`، ستجد أن التسليط يتحرك بعيدًا عن السطر "three".

```shell
one
[t]wo
three
```

هل هناك طريقة لتوسيع الاختيار المرئي بحرية للتحرك في أي اتجاه تريده؟ بالتأكيد. دعنا نعود قليلاً إلى حيث لديك السطر "two" و "three" مميزين.

```shell
one
[two
t]hree    <-- المؤشر
```

يتبع تسليط الضوء على النص حركة المؤشر. إذا كنت ترغب في توسيعه لأعلى إلى السطر "one"، تحتاج إلى تحريك المؤشر لأعلى إلى السطر "two". حاليًا، المؤشر على السطر "three". يمكنك تبديل موقع المؤشر باستخدام `o` أو `O`.

```shell
one
[two     <-- المؤشر
t]hree
```

الآن عندما تضغط على `k`، لم يعد يقلل من الاختيار، بل يوسعها لأعلى.

```shell
[one
two
t]hree
```

مع `o` أو `O` في الوضع المرئي، يقفز المؤشر من البداية إلى نهاية كتلة النص المميزة، مما يسمح لك بتوسيع منطقة التسليط.

## قواعد الوضع المرئي

يشارك الوضع المرئي العديد من العمليات مع الوضع العادي.

على سبيل المثال، إذا كان لديك النص التالي وترغب في حذف أول سطرين من الوضع المرئي:

```shell
one
two
three
```

قم بتسليط الضوء على السطرين "one" و "two" باستخدام وضع المرئي حسب الأسطر (`V`):

```shell
[one
two]
three
```

سيؤدي الضغط على `d` إلى حذف الاختيار، مشابهًا للوضع العادي. لاحظ أن قاعدة القواعد من الوضع العادي، الفعل + الاسم، لا تنطبق. الفعل نفسه لا يزال موجودًا (`d`)، ولكن لا يوجد اسم في الوضع المرئي. قاعدة القواعد في الوضع المرئي هي الاسم + الفعل، حيث الاسم هو النص المميز. حدد كتلة النص أولاً، ثم يتبع الأمر.

في الوضع العادي، هناك بعض الأوامر التي لا تتطلب حركة، مثل `x` لحذف حرف واحد تحت المؤشر و `r` لاستبدال الحرف تحت المؤشر (`rx` يستبدل الحرف تحت المؤشر بـ "x"). في الوضع المرئي، يتم تطبيق هذه الأوامر الآن على النص المميز بالكامل بدلاً من حرف واحد. عد إلى النص المميز:

```shell
[one
two]
three
```

تشغيل `x` يحذف جميع النصوص المميزة.

يمكنك استخدام هذا السلوك لإنشاء عنوان بسرعة في نص markdown. افترض أنك بحاجة إلى تحويل النص التالي بسرعة إلى عنوان markdown من المستوى الأول ("==="):

```shell
Chapter One
```

أولاً، انسخ النص باستخدام `yy`، ثم الصقه باستخدام `p`:

```shell
Chapter One
Chapter One
```

الآن، انتقل إلى السطر الثاني وحدده باستخدام وضع المرئي حسب الأسطر:

```shell
Chapter One
[Chapter One]
```

العنوان من المستوى الأول هو سلسلة من "=" تحت النص. قم بتشغيل `r=`, ها هو! هذا يوفر عليك كتابة "=" يدويًا.

```shell
Chapter One
===========
```

للتعرف على المزيد حول العوامل في الوضع المرئي، تحقق من `:h visual-operators`.

## الوضع المرئي وأوامر سطر الأوامر

يمكنك تطبيق أوامر سطر الأوامر بشكل انتقائي على كتلة النص المميزة. إذا كان لديك هذه العبارات وترغب في استبدال "const" بـ "let" فقط في أول سطرين:

```shell
const one = "one";
const two = "two";
const three = "three";
```

قم بتسليط الضوء على أول سطرين باستخدام *أي* وضع مرئي وقم بتشغيل أمر الاستبدال `:s/const/let/g`:

```shell
let one = "one";
let two = "two";
const three = "three";
```

لاحظ أنني قلت يمكنك القيام بذلك باستخدام *أي* وضع مرئي. لا تحتاج إلى تسليط الضوء على السطر بالكامل لتشغيل الأمر على ذلك السطر. طالما أنك تحدد على الأقل حرفًا واحدًا في كل سطر، يتم تطبيق الأمر.

## إضافة نص على عدة أسطر

يمكنك إضافة نص على عدة أسطر في Vim باستخدام وضع المرئي حسب الكتل. إذا كنت بحاجة إلى إضافة فاصلة منقوطة في نهاية كل سطر:

```shell
const one = "one"
const two = "two"
const three = "three"
```

مع المؤشر على السطر الأول:
- قم بتشغيل وضع المرئي حسب الكتل وانتقل لأسفل سطرين (`Ctrl-V jj`).
- قم بتسليط الضوء حتى نهاية السطر (`$`).
- أضف (`A`) ثم اكتب ";".
- اخرج من الوضع المرئي (`<Esc>`).

يجب أن ترى الفاصلة المنقوطة المضافة ";" في كل سطر الآن. رائع! هناك طريقتان للدخول إلى وضع الإدراج من وضع المرئي حسب الكتل: `A` للدخول إلى النص بعد المؤشر أو `I` للدخول إلى النص قبل المؤشر. لا تخلط بينهما وبين `A` (إضافة نص في نهاية السطر) و `I` (إدخال نص قبل أول سطر غير فارغ) من الوضع العادي.

بدلاً من ذلك، يمكنك أيضًا استخدام أمر `:normal` لإضافة نص على عدة أسطر:
- حدد جميع 3 الأسطر (`vjj`).
- اكتب `:normal! A;`.

تذكر، أمر `:normal` ينفذ أوامر الوضع العادي. يمكنك توجيهه لتشغيل `A;` لإضافة النص ";" في نهاية السطر.

## زيادة الأرقام

يمتلك Vim أوامر `Ctrl-X` و `Ctrl-A` لتقليل وزيادة الأرقام. عند استخدامها مع الوضع المرئي، يمكنك زيادة الأرقام عبر عدة أسطر.

إذا كان لديك هذه العناصر HTML:

```shell
<div id="app-1"></div>
<div id="app-1"></div>
<div id="app-1"></div>
<div id="app-1"></div>
<div id="app-1"></div>
```

من الممارسات السيئة أن يكون لديك عدة معرفات تحمل نفس الاسم، لذا دعنا نزيدها لجعلها فريدة:
- انتقل بمؤشرك إلى "1" في السطر الثاني.
- ابدأ وضع المرئي حسب الكتل وانتقل لأسفل 3 أسطر (`Ctrl-V 3j`). هذا يسلط الضوء على "1" المتبقية. يجب الآن أن تكون جميع "1" مميزة (باستثناء السطر الأول).
- قم بتشغيل `g Ctrl-A`.

يجب أن ترى هذه النتيجة:

```shell
<div id="app-1"></div>
<div id="app-2"></div>
<div id="app-3"></div>
<div id="app-4"></div>
<div id="app-5"></div>
```

`g Ctrl-A` يزيد الأرقام عبر عدة أسطر. يمكن أن تزيد `Ctrl-X/Ctrl-A` الأحرف أيضًا، مع خيار تنسيق الأرقام:

```shell
set nrformats+=alpha
```

خيار `nrformats` يوجه Vim بشأن القواعد التي تعتبر "أرقامًا" لـ `Ctrl-A` و `Ctrl-X` لزيادة وتقليل. من خلال إضافة `alpha`، يتم الآن اعتبار الحرف الأبجدي كرقم. إذا كان لديك العناصر HTML التالية:

```shell
<div id="app-a"></div>
<div id="app-a"></div>
<div id="app-a"></div>
<div id="app-a"></div>
<div id="app-a"></div>
```

ضع مؤشرك على "app-a" الثانية. استخدم نفس التقنية كما في الأعلى (`Ctrl-V 3j` ثم `g Ctrl-A`) لزيادة المعرفات.

```shell
<div id="app-a"></div>
<div id="app-b"></div>
<div id="app-c"></div>
<div id="app-d"></div>
<div id="app-e"></div>
```

## تحديد آخر منطقة وضع مرئي

في وقت سابق في هذا الفصل، ذكرت أن `gv` يمكن أن يسلط الضوء بسرعة على آخر تسليط وضع مرئي. يمكنك أيضًا الانتقال إلى موقع بداية ونهاية آخر وضع مرئي باستخدام هذين العلامتين الخاصتين:

```shell
`<    انتقل إلى أول مكان من تسليط الضوء في الوضع المرئي السابق
`>    انتقل إلى آخر مكان من تسليط الضوء في الوضع المرئي السابق
```

في وقت سابق، ذكرت أيضًا أنه يمكنك تنفيذ أوامر سطر الأوامر بشكل انتقائي على نص مميز، مثل `:s/const/let/g`. عندما قمت بذلك، كنت سترى ما يلي:

```shell
:`<,`>s/const/let/g
```

كنت في الواقع تنفذ أمر `s/const/let/g` *المتسلسل* (مع العلامتين كعناوين). مثير للاهتمام!

يمكنك دائمًا تعديل هذه العلامات في أي وقت تريده. إذا كنت بحاجة بدلاً من ذلك إلى الاستبدال من بداية النص المميز إلى نهاية الملف، يمكنك ببساطة تغيير الأمر إلى:

```shell
:`<,$s/const/let/g
```

## الدخول إلى الوضع المرئي من وضع الإدراج

يمكنك أيضًا الدخول إلى الوضع المرئي من وضع الإدراج. للانتقال إلى وضع المرئي حسب الأحرف أثناء وجودك في وضع الإدراج:

```shell
Ctrl-O v
```

تذكر أن تشغيل `Ctrl-O` أثناء وجودك في وضع الإدراج يتيح لك تنفيذ أمر من الوضع العادي. بينما أنت في وضع انتظار أمر الوضع العادي، قم بتشغيل `v` للدخول إلى وضع المرئي حسب الأحرف. لاحظ أنه في أسفل يسار الشاشة، يقول `--(insert) VISUAL--`. تعمل هذه الحيلة مع أي عامل من عوامل الوضع المرئي: `v`، `V`، و `Ctrl-V`.

## وضع التحديد

يمتلك Vim وضعًا مشابهًا لوضع المرئي يسمى وضع التحديد. مثل الوضع المرئي، يحتوي أيضًا على ثلاثة أوضاع مختلفة:

```shell
gh         وضع تحديد حسب الأحرف
gH         وضع تحديد حسب الأسطر
gCtrl-h    وضع تحديد حسب الكتل
```

يمثل وضع التحديد سلوك تسليط النص في محرر عادي بشكل أقرب من وضع Vim المرئي.

في محرر عادي، بعد أن تسلط الضوء على كتلة نص وتكتب حرفًا، لنفترض الحرف "y"، سيقوم بحذف النص المميز وإدراج الحرف "y". إذا قمت بتسليط الضوء على سطر باستخدام وضع التحديد حسب الأسطر (`gH`) وكتبت "y"، سيقوم بحذف النص المميز وإدراج الحرف "y".

قارن هذا الوضع التحديد مع الوضع المرئي: إذا قمت بتسليط الضوء على سطر نص باستخدام وضع المرئي حسب الأسطر (`V`) وكتبت "y"، لن يتم حذف النص المميز واستبداله بالحرف "y" الحرفي، بل سيتم نقله. لا يمكنك تنفيذ أوامر الوضع العادي على النص المميز في وضع التحديد.

شخصيًا، لم أستخدم وضع التحديد أبدًا، لكن من الجيد أن تعرف أنه موجود.

## تعلم الوضع المرئي بطريقة ذكية

الوضع المرئي هو تمثيل Vim لإجراء تسليط النص.

إذا وجدت نفسك تستخدم عمليات الوضع المرئي بشكل متكرر أكثر من عمليات الوضع العادي، كن حذرًا. هذه نمط مضاد. يتطلب الأمر المزيد من الضغطات لتشغيل عملية وضع مرئي مقارنة بنظيرتها في الوضع العادي. على سبيل المثال، إذا كنت بحاجة إلى حذف كلمة داخلية، لماذا تستخدم أربع ضغطات، `viwd` (تسليط الضوء بصريًا على كلمة داخلية ثم حذفها)، إذا كان يمكنك إنجاز ذلك بثلاث ضغطات فقط (`diw`)? الأخير أكثر مباشرة وإيجازًا. بالطبع، ستكون هناك أوقات تكون فيها الأوضاع المرئية مناسبة، لكن بشكل عام، يفضل اتباع نهج أكثر مباشرة.