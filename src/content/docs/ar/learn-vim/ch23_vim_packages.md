---
description: في هذا الفصل، ستتعلم كيفية استخدام مدير الحزم المدمج في فيم لتثبيت الإضافات،
  بما في ذلك آلية التحميل التلقائي واليدوي.
title: Ch23. Vim Packages
---

في الفصل السابق، ذكرت استخدام مدير إضافات خارجي لتثبيت الإضافات. منذ الإصدار 8، يأتي Vim مع مدير إضافات مدمج خاص به يسمى *packages*. في هذا الفصل، ستتعلم كيفية استخدام حزم Vim لتثبيت الإضافات.

للتحقق مما إذا كان بناء Vim الخاص بك لديه القدرة على استخدام الحزم، قم بتشغيل `:version` وابحث عن خاصية `+packages`. بدلاً من ذلك، يمكنك أيضًا تشغيل `:echo has('packages')` (إذا كانت النتيجة 1، فهذا يعني أنه لديه القدرة على الحزم).

## دليل الحزم

تحقق مما إذا كان لديك دليل `~/.vim/` في المسار الجذري. إذا لم يكن لديك، قم بإنشائه. داخل هذا الدليل، أنشئ دليلاً يسمى `pack` (`~/.vim/pack/)`. يعرف Vim تلقائيًا أنه يجب البحث داخل هذا الدليل عن الحزم.

## نوعان من التحميل

تحتوي حزمة Vim على آليتين للتحميل: التحميل التلقائي والتحميل اليدوي.

### التحميل التلقائي

لتحميل الإضافات تلقائيًا عند بدء Vim، تحتاج إلى وضعها في دليل `start/`. يبدو المسار كما يلي:

```shell
~/.vim/pack/*/start/
```

الآن قد تسأل، "ما هو `*` بين `pack/` و `start/`؟" `*` هو اسم عشوائي ويمكن أن يكون أي شيء تريده. دعنا نسميه `packdemo/`:

```shell
~/.vim/pack/packdemo/start/
```

تذكر أنه إذا تخطيت ذلك وقمت بشيء مثل هذا بدلاً من ذلك:

```shell
~/.vim/pack/start/
```

فلن تعمل نظام الحزم. من الضروري وضع اسم بين `pack/` و `start/`.

لهذه التجربة، دعنا نحاول تثبيت إضافة [NERDTree](https://github.com/preservim/nerdtree). انتقل إلى دليل `start/` (`cd ~/.vim/pack/packdemo/start/`) واستنساخ مستودع NERDTree:

```shell
git clone https://github.com/preservim/nerdtree.git
```

هذا كل شيء! أنت جاهز. في المرة القادمة التي تبدأ فيها Vim، يمكنك تنفيذ أوامر NERDTree مثل `:NERDTreeToggle` على الفور.

يمكنك استنساخ أي عدد تريده من مستودعات الإضافات داخل مسار `~/.vim/pack/*/start/`. سيقوم Vim بتحميل كل واحدة تلقائيًا. إذا قمت بإزالة المستودع المستنسخ (`rm -rf nerdtree/`)، فلن تكون تلك الإضافة متاحة بعد الآن.

### التحميل اليدوي

لتحميل الإضافات يدويًا عند بدء Vim، تحتاج إلى وضعها في دليل `opt/`. مشابهًا للتحميل التلقائي، يبدو المسار كما يلي:

```shell
~/.vim/pack/*/opt/
```

دعنا نستخدم نفس دليل `packdemo/` من قبل:

```shell
~/.vim/pack/packdemo/opt/
```

هذه المرة، دعنا نقوم بتثبيت لعبة [killersheep](https://github.com/vim/killersheep) (هذا يتطلب Vim 8.2). انتقل إلى دليل `opt/` (`cd ~/.vim/pack/packdemo/opt/`) واستنساخ المستودع:

```shell
git clone https://github.com/vim/killersheep.git
```

ابدأ Vim. الأمر لتنفيذ اللعبة هو `:KillKillKill`. حاول تشغيله. سيشتكي Vim بأنه ليس أمر محرر صالح. تحتاج إلى *تحميل* الإضافة يدويًا أولاً. دعنا نفعل ذلك:

```shell
:packadd killersheep
```

الآن حاول تشغيل الأمر مرة أخرى `:KillKillKill`. يجب أن يعمل الأمر الآن.

قد تتساءل، "لماذا أريد أبدًا تحميل الحزم يدويًا؟ أليس من الأفضل تحميل كل شيء تلقائيًا عند البداية؟"

سؤال رائع. أحيانًا تكون هناك إضافات لن تستخدمها طوال الوقت، مثل لعبة KillerSheep تلك. ربما لا تحتاج إلى تحميل 10 ألعاب مختلفة وتبطئ وقت بدء Vim. ومع ذلك، بين الحين والآخر، عندما تشعر بالملل، قد ترغب في لعب بعض الألعاب. استخدم التحميل اليدوي للإضافات غير الأساسية.

يمكنك أيضًا استخدام هذا لإضافة الإضافات بشكل شرطي. ربما تستخدم كل من Neovim و Vim وهناك إضافات محسّنة لـ Neovim. يمكنك إضافة شيء مثل هذا في vimrc الخاص بك:

```shell
if has('nvim')
  packadd! neovim-only-plugin
else
  packadd! generic-vim-plugin
endif
```

## تنظيم الحزم

تذكر أن الشرط لاستخدام نظام حزم Vim هو أن يكون لديك إما:

```shell
~/.vim/pack/*/start/
```

أو:

```shell
~/.vim/pack/*/opt/
```

الحقيقة أن `*` يمكن أن يكون *أي* اسم يمكن استخدامه لتنظيم حزمك. لنفترض أنك تريد تجميع إضافاتك بناءً على الفئات (الألوان، الصياغة، والألعاب):

```shell
~/.vim/pack/colors/
~/.vim/pack/syntax/
~/.vim/pack/games/
```

لا يزال بإمكانك استخدام `start/` و `opt/` داخل كل من الأدلة.

```shell
~/.vim/pack/colors/start/
~/.vim/pack/colors/opt/

~/.vim/pack/syntax/start/
~/.vim/pack/syntax/opt/

~/.vim/pack/games/start/
~/.vim/pack/games/opt/
```

## إضافة الحزم بطريقة ذكية

قد تتساءل عما إذا كانت حزمة Vim ستجعل مديري الإضافات الشائعين مثل vim-pathogen و vundle.vim و dein.vim و vim-plug غير ذي جدوى.

الإجابة هي، كما هو الحال دائمًا، "هذا يعتمد".

ما زلت أستخدم vim-plug لأنه يسهل إضافة أو إزالة أو تحديث الإضافات. إذا كنت تستخدم العديد من الإضافات، قد يكون من الأكثر ملاءمة استخدام مديري الإضافات لأنه من السهل تحديث العديد منها في وقت واحد. بعض مديري الإضافات يقدمون أيضًا وظائف غير متزامنة.

إذا كنت من محبي البساطة، جرب حزم Vim. إذا كنت مستخدمًا كثيفًا للإضافات، قد ترغب في التفكير في استخدام مدير إضافات.