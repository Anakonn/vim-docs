---
description: هذا المستند يشرح كيفية استخدام أوامر وضع سطر الأوامر في فيم، بما في ذلك
  الدخول والخروج من الوضع ونصائح مفيدة لتحسين الكفاءة.
title: Ch15. Command-line Mode
---

في الفصول الثلاثة الأخيرة، تعلمت كيفية استخدام أوامر البحث (`/`, `?`)، أمر الاستبدال (`:s`)، الأمر العالمي (`:g`)، والأمر الخارجي (`!`). هذه أمثلة على أوامر وضع سطر الأوامر.

في هذا الفصل، ستتعلم نصائح وحيل متنوعة لوضع سطر الأوامر.

## الدخول والخروج من وضع سطر الأوامر

وضع سطر الأوامر هو وضع بحد ذاته، تمامًا مثل وضع الإدخال، وضع العرض، ووضع العادي. عندما تكون في هذا الوضع، ينتقل المؤشر إلى أسفل الشاشة حيث يمكنك كتابة أوامر مختلفة.

هناك 4 أوامر مختلفة يمكنك استخدامها للدخول إلى وضع سطر الأوامر:
- أنماط البحث (`/`, `?`)
- أوامر سطر الأوامر (`:`)
- أوامر خارجية (`!`)

يمكنك الدخول إلى وضع سطر الأوامر من وضع العادي أو وضع العرض.

لترك وضع سطر الأوامر، يمكنك استخدام `<Esc>`، `Ctrl-C`، أو `Ctrl-[`.

*قد تشير بعض الأدبيات الأخرى إلى "أمر سطر الأوامر" باسم "أمر Ex" و"الأمر الخارجي" باسم "أمر الفلتر" أو "عامل bang".*

## تكرار الأمر السابق

يمكنك تكرار أمر سطر الأوامر السابق أو الأمر الخارجي باستخدام `@:`.

إذا كنت قد قمت للتو بتشغيل `:s/foo/bar/g`، فإن تشغيل `@:` يكرر ذلك الاستبدال. إذا كنت قد قمت للتو بتشغيل `:.!tr '[a-z]' '[A-Z]'`، فإن تشغيل `@:` يكرر آخر فلتر ترجمة أمر خارجي.

## اختصارات وضع سطر الأوامر

أثناء وجودك في وضع سطر الأوامر، يمكنك الانتقال إلى اليسار أو اليمين، حرفًا واحدًا في كل مرة، باستخدام سهم `Left` أو `Right`.

إذا كنت بحاجة إلى الانتقال على مستوى الكلمات، استخدم `Shift-Left` أو `Shift-Right` (في بعض أنظمة التشغيل، قد تحتاج إلى استخدام `Ctrl` بدلاً من `Shift`).

للذهاب إلى بداية السطر، استخدم `Ctrl-B`. للذهاب إلى نهاية السطر، استخدم `Ctrl-E`.

مماثل لوضع الإدخال، داخل وضع سطر الأوامر، لديك ثلاث طرق لحذف الأحرف:

```shell
Ctrl-H    حذف حرف واحد
Ctrl-W    حذف كلمة واحدة
Ctrl-U    حذف السطر بالكامل
```
أخيرًا، إذا كنت ترغب في تعديل الأمر كما تفعل مع ملف نصي عادي، استخدم `Ctrl-F`.

هذا يسمح لك أيضًا بالبحث من خلال الأوامر السابقة، تعديلها وإعادة تشغيلها بالضغط على `<Enter>` في "وضع تحرير سطر الأوامر العادي".

## التسجيل والإكمال التلقائي

أثناء وجودك في وضع سطر الأوامر، يمكنك إدراج نصوص من سجل Vim باستخدام `Ctrl-R` بنفس طريقة وضع الإدخال. إذا كان لديك السلسلة "foo" محفوظة في السجل a، يمكنك إدراجها بتشغيل `Ctrl-R a`. كل ما يمكنك الحصول عليه من السجل في وضع الإدخال، يمكنك القيام بنفس الشيء من وضع سطر الأوامر.

بالإضافة إلى ذلك، يمكنك أيضًا الحصول على الكلمة تحت المؤشر باستخدام `Ctrl-R Ctrl-W` (`Ctrl-R Ctrl-A` للكلمة تحت المؤشر). للحصول على السطر تحت المؤشر، استخدم `Ctrl-R Ctrl-L`. للحصول على اسم الملف تحت المؤشر، استخدم `Ctrl-R Ctrl-F`.

يمكنك أيضًا إكمال الأوامر الموجودة. لإكمال أمر `echo`، أثناء وجودك في وضع سطر الأوامر، اكتب "ec"، ثم اضغط على `<Tab>`. يجب أن ترى في الأسفل الأيسر أوامر Vim التي تبدأ بـ "ec" (مثال: `echo echoerr echohl echomsg econ`). للانتقال إلى الخيار التالي، اضغط إما على `<Tab>` أو `Ctrl-N`. للانتقال إلى الخيار السابق، اضغط إما على `<Shift-Tab>` أو `Ctrl-P`.

بعض أوامر سطر الأوامر تقبل أسماء الملفات كوسائط. أحد الأمثلة هو `edit`. يمكنك إكمال هنا أيضًا. بعد كتابة الأمر، `:e ` (لا تنسَ المسافة)، اضغط على `<Tab>`. سيقوم Vim بإدراج جميع أسماء الملفات ذات الصلة التي يمكنك الاختيار من بينها حتى لا تضطر إلى كتابتها من الصفر.

## نافذة التاريخ ونافذة سطر الأوامر

يمكنك عرض تاريخ أوامر سطر الأوامر وعبارات البحث (هذا يتطلب ميزة `+cmdline_hist`).

لفتح تاريخ سطر الأوامر، قم بتشغيل `:his :`. يجب أن ترى شيئًا مثل ما يلي:

```shell
## Cmd history
2  e file1.txt
3  g/foo/d
4  s/foo/bar/g
```

يُدرج Vim تاريخ جميع أوامر `:` التي قمت بتشغيلها. بشكل افتراضي، يحتفظ Vim بآخر 50 أمرًا. لتغيير عدد الإدخالات التي يتذكرها Vim إلى 100، قم بتشغيل `set history=100`.

استخدام أكثر فائدة لتاريخ سطر الأوامر هو من خلال نافذة سطر الأوامر، `q:`. سيفتح هذا نافذة تاريخ قابلة للبحث والتعديل. افترض أن لديك هذه التعبيرات في التاريخ عندما تضغط على `q:`:

```shell
51  s/verylongsubstitutionpattern/pancake/g
52  his :
53  wq
```

إذا كانت مهمتك الحالية هي القيام بـ `s/verylongsubstitutionpattern/donut/g`، بدلاً من كتابة الأمر من الصفر، لماذا لا تعيد استخدام `s/verylongsubstitutionpattern/pancake/g`؟ بعد كل شيء، الشيء الوحيد المختلف هو كلمة الاستبدال، "donut" مقابل "pancake". كل شيء آخر هو نفسه.

بعد تشغيل `q:`، ابحث عن `s/verylongsubstitutionpattern/pancake/g` في التاريخ (يمكنك استخدام تنقل Vim في هذا السياق) وقم بتحريره مباشرة! غير "pancake" إلى "donut" داخل نافذة التاريخ، ثم اضغط على `<Enter>`. بوم! يقوم Vim بتنفيذ `s/verylongsubstitutionpattern/donut/g` من أجلك. مريح للغاية!

بالمثل، لعرض تاريخ البحث، قم بتشغيل `:his /` أو `:his ?`. لفتح نافذة تاريخ البحث حيث يمكنك البحث وتعديل التاريخ السابق، قم بتشغيل `q/` أو `q?`.

لخروج من هذه النافذة، اضغط على `Ctrl-C`، `Ctrl-W C`، أو اكتب `:quit`.

## المزيد من أوامر سطر الأوامر

يمتلك Vim المئات من الأوامر المدمجة. لرؤية جميع الأوامر التي يمتلكها Vim، تحقق من `:h ex-cmd-index` أو `:h :index`.

## تعلم وضع سطر الأوامر بطريقة ذكية

مقارنةً بالأوضاع الثلاثة الأخرى، يعد وضع سطر الأوامر مثل سكين الجيش السويسري لتحرير النصوص. يمكنك تحرير النصوص، تعديل الملفات، وتنفيذ الأوامر، على سبيل المثال لا الحصر. هذا الفصل هو مجموعة من الأمور المختلفة لوضع سطر الأوامر. كما أنه يجمع أوضاع Vim في النهاية. الآن بعد أن عرفت كيفية استخدام الوضع العادي، وضع الإدخال، وضع العرض، ووضع سطر الأوامر، يمكنك تحرير النصوص باستخدام Vim أسرع من أي وقت مضى.

حان الوقت للابتعاد عن أوضاع Vim وتعلم كيفية القيام بالتنقل بشكل أسرع باستخدام علامات Vim.