---
description: تعلم سجلات فيم يشبه تعلم الجبر للمرة الأولى. استكشف أنواع السجلات العشرة
  وكيفية استخدامها بكفاءة لتوفير الوقت في الكتابة المتكررة.
title: Ch08. Registers
---

تعلم سجلات فيم يشبه تعلم الجبر للمرة الأولى. لم تكن تعتقد أنك بحاجة إليه حتى احتجت إليه.

لقد استخدمت على الأرجح سجلات فيم عندما قمت بنسخ نص أو حذفه ثم لصقه باستخدام `p` أو `P`. ومع ذلك، هل كنت تعلم أن فيم يحتوي على 10 أنواع مختلفة من السجلات؟ إذا تم استخدامها بشكل صحيح، يمكن أن توفر لك سجلات فيم عناء الكتابة المتكررة.

في هذا الفصل، سأستعرض جميع أنواع سجلات فيم وكيفية استخدامها بكفاءة.

## الأنواع العشرة من السجلات

إليك 10 أنواع من سجلات فيم:

1. السجل غير المسمى (`""`).
2. السجلات المرقمة (`"0-9`).
3. سجل الحذف الصغير (`"-`).
4. السجلات المسماة (`"a-z`).
5. السجلات للقراءة فقط (`":`, `".`, و `"%`).
6. سجل الملف البديل (`"#`).
7. سجل التعبير (`"=`).
8. سجلات الاختيار (`"*` و `"+`).
9. سجل الثقب الأسود (`"_`).
10. سجل نمط البحث الأخير (`"/`).

## مشغلات السجل

لاستخدام السجلات، تحتاج أولاً إلى تخزينها باستخدام المشغلات. إليك بعض المشغلات التي تخزن القيم في السجلات:

```shell
y    نسخ (نسخ)
c    حذف النص وبدء وضع الإدخال
d    حذف النص
```

هناك المزيد من المشغلات (مثل `s` أو `x`)، لكن ما سبق هو الأكثر فائدة. القاعدة العامة هي أنه إذا كان بإمكان مشغل ما إزالة نص، فمن المحتمل أنه يخزن النص في السجلات.

لصق نص من السجلات، يمكنك استخدام:

```shell
p    لصق النص بعد المؤشر
P    لصق النص قبل المؤشر
```

كلا من `p` و `P` يقبلان عدداً ورمز سجل كوسائط. على سبيل المثال، للصق عشر مرات، قم بكتابة `10p`. للصق النص من السجل a، قم بكتابة `"ap`. للصق النص من السجل a عشر مرات، قم بكتابة `10"ap`. بالمناسبة، `p` في الواقع تعني "وضع"، وليس "لصق"، لكنني أعتقد أن "لصق" هي كلمة أكثر تقليدية.

الصيغة العامة للحصول على المحتوى من سجل معين هي `"a`، حيث `a` هو رمز السجل.

## استدعاء السجلات من وضع الإدخال

كل ما تتعلمه في هذا الفصل يمكن تنفيذه أيضاً في وضع الإدخال. للحصول على النص من السجل a، عادةً ما تقوم بكتابة `"ap`. ولكن إذا كنت في وضع الإدخال، قم بتشغيل `Ctrl-R a`. الصيغة لاستدعاء السجلات من وضع الإدخال هي:

```shell
Ctrl-R a
```

حيث `a` هو رمز السجل. الآن بعد أن عرفت كيفية تخزين واسترجاع السجلات، دعنا نغوص في التفاصيل!

## السجل غير المسمى

للحصول على النص من السجل غير المسمى، قم بكتابة `""p`. إنه يخزن آخر نص قمت بنسخه أو تغييره أو حذفه. إذا قمت بعملية نسخ أو تغيير أو حذف أخرى، سيقوم فيم تلقائياً باستبدال النص القديم. السجل غير المسمى يشبه عملية النسخ / اللصق القياسية في الكمبيوتر.

بشكل افتراضي، `p` (أو `P`) متصل بالسجل غير المسمى (من الآن فصاعداً سأشير إلى السجل غير المسمى باستخدام `p` بدلاً من `""p`).

## السجلات المرقمة

تملأ السجلات المرقمة نفسها تلقائياً بترتيب تصاعدي. هناك نوعان مختلفان من السجلات المرقمة: السجل المنسوخ (`0`) والسجلات المرقمة (`1-9`). دعنا نناقش السجل المنسوخ أولاً.

### السجل المنسوخ

إذا قمت بنسخ سطر كامل من النص (`yy`)، يقوم فيم فعلياً بحفظ ذلك النص في سجلين:

1. السجل غير المسمى (`p`).
2. السجل المنسوخ (`"0p`).

عندما تقوم بنسخ نص مختلف، سيقوم فيم بتحديث كل من السجل المنسوخ والسجل غير المسمى. أي عمليات أخرى (مثل الحذف) لن يتم تخزينها في السجل 0. يمكن استخدام ذلك لصالحك، لأنه ما لم تقم بعملية نسخ أخرى، سيظل النص المنسوخ موجوداً، بغض النظر عن عدد التغييرات والحذوفات التي تقوم بها.

على سبيل المثال، إذا قمت بـ:
1. نسخ سطر (`yy`)
2. حذف سطر (`dd`)
3. حذف سطر آخر (`dd`)

سيحتوي السجل المنسوخ على النص من الخطوة الأولى.

إذا قمت بـ:
1. نسخ سطر (`yy`)
2. حذف سطر (`dd`)
3. نسخ سطر آخر (`yy`)

سيحتوي السجل المنسوخ على النص من الخطوة الثالثة.

نصيحة أخيرة، أثناء وجودك في وضع الإدخال، يمكنك لصق النص الذي قمت بنسخه للتو باستخدام `Ctrl-R 0`.

### السجلات المرقمة غير الصفرية

عندما تقوم بتغيير أو حذف نص طوله سطر واحد على الأقل، سيتم تخزين ذلك النص في السجلات المرقمة 1-9 مرتبة حسب الأحدث.

على سبيل المثال، إذا كان لديك هذه الأسطر:

```shell
السطر الثالث
السطر الثاني
السطر الأول
```

مع وجود المؤشر على "السطر الثالث"، احذفها واحدة تلو الأخرى باستخدام `dd`. بمجرد حذف جميع الأسطر، يجب أن يحتوي السجل 1 على "السطر الأول" (الأحدث)، والسجل 2 على "السطر الثاني" (الثاني الأحدث)، والسجل 3 على "السطر الثالث" (الأقدم). للحصول على المحتوى من السجل الأول، قم بكتابة `"1p`.

كملاحظة جانبية، يتم زيادة هذه السجلات المرقمة تلقائياً عند استخدام أمر النقطة. إذا كان السجل المرقم الأول (`"1`) يحتوي على "السطر الأول"، والسجل الثاني (`"2`) يحتوي على "السطر الثاني"، والسجل الثالث (`"3`) يحتوي على "السطر الثالث"، يمكنك لصقها بالتتابع باستخدام هذه الخدعة:
- قم بكتابة `"1P` للصق المحتوى من السجل المرقم الأول ("1).
- قم بكتابة `.` للصق المحتوى من السجل المرقم الثاني ("2).
- قم بكتابة `.` للصق المحتوى من السجل المرقم الثالث ("3).

تعمل هذه الخدعة مع أي سجل مرقم. إذا بدأت بـ `"5P`، فإن `.` سيفعل `"6P`، و `.` مرة أخرى سيفعل `"7P`، وهكذا.

لا يتم تخزين الحذوفات الصغيرة مثل حذف كلمة (`dw`) أو تغيير كلمة (`cw`) في السجلات المرقمة. يتم تخزينها في سجل الحذف الصغير (`"-`)، والذي سأناقشه بعد ذلك.

## سجل الحذف الصغير

لا يتم تخزين التغييرات أو الحذوفات التي تقل عن سطر واحد في السجلات المرقمة 0-9، بل في سجل الحذف الصغير (`"-`).

على سبيل المثال:
1. احذف كلمة (`diw`)
2. احذف سطراً (`dd`)
3. احذف سطراً (`dd`)

`"-p` يعطيك الكلمة المحذوفة من الخطوة الأولى.

مثال آخر:
1. أحذف كلمة (`diw`)
2. أحذف سطراً (`dd`)
3. أحذف كلمة (`diw`)

`"-p` يعطيك الكلمة المحذوفة من الخطوة الثالثة. `"1p` يعطيك السطر المحذوف من الخطوة الثانية. للأسف، لا توجد طريقة لاسترجاع الكلمة المحذوفة من الخطوة الأولى لأن سجل الحذف الصغير يخزن عنصرًا واحدًا فقط. ومع ذلك، إذا كنت ترغب في الحفاظ على النص من الخطوة الأولى، يمكنك القيام بذلك باستخدام السجلات المسماة.

## السجل المسماة

السجلات المسماة هي أكثر سجلات فيم تنوعاً. يمكنها تخزين النصوص المنسوخة والمعدلة والمحذوفة في السجلات من a إلى z. على عكس الأنواع الثلاثة السابقة من السجلات التي رأيتها والتي تخزن النصوص تلقائياً في السجلات، يجب عليك إخبار فيم صراحةً باستخدام السجل المسماة، مما يمنحك السيطرة الكاملة.

لنسخ كلمة إلى السجل a، يمكنك القيام بذلك باستخدام `"ayiw`.
- `"a` يخبر فيم أن الإجراء التالي (الحذف / التغيير / النسخ) سيتم تخزينه في السجل a.
- `yiw` ينسخ الكلمة.

للحصول على النص من السجل a، قم بتشغيل `"ap`. يمكنك استخدام جميع الأحرف الأبجدية الستة والعشرين لتخزين ستة وعشرين نصًا مختلفًا باستخدام السجلات المسماة.

أحيانًا قد ترغب في إضافة إلى سجل مسمى موجود. في هذه الحالة، يمكنك إضافة نصك بدلاً من البدء من جديد. للقيام بذلك، يمكنك استخدام النسخة الكبيرة من ذلك السجل. على سبيل المثال، افترض أن لديك الكلمة "Hello " مخزنة بالفعل في السجل a. إذا كنت ترغب في إضافة "world" إلى السجل a، يمكنك العثور على النص "world" ونسخه باستخدام السجل الكبير (`"Ayiw`).

## السجلات للقراءة فقط

يمتلك فيم ثلاثة سجلات للقراءة فقط: `.`, `:`, و `%`. من السهل جداً استخدامها:

```shell
.    يخزن آخر نص تم إدخاله
:    يخزن آخر أمر تم تنفيذه في سطر الأوامر
%    يخزن اسم الملف الحالي
```

إذا كان آخر نص كتبته هو "Hello Vim"، فإن تشغيل `".p` سيطبع النص "Hello Vim". إذا كنت ترغب في الحصول على اسم الملف الحالي، قم بتشغيل `"%p`. إذا قمت بتشغيل الأمر `:s/foo/bar/g`، فإن تشغيل `":p` سيطبع النص الحرفي "s/foo/bar/g".

## سجل الملف البديل

في فيم، عادةً ما يمثل `#` الملف البديل. الملف البديل هو آخر ملف قمت بفتحه. لإدراج اسم الملف البديل، يمكنك استخدام `"#p`.

## سجل التعبير

يمتلك فيم سجل تعبير، `"=، لتقييم التعبيرات.

لتقييم التعبيرات الرياضية `1 + 1`، قم بتشغيل:

```shell
"=1+1<Enter>p
```

هنا، تخبر فيم أنك تستخدم سجل التعبير مع `"=`. تعبيرك هو (`1 + 1`). تحتاج إلى كتابة `p` للحصول على النتيجة. كما ذكرت سابقًا، يمكنك أيضًا الوصول إلى السجل من وضع الإدخال. لتقييم التعبير الرياضي من وضع الإدخال، يمكنك القيام بذلك:

```shell
Ctrl-R =1+1
```

يمكنك أيضًا الحصول على القيم من أي سجل عبر سجل التعبير عند إضافته بـ `@`. إذا كنت ترغب في الحصول على النص من السجل a:

```shell
"=@a
```

ثم اضغط على `<Enter>`، ثم `p`. بالمثل، للحصول على القيم من السجل a أثناء وجودك في وضع الإدخال:

```shell
Ctrl-r =@a
```

التعبير هو موضوع واسع في فيم، لذا سأغطي الأساسيات فقط هنا. سأتناول التعبيرات بمزيد من التفاصيل في فصول فيمسكريبت القادمة.

## سجلات الاختيار

ألا تتمنى أحيانًا أن تتمكن من نسخ نص من برامج خارجية ولصقه محليًا في فيم، والعكس صحيح؟ مع سجلات الاختيار في فيم، يمكنك ذلك. يمتلك فيم سجلي اختيار: `quotestar` (`"*`) و `quoteplus` (`"+`). يمكنك استخدامهما للوصول إلى النص المنسوخ من البرامج الخارجية.

إذا كنت على برنامج خارجي (مثل متصفح كروم) وقمت بنسخ كتلة من النص باستخدام `Ctrl-C` (أو `Cmd-C`، حسب نظام التشغيل لديك)، عادةً لن تتمكن من استخدام `p` للصق النص في فيم. ومع ذلك، فإن كل من `"+` و `"*` في فيم متصلان بالحافظة الخاصة بك، لذا يمكنك فعلاً لصق النص باستخدام `"+p` أو `"*p`. بالمقابل، إذا قمت بنسخ كلمة من فيم باستخدام `"+yiw` أو `"*yiw`، يمكنك لصق ذلك النص في البرنامج الخارجي باستخدام `Ctrl-V` (أو `Cmd-V`). لاحظ أن هذا يعمل فقط إذا كان برنامج فيم لديك يأتي مع خيار `+clipboard` (للتحقق من ذلك، قم بتشغيل `:version`).

قد تتساءل إذا كان `"*` و `"+` يقومان بنفس الشيء، لماذا يمتلك فيم سجلات مختلفة؟ تستخدم بعض الآلات نظام نافذة X11. يحتوي هذا النظام على 3 أنواع من الاختيارات: الأولية والثانوية والحافظة. إذا كانت الآلة الخاصة بك تستخدم X11، يستخدم فيم اختيار X11 *الأولي* مع سجل `quotestar` (`"*`) واختيار X11 *الحافظة* مع سجل `quoteplus` (`"+`). هذا ينطبق فقط إذا كان لديك خيار `+xterm_clipboard` متاح في بناء فيم لديك. إذا لم يكن لدى فيم الخاص بك `xterm_clipboard`، فلا بأس. يعني ذلك فقط أن كلا من `quotestar` و `quoteplus` قابلان للتبادل (ليس لديهما أيضًا).

أجد أن القيام بـ `=*p` أو `=+p` (أو `"*p` أو `"+p`) أمر مرهق. لجعل فيم يلصق النص المنسوخ من البرنامج الخارجي باستخدام `p` فقط، يمكنك إضافة هذا إلى ملف vimrc الخاص بك:

```shell
set clipboard=unnamed
```

الآن عندما أنسخ نصًا من برنامج خارجي، يمكنني لصقه باستخدام السجل غير المسمى، `p`. يمكنني أيضًا نسخ نص من فيم ولصقه في برنامج خارجي. إذا كان لديك `+xterm_clipboard`، قد ترغب في استخدام خيارات الحافظة `unnamed` و `unnamedplus`.

## سجل الثقب الأسود

في كل مرة تقوم فيها بحذف أو تغيير نص، يتم تخزين ذلك النص في سجل فيم تلقائيًا. ستكون هناك أوقات لا ترغب فيها في حفظ أي شيء في السجل. كيف يمكنك القيام بذلك؟

يمكنك استخدام سجل الثقب الأسود (`"_`). لحذف سطر وعدم السماح لفيم بتخزين السطر المحذوف في أي سجل، استخدم `"_dd`.

سجل الثقب الأسود يشبه `/dev/null` من السجلات.

## سجل نمط البحث الأخير

لصق آخر بحث لك (`/` أو `?`)، يمكنك استخدام سجل نمط البحث الأخير (`"/`). لصق آخر مصطلح بحث، استخدم `"/p`.

## عرض السجلات

لعرض جميع سجلاتك، استخدم الأمر `:register`. لعرض السجلات "a، "1، و"- فقط، استخدم `:register a 1 -`.

هناك مكون إضافي يسمى [vim-peekaboo](https://github.com/junegunn/vim-peekaboo) يتيح لك إلقاء نظرة على محتويات السجلات عندما تضغط على `"` أو `@` في وضع الوضع العادي و `Ctrl-R` في وضع الإدخال. أجد أن هذا المكون الإضافي مفيد جدًا لأنه في معظم الأوقات، لا أستطيع تذكر المحتوى في سجلاتي. جربه!

## تنفيذ سجل

السجلات المسماة ليست فقط لتخزين النصوص. يمكنها أيضًا تنفيذ الماكرو باستخدام `@`. سأستعرض الماكرو في الفصل التالي.

تذكر أنه نظرًا لأن الماكرو يتم تخزينه داخل سجلات فيم، يمكنك عن غير قصد الكتابة فوق النص المخزن باستخدام الماكرو. إذا قمت بتخزين النص "Hello Vim" في السجل a وسجلت لاحقًا ماكرو في نفس السجل (`qa{تسلسل الماكرو}q`)، سيقوم ذلك الماكرو بكتابة فوق نص "Hello Vim" المخزن سابقًا.
## مسح سجل

تقنيًا، لا حاجة لمسح أي سجل لأن النص التالي الذي تخزنه تحت نفس اسم السجل سيقوم بكتابة فوقه. ومع ذلك، يمكنك مسح أي سجل مسمى بسرعة عن طريق تسجيل ماكرو فارغ. على سبيل المثال، إذا قمت بتشغيل `qaq`، سيقوم فيم بتسجيل ماكرو فارغ في السجل a.

بديل آخر هو تشغيل الأمر `:call setreg('a', 'hello register a')` حيث a هو السجل a و"hello register a" هو النص الذي تريد تخزينه.

طريقة أخرى لمسح السجل هي تعيين محتوى "سجل a إلى سلسلة فارغة باستخدام التعبير `:let @a = ''`.

## وضع محتوى السجل

يمكنك استخدام الأمر `:put` للصق محتوى أي سجل. على سبيل المثال، إذا قمت بتشغيل `:put a`، سيقوم فيم بطباعة محتوى السجل a أسفل السطر الحالي. هذا يتصرف مثل `"ap`، مع الفرق أن الأمر في وضعية الوضع العادي `p` يطبع محتوى السجل بعد المؤشر والأمر `:put` يطبع محتوى السجل في سطر جديد.

نظرًا لأن `:put` هو أمر سطر الأوامر، يمكنك تمرير عنوان له. `:10put a` ستلصق النص من السجل a أسفل السطر 10.

خدعة رائعة لتمرير `:put` مع سجل الثقب الأسود (`"_`). نظرًا لأن سجل الثقب الأسود لا يخزن أي نص، فإن `:put _` سيقوم بإدراج سطر فارغ بدلاً من ذلك. يمكنك دمج هذا مع الأمر العام لإدراج عدة أسطر فارغة. على سبيل المثال، لإدراج أسطر فارغة أسفل جميع الأسطر التي تحتوي على النص "end"، قم بتشغيل `:g/end/put _`. ستتعلم عن الأمر العام لاحقًا.

## تعلم السجلات بطريقة ذكية

لقد وصلت إلى النهاية. تهانينا! إذا كنت تشعر بالإرهاق من كمية المعلومات، فأنت لست وحدك. عندما بدأت أولاً في تعلم سجلات فيم، كان هناك الكثير من المعلومات التي يصعب استيعابها دفعة واحدة.

لا أعتقد أنه يجب عليك حفظ جميع السجلات على الفور. لتصبح منتجًا، يمكنك البدء باستخدام هذه السجلات الثلاثة فقط:
1. السجل غير المسمى (`""`).
2. السجلات المسماة (`"a-z`).
3. السجلات المرقمة (`"0-9`).

نظرًا لأن السجل غير المسمى افتراضيًا إلى `p` و `P`، عليك فقط تعلم سجلين: السجلات المسماة والسجلات المرقمة. تعلم المزيد من السجلات تدريجيًا عندما تحتاج إليها. خذ وقتك.

يمتلك الإنسان العادي سعة ذاكرة قصيرة المدى محدودة، حوالي 5 - 7 عناصر في وقت واحد. لهذا السبب في تحريراتي اليومية، أستخدم فقط حوالي 5 - 7 سجلات مسماة. لا توجد طريقة لأتذكر جميع الستة والعشرين في رأسي. عادةً ما أبدأ بالسجل a، ثم b، صاعدًا في الترتيب الأبجدي. جرب ذلك وجرب حوله لترى أي تقنية تعمل بشكل أفضل بالنسبة لك.

سجلات فيم قوية. إذا تم استخدامها بشكل استراتيجي، يمكن أن تنقذك من كتابة نصوص متكررة لا حصر لها. التالي، دعنا نتعلم عن الماكروز.