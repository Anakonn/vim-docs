---
description: このドキュメントでは、ターミナルからVimを起動する方法やインストール手順について学びます。Vim 8.2を基にしています。
title: Ch01. Starting Vim
---

この章では、ターミナルからVimを起動するさまざまな方法を学びます。このガイドを書くときに使用していたのはVim 8.2です。Neovimや古いバージョンのVimを使用している場合でも、ほとんど問題はありませんが、一部のコマンドが利用できない可能性があることに注意してください。

## インストール

特定のマシンにVimをインストールする方法についての詳細な説明は行いません。良いニュースは、ほとんどのUnixベースのコンピュータにはVimがインストールされているはずです。もしインストールされていない場合でも、ほとんどのディストリビューションにはVimをインストールするための指示があります。

Vimのインストールプロセスに関する詳細情報をダウンロードするには、Vimの公式ダウンロードウェブサイトまたはVimの公式GitHubリポジトリをチェックしてください：
- [Vimウェブサイト](https://www.vim.org/download.php)
- [Vim GitHub](https://github.com/vim/vim)

## Vimコマンド

Vimがインストールされたら、ターミナルから次のコマンドを実行します：

```bash
vim
```

イントロ画面が表示されるはずです。ここが新しいファイルで作業する場所です。ほとんどのテキストエディタやIDEとは異なり、Vimはモーダルエディタです。「hello」と入力したい場合は、`i`で挿入モードに切り替える必要があります。`ihello<Esc>`と入力して「hello」というテキストを挿入します。

## Vimを終了する

Vimを終了する方法はいくつかあります。最も一般的なのは次のように入力することです：

```shell
:quit
```

短縮形として`:q`と入力することもできます。そのコマンドはコマンドラインモードのコマンドです（Vimのモードの1つです）。ノーマルモードで`:`を入力すると、カーソルが画面の下部に移動し、いくつかのコマンドを入力できます。コマンドラインモードについては、15章で学びます。挿入モードにいる場合、`:`を入力すると画面に":"という文字が表示されます。この場合、ノーマルモードに戻る必要があります。`<Esc>`を入力してノーマルモードに切り替えます。ちなみに、コマンドラインモードからも`<Esc>`を押すことでノーマルモードに戻ることができます。いくつかのVimモードからノーマルモードに「エスケープ」できることに気付くでしょう。

## ファイルを保存する

変更を保存するには、次のように入力します：

```shell
:write
```

短縮形として`:w`と入力することもできます。新しいファイルの場合、保存する前に名前を付ける必要があります。`file.txt`と名付けましょう。次のコマンドを実行します：

```shell
:w file.txt
```

保存して終了するには、`:w`と`:q`のコマンドを組み合わせます：

```shell
:wq
```

変更を保存せずに終了するには、`:q`の後に`!`を追加して強制終了します：

```shell
:q!
```

Vimを終了する方法はいくつかありますが、これらは日常的に使用するものです。

## ヘルプ

このガイド全体を通して、さまざまなVimのヘルプページを参照します。ヘルプページに移動するには、`:help {some-command}`（短縮形は`:h`）と入力します。`:h`コマンドには、トピックやコマンド名を引数として渡すことができます。たとえば、Vimを終了するさまざまな方法について学ぶには、次のように入力します：

```shell
:h write-quit
```

「write-quit」を検索する方法はどうやって知ったのか？実際には知りませんでした。ただ`:h`と入力し、「quit」と入力し、次に`<Tab>`を押しました。Vimは選択できる関連キーワードを表示しました。何かを調べる必要がある場合（「Vimがこれをできればいいのに…」）、ただ`:h`と入力し、いくつかのキーワードを試してから`<Tab>`を押してください。

## ファイルを開く

ターミナルからVimでファイル（`hello1.txt`）を開くには、次のコマンドを実行します：

```bash
vim hello1.txt
```

複数のファイルを一度に開くこともできます：

```bash
vim hello1.txt hello2.txt hello3.txt
```

Vimは`hello1.txt`、`hello2.txt`、および`hello3.txt`を別々のバッファで開きます。バッファについては次の章で学びます。

## 引数

`vim`ターミナルコマンドには、さまざまなフラグやオプションを渡すことができます。

現在のVimバージョンを確認するには、次のコマンドを実行します：

```bash
vim --version
```

これにより、現在のVimバージョンと、利用可能なすべての機能が`+`または`-`でマークされて表示されます。このガイドのいくつかの機能には、特定の機能が必要です。たとえば、後の章で`:history`コマンドを使用してVimのコマンドライン履歴を探ります。そのコマンドが機能するには、Vimに`+cmdline_history`機能が必要です。インストールしたVimには、特に人気のあるダウンロードソースからのものであれば、必要な機能がすべて含まれている可能性が高いです。

ターミナルから行う多くのことは、Vimの内部からも行うことができます。Vimの*内部*からバージョンを確認するには、次のように実行します：

```shell
:version
```

ファイル`hello.txt`を開いてすぐにVimコマンドを実行したい場合は、`vim`コマンドに`+{cmd}`オプションを渡すことができます。

Vimでは、`:s`コマンド（`:substitute`の短縮形）を使用して文字列を置き換えることができます。`hello.txt`を開いてすべての「pancake」を「bagel」に置き換えるには、次のように実行します：

```bash
vim +%s/pancake/bagel/g hello.txt
```

これらのVimコマンドはスタックできます：

```bash
vim +%s/pancake/bagel/g +%s/bagel/egg/g +%s/egg/donut/g hello.txt
```

Vimは「pancake」のすべてのインスタンスを「bagel」に置き換え、その後「bagel」を「egg」に置き換え、最後に「egg」を「donut」に置き換えます（置き換えについては後の章で学びます）。

`+`構文の代わりに、Vimコマンドの後に`-c`オプションを渡すこともできます：

```bash
vim -c %s/pancake/bagel/g hello.txt
vim -c %s/pancake/bagel/g -c %s/bagel/egg/g -c %s/egg/donut/g hello.txt
```

## 複数のウィンドウを開く

`-o`および`-O`オプションを使用して、水平および垂直の分割ウィンドウでVimを起動できます。

2つの水平ウィンドウでVimを開くには、次のように実行します：

```bash
vim -o2
```

5つの水平ウィンドウでVimを開くには、次のように実行します：

```bash
vim -o5
```

5つの水平ウィンドウを開き、最初の2つに`hello1.txt`と`hello2.txt`を埋め込むには、次のように実行します：

```bash
vim -o5 hello1.txt hello2.txt
```

2つの垂直ウィンドウ、5つの垂直ウィンドウ、および2つのファイルを持つ5つの垂直ウィンドウでVimを開くには：

```bash
vim -O2
vim -O5
vim -O5 hello1.txt hello2.txt
```

## サスペンド

編集中にVimをサスペンドする必要がある場合は、`Ctrl-z`を押すことができます。また、`:stop`または`:suspend`コマンドを実行することもできます。サスペンドされたVimに戻るには、ターミナルから`fg`を実行します。

## スマートにVimを起動する

`vim`コマンドは、他のターミナルコマンドと同様に多くの異なるオプションを取ることができます。2つのオプションは、Vimコマンドをパラメータとして渡すことを可能にします：`+{cmd}`および`-c cmd`。このガイドを通じて、より多くのコマンドを学ぶにつれて、Vimを起動するときにそれを適用できるかどうかを確認してください。また、ターミナルコマンドであるため、`vim`を他の多くのターミナルコマンドと組み合わせることができます。たとえば、`ls`コマンドの出力をVimで編集するためにリダイレクトすることができます：

```bash
ls -l | vim -
```

ターミナルでの`vim`コマンドについて詳しく学ぶには、`man vim`をチェックしてください。Vimエディタについて詳しく学ぶには、このガイドを読み続け、`:help`コマンドを使用してください。